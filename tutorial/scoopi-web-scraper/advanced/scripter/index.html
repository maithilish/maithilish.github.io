<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="Scoopi web scraper provides Scripter step to which user can hook arbitrary JavaScript to modify data">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://google.com/article"
        },
        "articleSection" : "tutorial",
        "name" : "Scripter - Scoopi Web Scraper - why just scrape when you can scoop",
        "headline" : "Scripter - Scoopi Web Scraper - why just scrape when you can scoop",
        "url" : "https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/",
        "description" : "Scoopi web scraper provides Scripter step to which user can hook arbitrary JavaScript to modify data",
        "inLanguage" : "en",
        "image": "https://www.codetab.org/logo.jpg",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": {
            "@type": "Organization",
            "name": "Maithilish",
            "url": "https://www.codetab.org/",
            "logo": {
               "@type": "ImageObject",
               "url": "https://www.codetab.org/logo.png",
               "width":"200",
               "height":"200"
            }
        },
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2020",
        "datePublished": "2020-11-05T06:29:00+0530",
        "dateModified" : "2020-11-05T06:29:00+0530",
        "wordCount" : "408",
        "keywords" : [ "scripter","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.e7fd2d89f73c680873529a110a9007503a1bda864a3a3a6c53c4eb02a54c35eb.css" integrity="sha256-5/0tifc8aAhzUpoRCpAHUDob2oZKOjpsU8TrAqVMNes=">

<title>Scripter - Scoopi Web Scraper - why just scrape when you can scoop</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>

  <div class="row">
    
    <aside id="sidebar" class="col-md-3">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">

    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="Scoopi Web Scraper">
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/introduction/"
            class="toc-page text-wrap text-muted ">
            Introduction
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-basic" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Basics
    </a>
    
    <div id="tutorial-scoopi-web-scraper-basic" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/installation-quick-start/"
            class="toc-page dropdown-item text-wrap text-muted">
            Installation and Quick Start
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/definition-file/"
            class="toc-page dropdown-item text-wrap text-muted">
            Definition File
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/datadef/"
            class="toc-page dropdown-item text-wrap text-muted">
            DataDef
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/dimensions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dimensions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/data-items-dynamic-query/"
            class="toc-page dropdown-item text-wrap text-muted">
            Data Items and Dynamic Query
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/index-indexrange-breakafter/"
            class="toc-page dropdown-item text-wrap text-muted">
            Index, IndexRange and BreakAfter
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/filters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Filters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/selector-query-analyzer/"
            class="toc-page dropdown-item text-wrap text-muted">
            Selector
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-advanced" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Advanced
    </a>
    
    <div id="tutorial-scoopi-web-scraper-advanced" class="">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-dimensions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi Dimensions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-tasks/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi Tasks
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/workflow-steps-plugins/"
            class="toc-page dropdown-item text-wrap text-muted">
            WorkFlow, Steps and Plugins
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/converters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Converters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/"
            class="toc-page dropdown-item text-wrap text-danger">
            Scripter
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/create-locators-links/"
            class="toc-page dropdown-item text-wrap text-muted">
            Create Locators from Links
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/pagination/"
            class="toc-page dropdown-item text-wrap text-muted">
            Pagination
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/appender-encoder/"
            class="toc-page dropdown-item text-wrap text-muted">
            Appender and Encoder
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dom Loader
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/"
            class="toc-page dropdown-item text-wrap text-muted">
            Ajax
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-manage" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Manage
    </a>
    
    <div id="tutorial-scoopi-web-scraper-manage" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/persistence/"
            class="toc-page dropdown-item text-wrap text-muted">
            Persistence
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/split-definitions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Split Definitions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/logs/"
            class="toc-page dropdown-item text-wrap text-muted">
            Logs
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/dashboard/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dashboard
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-cluster" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Cluster
    </a>
    
    <div id="tutorial-scoopi-web-scraper-cluster" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-quick-start/"
            class="toc-page dropdown-item text-wrap text-muted">
            Quick Start
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-docker/"
            class="toc-page dropdown-item text-wrap text-muted">
            Docker
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-kubernetes/"
            class="toc-page dropdown-item text-wrap text-muted">
            kubernetes
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
    </aside>

    <div id="contentbar" class="col-md-7">
        <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/&amp;text=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/&amp;t=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/&amp;title=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop%20https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/&amp;title=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/&amp;title=Scripter%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
        <div class="row">
          <main id="content" class="col-md-11 post-basic">
            <h1 id="script-plugin">Script Plugin</h1>
<p>The example in the previous chapter converts date field using built-in
DateRoller plugin. However, it is not possible to handle all types of
modification with built-in plugins. To cope with myriad possibilities,
Scoopi provides Scripter step to which user can hook arbitrary
JavaScript to modify data.</p>
<h2 id="scripter-step">Scripter Step</h2>
<p>The
<a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/fin/jsoup/ex-8a/job.yml" target="_blank">Example 8a</a>
adds <em>process</em> step to <em>jsoupDefault</em> steps in bs task. The relevant
snippet is shown below</p>
<p><code>defs/examples/fin/jsoup/ex-8a/job.yml</code></p>
<pre><code class="language-raw" data-lang="raw">bsTask:
  dataDef: bs
  steps:
    jsoupDefault:
      process:
        class: &quot;org.codetab.scoopi.step.script.Scripter&quot;
        previous: filter
        next: appender
        .... 
</code></pre><p>It inserts a new process step between filter and appender step of
jsoupDefault steps. The step class is
<em>org.codetab.scoopi.step.script.Scripter</em> which executes Script Plugin.</p>
<h2 id="script-plugin-1">Script Plugin</h2>
<p>The Script Plugin can execute any user provided JavaScript. The plugin
definition for process step is as below.</p>
<p><code>defs/examples/fin/jsoup/ex-8a/job.yml</code></p>
<pre><code class="language-raw" data-lang="raw">bsTask:
  dataDef: bs
  steps:
    jsoupDefault:
      process:
        class: &quot;org.codetab.scoopi.step.script.Scripter&quot;
        previous: filter
        next: appender
        plugins: [
          plugin: { 
            name: script, 
            class: &quot;org.codetab.scoopi.plugin.script.BasicScript&quot;,
            script: &quot;/defs/examples/fin/jsoup/ex-8a/script.js&quot;,
            entryPoint: &quot;execute&quot;,
            scripts: [ &quot;/defs/examples/fin/jsoup/ex-8a/moment.min.js&quot;] }            
        ]
</code></pre><p>The plugins/plugin definition is similar to the one used in previous
chapter but with following changes.</p>
<ul>
<li>class - org.codetab.scoopi.plugin.script.BasicScript</li>
<li>script - path to js file which contains the JavaScript code</li>
<li>entryPoint - the name of JavaScript function to call</li>
<li>scripts - array of additional JavaScript libraries to load</li>
</ul>
<p>The <em>entryPoint</em> property in plugin calls the function defined in js and
<em>scripts</em> array is used to add any other required JavaScripts or
libraries. In the above example, we add moment.min.js script which is
well known library in JavaScript to manipulate dates.</p>
<p>The JavaScript file <code>/defs/examples/fin/jsoup/ex-8a/script.js</code> is where
we have put our JavaScript code which is as shown below.</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">execute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getItems</span><span class="p">()</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">size</span><span class="p">();</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">dateAxis</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">getAxisByItemName</span><span class="p">(</span><span class="s2">&#34;year&#34;</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">dateAxis</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="s2">&#34;MMM &#39;YY&#34;</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">x</span><span class="p">).</span><span class="nx">endOf</span><span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD&#39;</span><span class="p">)</span>
        <span class="nx">dateAxis</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span>
<span class="p">}</span>
    <span class="k">return</span> <span class="nx">data</span>
 <span class="p">}</span>
</code></pre></div><p>The Scripter step passes data object which contains list of date items,
to the execute() function in script.js and js loops through each data
item and format the date using Moment library.</p>
<p>While script plugin is the easy and flexible way to modify any sort of
data but its execution is inherently slow when compared to the built-in
converter plugin. If you are well versed in Java, then better option is
to develop your own converter plugin by extending
<em>org.codetab.scoopi.plugin.converter</em> class.</p>
<p>Next, we move on to creation of new locators from links parsed from
pages and pagination.</p>

          </main>
        </div>
      </div>
  
    <aside id="sidebar-right" class="col-md-2">
      <div class="row my-5 justify-content-center border">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>

  </div>

</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js"></script>
</body>

</html>