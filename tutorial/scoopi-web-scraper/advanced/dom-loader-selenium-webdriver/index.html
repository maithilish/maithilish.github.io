<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Many web pages generate and render with JavaScript or Ajax functions. Scoopi Dom Loader step uses Selenium WebDriver to seamlessly scrape such pages."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"DOM Loader - Scoopi Web Scraper - why just scrape when you can scoop","headline":"DOM Loader - Scoopi Web Scraper - why just scrape when you can scoop","url":"https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/","description":"Many web pages generate and render with JavaScript or Ajax functions. Scoopi Dom Loader step uses Selenium WebDriver to seamlessly scrape such pages.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2020","datePublished":"2020-11-05T06:47:00+0530","dateModified":"2020-11-05T06:47:00+0530","wordCount":"721","keywords":["dom loader","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>DOM Loader - Scoopi Web Scraper - why just scrape when you can scoop</title></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Scoopi Web Scraper"><div><a href=https://www.codetab.org/tutorial/scoopi-web-scraper/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-basic id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Basics</a><div id=tutorial-scoopi-web-scraper-basic class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/installation-quick-start/ class="toc-page dropdown-item text-wrap text-muted">Installation and Quick Start</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/definition-file/ class="toc-page dropdown-item text-wrap text-muted">Definition File</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/datadef/ class="toc-page dropdown-item text-wrap text-muted">DataDef</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/dimensions/ class="toc-page dropdown-item text-wrap text-muted">Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/data-items-dynamic-query/ class="toc-page dropdown-item text-wrap text-muted">Data Items and Dynamic Query</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/index-indexrange-breakafter/ class="toc-page dropdown-item text-wrap text-muted">Index, IndexRange and BreakAfter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/filters/ class="toc-page dropdown-item text-wrap text-muted">Filters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/basic/selector-query-analyzer/ class="toc-page dropdown-item text-wrap text-muted">Selector</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-advanced id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Advanced</a><div id=tutorial-scoopi-web-scraper-advanced><a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-dimensions/ class="toc-page dropdown-item text-wrap text-muted">Multi Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-tasks/ class="toc-page dropdown-item text-wrap text-muted">Multi Tasks</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/workflow-steps-plugins/ class="toc-page dropdown-item text-wrap text-muted">WorkFlow, Steps and Plugins</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/converters/ class="toc-page dropdown-item text-wrap text-muted">Converters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/ class="toc-page dropdown-item text-wrap text-muted">Scripter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/create-locators-links/ class="toc-page dropdown-item text-wrap text-muted">Create Locators from Links</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/pagination/ class="toc-page dropdown-item text-wrap text-muted">Pagination</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/appender-encoder/ class="toc-page dropdown-item text-wrap text-muted">Appender and Encoder</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-danger">Dom Loader</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-muted">Ajax</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-manage id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Manage</a><div id=tutorial-scoopi-web-scraper-manage class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper/manage/persistence/ class="toc-page dropdown-item text-wrap text-muted">Persistence</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/manage/split-definitions/ class="toc-page dropdown-item text-wrap text-muted">Split Definitions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/manage/logs/ class="toc-page dropdown-item text-wrap text-muted">Logs</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/manage/dashboard/ class="toc-page dropdown-item text-wrap text-muted">Dashboard</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-cluster id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Cluster</a><div id=tutorial-scoopi-web-scraper-cluster class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-quick-start/ class="toc-page dropdown-item text-wrap text-muted">Quick Start</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-docker/ class="toc-page dropdown-item text-wrap text-muted">Docker</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper/cluster/scoopi-cluster-kubernetes/ class="toc-page dropdown-item text-wrap text-muted">kubernetes</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/&amp;text=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/&amp;t=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/&amp;title=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop%20https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/&amp;title=DOM%20Loader%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h1 id=javascript-and-webdriver>JavaScript and WebDriver</h1><p>So far in the guide, the examples scrape data from regular HTML pages.
But, we encounter many web pages that generates and renders pages with
JavaScript or Ajax functions. In this and next chapter, we explore ways
to seamlessly scrape such pages.</p><h2 id=dynamically-generated-pages>Dynamically generated pages</h2><p>The website <a href=http://toscrape.com target=_blank>toscrape.com</a> has many endpoints
showing the quotes in many different way that are generated through DOM
manipulation.</p><p>Open <a href=http://quotes.toscrape.com/js/ target=_blank>JavaScript - JavaScript generated
contents</a> page and view its page source.
It contains a script to load set of quotes held in an array to page&rsquo;s
DOM. While this page executes script on page load, other pages execute
script on user input like button clicks, selection of select field or on
form input. JSoup simply can&rsquo;t scrape such pages as it lacks JavaScript
processor while HtmlUnit can scrape them when JavaScript feature is
enabled.</p><p>To make things even more complex, the website hosts <a href=http://quotes.toscrape.com/scroll target=_blank>Scroll - infinite
scrolling pagination</a> where Ajax
requests are made as we scroll down to fetch quotes and load them to DOM
and even HtmlUnit fails to handle such complex browser behaviors.</p><h2 id=selenium-webdriver>Selenium WebDriver</h2><p>Scoopi can scrape any page without a hitch as long as page source
contains all the elements as rendered by the browser. All we need is to
catch hold of fully loaded page and pass its page source to parser step.
However, task is not trivial and only the full fledged browser can do
that.</p><p>The <a href=https://www.seleniumhq.org/projects/webdriver/ target=_blank>Selenium WebDriver</a>
is leading tool to test browser automation. It is used to control and
interact with browsers such Google Chrome, FireFox, Safari etc., and can
to simulate user interactions in WebDriver and load pages as done by the
browser. Scoopi has a robust and extensible work flow, script engine and
plugin framework and it quite easy to plugin Selenium WebDriver to
handle any sort of page.</p><p>In earlier examples, the loader step which fetches web pages through
<em>org.codetab.scoopi.step.extract.PageLoader</em> step class and pass its
contents to parser step. The PageLoader class can handle only the
regular pages and to process Js and Ajax pages loader step has to use
<em>org.codetab.scoopi.step.extract.DomLoader</em> class which internally use
Selenium WebDriver.</p><h2 id=install-firefox-driver>Install FireFox Driver</h2><p>Selenium WebDriver is an interface which allows programs to interact
with browsers such as FireFox or Chrome etc., To use it, we need to
install GeckoDriver which is proxy for clients to interact with
Gecko-based browsers such as FireFox.</p><p>Download appropriate GekoDriver for your system from <a href=https://github.com/mozilla/geckodriver/releases target=_blank>GitHub GekoDriver
Releases page</a>and
extract it. Next, create a directory named .gecko in user home directory
and copy geckodriver executable binary to it. In Linux, it is
$HOME/.gecko and in Windows c:\Users\${current<em>user</em>name}.</p><pre><code># linux

mkdir $HOME/.gecko
cp geckodriver $HOME/.gecko

# windows

mkdir .gecko in C:\Users\${logged_in_user_name}\.gecko
cp geckodriver.exe C:\Users\${logged_in_user_name}\.gecko
</code></pre><p>In case, driver binary is placed in any other folder then then set
<em>scoopi.webDriver.driverPath</em> in <code>conf/scoopi.properties</code> file</p><pre><code># linux

scoopi.webDriver.driverPath=/some-folder/geckodriver

# windows

scoopi.webDriver.driverPath=C:\some-folder\geckodriver.exec
</code></pre><h2 id=javascript-generated-contents>JavaScript generated contents</h2><p>The <a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/defs/examples/quote/jsoup/ex-1/job.yml target=_blank>Quote
Example 1</a>
scrape quotations from <a href=http://quotes.toscrape.com/js/ target=_blank>JavaScript generated
contents</a>. This site holds set of quotes
in an array and adds them to page DOM on page load in the browser. It
also has pagination link to navigate to next page which again uses
JavaScript to generate contents.</p><p>The locator and task snippet from this example is as below.</p><p><code>defs/examples/quote/jsoup/ex-1/job.yml</code></p><pre tabindex=0><code class=language-raw data-lang=raw>locatorGroups:
  quoteGroup:
    locators: [
       { name: quotes, url: &#34;http://quotes.toscrape.com/js/&#34; }  
    ]

taskGroups:
  quoteGroup:
    quoteTask:
      dataDef: quote
      steps: 
        jsoupDefault:
          loader:
            class: &#34;org.codetab.scoopi.step.extract.DomLoader&#34;
            previous: seeder 
            next: parser
</code></pre><p>The quoteTask uses jsoupDefault steps and override its loader step to
use DomLoader class.</p><p>The datadef from the example is shown below.</p><p><code>defs/examples/quote/jsoup/ex-1/job.yml</code></p><pre tabindex=0><code class=language-raw data-lang=raw>dataDefs:
  quoteLink:
    query:
      block: &#34;li.next&#34;              
    items: [ 
      item: { name: &#34;link&#34;,  selector: &#34;a:nth-child(1) attribute: href&#34;, linkGroup: quoteGroup, 
              prefix: [ &#34;http://quotes.toscrape.com&#34; ],  
              linkBreakOn: [ &#34;http://quotes.toscrape.com/js/page/4/&#34; ] },
    ]

  quote:
    query:
      block: &#34;body &gt; div div.quote:nth-child(%{item.index})&#34;
      selector: &#34;span:nth-child(1)&#34;            
    items: [
      item: { name: &#34;quote&#34;, indexRange: 4-13, value: &#34;quote&#34;},      
    ]
    dims: [
      item: { name: &#34;by&#34;, selector: &#34;span:nth-child(2) &gt; small&#34; },
      item: { name: &#34;tags&#34;, selector: &#34;div a&#34; },     
    ]
</code></pre><p>There is nothing new in the dataDef and it is same as ones in earlier
examples. It defines two dataDefs - quote to scrape quote from the page
and quoteLink to paginate to next page. The pagination breaks when it
encounters page 4 as linkBreakOn is set to url of page 4.</p><p>In this next chapter, we explain the use of scripts to emulate browser
interactions.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><ins class=adsbygoogle style=display:inline-block;width:160px;height:600px data-ad-client=ca-pub-1281079745125126 data-ad-slot=8963022093></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>