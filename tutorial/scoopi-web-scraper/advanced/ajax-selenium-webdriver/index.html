<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="Scoopi Web Scraper can plugin javascript to to interact with Selenium WebDriver to emulate browser automation and ajax calls">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://google.com/article"
        },
        "articleSection" : "tutorial",
        "name" : "Ajax - Scoopi Web Scraper - why just scrape when you can scoop",
        "headline" : "Ajax - Scoopi Web Scraper - why just scrape when you can scoop",
        "url" : "https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/",
        "description" : "Scoopi Web Scraper can plugin javascript to to interact with Selenium WebDriver to emulate browser automation and ajax calls",
        "inLanguage" : "en",
        "image": "https://www.codetab.org/logo.jpg",
        "author" : "[\\logo.svg$]Maithilish",
        "creator" : "[\\logo.svg$]Maithilish",
        "publisher": {
            "@type": "Organization",
            "name": "[\\logo.svg$]Maithilish",
            "url": "https://www.codetab.org/",
            "logo": {
               "@type": "ImageObject",
               "url": "https://www.codetab.org/logo.png",
               "width":"200",
               "height":"200"
            }
        },
        "copyrightHolder" : "[\\logo.svg$]Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-12T07:03:00+0530",
        "dateModified" : "2019-01-12T07:03:00+0530",
        "wordCount" : "379",
        "keywords" : [ "ajax","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.5094155807f5e8e42efd4efe08a15d3c51025b1e28787bdea850902bf7650261.css" integrity="sha256-UJQVWAf16OQu/U7&#43;CKFdPFECWx4oeHveqFCQK/dlAmE=">

<title>Ajax - Scoopi Web Scraper - why just scrape when you can scoop</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>

  <div class="row">
    
    <aside id="sidebar" class="col-md-3">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">

    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="Scoopi Web Scraper">
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/introduction/"
            class="toc-page text-wrap text-muted ">
            Introduction
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-basic" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Basics
    </a>
    
    <div id="tutorial-scoopi-web-scraper-basic" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/installation-quick-start/"
            class="toc-page dropdown-item text-wrap text-muted">
            Installation and Quick Start
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/definition-file/"
            class="toc-page dropdown-item text-wrap text-muted">
            Definition File
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/datadef/"
            class="toc-page dropdown-item text-wrap text-muted">
            DataDef
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/dimensions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dimensions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/data-items-dynamic-query/"
            class="toc-page dropdown-item text-wrap text-muted">
            Data Items and Dynamic Query
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/index-indexrange-breakafter/"
            class="toc-page dropdown-item text-wrap text-muted">
            Index, IndexRange and BreakAfter
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/filters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Filters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/basic/selector-query-analyzer/"
            class="toc-page dropdown-item text-wrap text-muted">
            Selector
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-advanced" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Advanced
    </a>
    
    <div id="tutorial-scoopi-web-scraper-advanced" class="">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-dimensions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi Dimensions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-tasks/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi Tasks
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/workflow-steps-plugins/"
            class="toc-page dropdown-item text-wrap text-muted">
            WorkFlow, Steps and Plugins
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/converters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Converters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/"
            class="toc-page dropdown-item text-wrap text-muted">
            Scripter
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/create-locators-links/"
            class="toc-page dropdown-item text-wrap text-muted">
            Create Locators from Links
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/pagination/"
            class="toc-page dropdown-item text-wrap text-muted">
            Pagination
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/appender-encoder/"
            class="toc-page dropdown-item text-wrap text-muted">
            Appender and Encoder
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dom Loader
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/"
            class="toc-page dropdown-item text-wrap text-danger">
            Ajax
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-manage" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Manage
    </a>
    
    <div id="tutorial-scoopi-web-scraper-manage" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/persistence/"
            class="toc-page dropdown-item text-wrap text-muted">
            Persistence
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/split-definitions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Split Definitions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/logs/"
            class="toc-page dropdown-item text-wrap text-muted">
            Logs
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/dashboard/"
            class="toc-page dropdown-item text-wrap text-muted">
            Dashboard
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper/manage/db-setup/"
            class="toc-page dropdown-item text-wrap text-muted">
            DB Setup
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
    </aside>

    <div id="contentbar" class="col-md-7">
        <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/&amp;text=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/&amp;t=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/&amp;title=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop%20https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/&amp;title=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/&amp;title=Ajax%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
        <div class="row">
          <main id="content" class="col-md-11 post-basic">
            

<h1 id="browser-interaction-with-webdriver">Browser interaction with WebDriver</h1>

<p>In this previous chapter, we scrape data from page with JavaScript
created contents. In this chapter, we extend it further and show how to
interact with WebDriver to emulate browser automation.</p>

<h2 id="browser-scrolling-and-ajax">Browser Scrolling and Ajax</h2>

<p>The <a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/quote/jsoup/ex-2/job.yml" target="_blank">Quote
Example 2</a>
scrape quotations from <a href="http://quotes.toscrape.com/scroll" target="_blank">Scroll - infinite scrolling
pagination</a> page loads next set of
quotes through Ajax call when we scroll to the bottom of browser.</p>

<p>The locator and task snippet from this example is as below.</p>

<p><code>defs/examples/quote/jsoup/ex-1/job.yml</code></p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">locatorGroups:
  quoteGroup:
    locators: &lt;a href=&#34;https://www.seleniumhq.org/docs/03_webdriver.jsp#introducing-the-selenium-webdriver-api-by-example&#34; target=&#34;_blank&#34;&gt;
       { name: quotes, url: &#34;http://quotes.toscrape.com/scroll&#34; }  
    ]

taskGroups:
  quoteGroup:
    quoteTask:
      dataDef: quote
      steps: 
        jsoupDefault:
          loader:
            class: &#34;org.codetab.scoopi.step.extract.DomLoader&#34;
            previous: seeder 
            next: parser
            plugins: [
              plugin: { 
                name: script, 
                class: &#34;org.codetab.scoopi.plugin.script.BasicScript&#34;,
                script: &#34;/defs/examples/quote/jsoup/ex-2/script.js&#34;,
                entryPoint: &#34;execute&#34;, }                            
            ]</code></pre></div>
<p>The quoteTask uses jsoupDefault steps and override its loader step to
use DomLoader class as we saw in the last chapter. However, in this
example we add a script plugin which calls execute function defined in
file <code>defs/examples/quote/jsoup/ex-2/script.js</code>.</p>

<p>In this script we place the Selenium WebDriver and JavaScript code to
scroll the window as shown below.</p>

<p><code>defs/examples/quote/jsoup/ex-2/script.js</code></p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">function execute(webDriver) {

    var Select = Java.type(&#39;org.openqa.selenium.support.ui.Select&#39;);
    var By = Java.type(&#39;org.openqa.selenium.By&#39;);

    var pagesToScroll = 4;

    while (true) {

       // scroll
       webDriver
          .executeScript(&#34;window.scrollTo(0, document.body.scrollHeight)&#34;);

       // wait
       webDriver
          .executeAsyncScript(&#34;window.setTimeout(arguments[arguments.length - 1], 500);&#34;);

       var eles = webDriver.findElements(By.className(&#34;quote&#34;));
       if (eles.size() &gt;= pagesToScroll * 10) {
          break;
       }
    }

  }</code></pre></div>
<p>When DomLoader step calls the script execute() function, it passes
instance of WebDriver. In while loop, the webdriver method
executeScript() scrolls the browser window down which triggers page&rsquo;s
ajax call to fetch quotes for next page and then the
executeAsyncScript() method wait for 500ms so that DOM is loaded. After
that, findElements() method selects and returns list of HTML elements
with class name quote. The while loop breaks when list size is more than
40.</p>

<p>Script Engine can execute any Java method of WebDriver class, but to
execute method any other class of Selenium such as Select class or By
class we need to map those class to JavaScript variables using
Java.type() calls as done at the start of script.</p>

<p>WebDriver has easy to explore and understand API to select elements,
navigate pages and execute page script. Refer [Selenium WebDriver
Documentation</a>
to learn more about it.</p>

<p>In the next section, we explain features to manage Scoopi.</p>

          </main>
        </div>
      </div>
  
    <aside id="sidebar-right" class="col-md-2">
      <div class="row my-5 justify-content-center border">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>

  </div>

</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js"></script>
</body>

</html>