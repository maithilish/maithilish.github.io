<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="Scoopi Web Scraper can scrape links from a start page and dynamically create locators from links. It allows you to recursively scrape the web pages.">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "http://www.codetab.org/"
        },
        "articleSection" : "tutorial",
        "name" : "Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop",
        "headline" : "Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop",
        "description" : "Scoopi Web Scraper can scrape links from a start page and dynamically create locators from links. It allows you to recursively scrape the web pages.",
        "inLanguage" : "en",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": "Maithilish",
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-12 00:29:00 +0530 IST",
        "dateModified" : "2019-01-12 00:29:00 +0530 IST",
        "url" : "/tutorial/scoopi-web-scraper/advanced/create-locators-links/",
        "wordCount" : "538",
        "keywords" : [ "create locators from links","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">





<link rel="stylesheet" href="/css/vendor.min.fda72737edeb853fff288025d5ea04d671489f0f524e38c245ccf83306a19ab3.css" integrity="sha256-/acnN&#43;3rhT//KIAl1eoE1nFInw9STjjCRcz4MwahmrM=">

<title>Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>
  <div class="row">
    <aside id="sidebar" class="col-md-4">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">
        
    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="Scoopi Web Scraper">
    
    <div>
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/introduction/" class="toc-page text-muted ">
            Introduction
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-basic" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Basics
    </a>
    
    <div id="tutorial-scoopi-web-scraper-basic" class="collapse">
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/installation-quick-start/" class="toc-page dropdown-item text-muted">
            Installation and Quick Start
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/definition-file/" class="toc-page dropdown-item text-muted">
            Definition File
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/datadef/" class="toc-page dropdown-item text-muted">
            DataDef
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/dimensions/" class="toc-page dropdown-item text-muted">
            Dimensions
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/data-items-dynamic-query/" class="toc-page dropdown-item text-muted">
            Data Items and Dynamic Query
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/index-indexrange-breakafter/" class="toc-page dropdown-item text-muted">
            Index, IndexRange and BreakAfter
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/filters/" class="toc-page dropdown-item text-muted">
            Filters
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/basic/selector-query-analyzer/" class="toc-page dropdown-item text-muted">
            Selector
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-advanced" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Advanced
    </a>
    
    <div id="tutorial-scoopi-web-scraper-advanced" class="">
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-dimensions/" class="toc-page dropdown-item text-muted">
            Multi Dimensions
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/multi-tasks/" class="toc-page dropdown-item text-muted">
            Multi Tasks
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/workflow-steps-plugins/" class="toc-page dropdown-item text-muted">
            WorkFlow, Steps and Plugins
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/converters/" class="toc-page dropdown-item text-muted">
            Converters
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/scripter/" class="toc-page dropdown-item text-muted">
            Scripter
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/create-locators-links/" class="toc-page dropdown-item text-danger">
            Create Locators from Links
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/pagination/" class="toc-page dropdown-item text-muted">
            Pagination
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/appender-encoder/" class="toc-page dropdown-item text-muted">
            Appender and Encoder
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/dom-loader-selenium-webdriver/" class="toc-page dropdown-item text-muted">
            Dom Loader
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/advanced/ajax-selenium-webdriver/" class="toc-page dropdown-item text-muted">
            Ajax
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-scoopi-web-scraper-manage" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Manage
    </a>
    
    <div id="tutorial-scoopi-web-scraper-manage" class="collapse">
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/manage/persistence/" class="toc-page dropdown-item text-muted">
            Persistence
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/manage/split-definitions/" class="toc-page dropdown-item text-muted">
            Split Definitions
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/manage/logs/" class="toc-page dropdown-item text-muted">
            Logs
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/manage/dashboard/" class="toc-page dropdown-item text-muted">
            Dashboard
        </a>
        
        
        <a href="http://www.codetab.org/tutorial/scoopi-web-scraper/manage/db-setup/" class="toc-page dropdown-item text-muted">
            DB Setup
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
      <div class="row my-5 justify-content-center">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>
    <main id="content" class="col-md-8 post-basic">
      

<h1 id="create-locators-from-links">Create Locators from Links</h1>

<p>The definitions would become lengthy when we define each and every link
in job.xml. Instead, Scoopi can scrape links from any page and
dynamically create locators. This feature allows you to recursively
scrape the web pages. Let&rsquo;s see how to create locators from scraped
links.</p>

<h2 id="link-scrape-step">Link Scrape Step</h2>

<p>The
<a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/fin/jsoup/ex-9/job.yml" target="_blank">Example 9</a>
scrapes Balance Sheet and Profit &amp; Loss links from
<a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/fin/page/acme-snapshot-links.html" target="_blank">acme-snapshot.html</a>
page. Links snippet in the html page is as below.</p>

<p><code>defs/examples/fin/page/acme-snapshot-links.html</code></p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="c">&lt;!-- links to other pages --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;page_links&#34;</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Financial<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;acme-bs.html&#34;</span><span class="p">&gt;</span>Balance Sheet<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;acme-pl.html&#34;</span><span class="p">&gt;</span>Profit <span class="err">&amp;</span> Loss<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>In job.xml, instead of locators for bs and pl, we just define locator
for acme-snapshot-links.html and task named linkTask to scrape and
convert links.</p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">locatorGroups:
  snapshotGroup:
    locators: &lt;a href=&#34;https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/fin/jsoup/ex-10/job.yml&#34; target=&#34;_blank&#34;&gt;
       { name: acme, url: &#34;/defs/examples/fin/page/acme-snapshot-links.html&#34; }  
    ]

taskGroups:
  snapshotGroup:

    priceTask:
      dataDef: price

    linkTask:
      dataDef: links
      steps:
        jsoupDefault:
          process:
            class: &#34;org.codetab.scoopi.step.process.LocatorCreator&#34;
            previous: parser
            next: seeder</code></pre></div>
<p>In <em>jsoupDefault</em> steps the parser step handover data to filter filter
which in turn handover the filtered data to appender. The work flow is</p>

<pre><code>seeder -&gt; loader -&gt; parser -&gt; filter -&gt; appender
</code></pre>

<p>But, the task <em>linkTask</em> override inserts a new <em>process</em> step with step
class <code>org.codetab.scoopi.step.convert.LocatorCreator</code> which creates a
new locator from the parsed link and hands over it to seeder step and
the work flow
becomes</p>

<pre><code> seeder -&gt; loader -&gt; parser -&gt; process (locator creator) -&gt; seeder -&gt; loader -&gt; parser -&gt; filter -&gt; appender
</code></pre>

<h2 id="datadef-for-links">DataDef for Links</h2>

<p>The linkTask used dataDef named <em>links</em> where we defines link to scrape
which is as follows</p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">links:
    query:
      block: &#34;#page_links &gt; table &gt; tbody &gt; tr &gt; td:nth-child(4) &gt; ul&#34;
    items: [ 
      item: { name: &#34;link&#34;, linkGroup: bsGroup, index: 2,  
              selector: &#34;li:nth-child(%{index}) &gt; a attribute: href&#34;, 
              prefix: [ &#34;/defs/examples/fin/page/&#34; ] },
    ]</code></pre></div>
<p>The axis item defines data item to hold scraped links. The linkGroup is
name of the task group that has to set to the newly created locator.
Let&rsquo;s clarify this aspect in detail. The task group of the linkTask is
snapshotGroup. So the parsed link initially belongs to task group
snapshotGroup. But any dataDef defined in snapshotGroup are not able to
parse the acme-bs.html page. Only tasks in bsGroup are able to parse the
acme-bs.html as they use bs dataDef. So we need to assign newly created
bs locator to bsGroup which is specified using linkGroup property of
member. The groups changes in workflow is show
below.</p>

<pre><code> |-----            snapshotGroup                    -----|                     bsGroup 

 seeder -&gt; loader -&gt; parser -&gt; process (locator creator) -&gt; seeder -&gt; loader -&gt; parser -&gt; process (filter) -&gt; converter
</code></pre>

<h2 id="prefix">Prefix</h2>

<p>The web pages uses absolute or relative links. The example
acme-snapshot-links.html uses relative links as shown below.</p>

<p><code>defs/examples/fin/page/acme-snapshot-links.html</code></p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="c">&lt;!-- links to other pages --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;page_links&#34;</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Financial<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;acme-bs.html&#34;</span><span class="p">&gt;</span>Balance Sheet<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;acme-pl.html&#34;</span><span class="p">&gt;</span>Profit <span class="err">&amp;</span> Loss<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>We have to prefix path <code>/defs/examples/fin/page/</code> to scraped link value
<code>acme-bs.html</code> otherwise loader is not able to load the page. Use prefix
property in item to add any prefix to the item value.</p>

<p>The
[Example 10</a>
combines all the definitions we have used so far (examples 1 to 9) -
links, price, snapshot, bs and pl - into single job which outputs all
the data to data.txt file.</p>

<p>The next chapter shows how to flip through pages with pagination and
scrape data.</p>

    </main>
  </div>
</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <img src="/icon/arrow-up.png" alt="Back to Top">
                </a>
            </span>
        </div>
    </div>

</footer>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>







<script src="/js/vendor.min.d5750c855207aebcf4fdb7568961a27500008ef4a4f40b63a7b028f80a9221d3.js"></script>
</body>

</html>