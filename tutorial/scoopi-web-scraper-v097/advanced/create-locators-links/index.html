<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Scoopi Web Scraper can scrape links from a start page and dynamically create locators from links. It allows you to recursively scrape the web pages."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop","headline":"Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop","url":"https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/","description":"Scoopi Web Scraper can scrape links from a start page and dynamically create locators from links. It allows you to recursively scrape the web pages.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-12T00:29:00+0530","dateModified":"2019-01-12T00:29:00+0530","wordCount":"536","keywords":["create locators from links","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Scrape Links - Scoopi Web Scraper - why just scrape when you can scoop</title></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Scoopi Web Scraper"><div><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-basic id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Basics</a><div id=tutorial-scoopi-web-scraper-v097-basic class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/installation-quick-start/ class="toc-page dropdown-item text-wrap text-muted">Installation and Quick Start</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/definition-file/ class="toc-page dropdown-item text-wrap text-muted">Definition File</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/datadef/ class="toc-page dropdown-item text-wrap text-muted">DataDef</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/dimensions/ class="toc-page dropdown-item text-wrap text-muted">Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/data-items-dynamic-query/ class="toc-page dropdown-item text-wrap text-muted">Data Items and Dynamic Query</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/index-indexrange-breakafter/ class="toc-page dropdown-item text-wrap text-muted">Index, IndexRange and BreakAfter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/filters/ class="toc-page dropdown-item text-wrap text-muted">Filters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/selector-query-analyzer/ class="toc-page dropdown-item text-wrap text-muted">Selector</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-advanced id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Advanced</a><div id=tutorial-scoopi-web-scraper-v097-advanced><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/multi-dimensions/ class="toc-page dropdown-item text-wrap text-muted">Multi Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/multi-tasks/ class="toc-page dropdown-item text-wrap text-muted">Multi Tasks</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/workflow-steps-plugins/ class="toc-page dropdown-item text-wrap text-muted">WorkFlow, Steps and Plugins</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/ class="toc-page dropdown-item text-wrap text-muted">Converters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/scripter/ class="toc-page dropdown-item text-wrap text-muted">Scripter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/ class="toc-page dropdown-item text-wrap text-danger">Create Locators from Links</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/pagination/ class="toc-page dropdown-item text-wrap text-muted">Pagination</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/appender-encoder/ class="toc-page dropdown-item text-wrap text-muted">Appender and Encoder</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/dom-loader-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-muted">Dom Loader</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/ajax-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-muted">Ajax</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-manage id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Manage</a><div id=tutorial-scoopi-web-scraper-v097-manage class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/persistence/ class="toc-page dropdown-item text-wrap text-muted">Persistence</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/split-definitions/ class="toc-page dropdown-item text-wrap text-muted">Split Definitions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/logs/ class="toc-page dropdown-item text-wrap text-muted">Logs</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/dashboard/ class="toc-page dropdown-item text-wrap text-muted">Dashboard</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/db-setup/ class="toc-page dropdown-item text-wrap text-muted">DB Setup</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/&amp;text=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/&amp;t=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/&amp;title=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop%20https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/&amp;title=Scrape%20Links%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h1 id=create-locators-from-links>Create Locators from Links</h1><p>The definitions would become lengthy when we define each and every link
in job.xml. Instead, Scoopi can scrape links from any page and
dynamically create locators. This feature allows you to recursively
scrape the web pages. Let&rsquo;s see how to create locators from scraped
links.</p><h2 id=link-scrape-step>Link Scrape Step</h2><p>The
<a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/defs/examples/fin/jsoup/ex-9/job.yml target=_blank>Example 9</a>
scrapes Balance Sheet and Profit & Loss links from
<a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/defs/examples/fin/page/acme-snapshot-links.html target=_blank>acme-snapshot.html</a>
page. Links snippet in the html page is as below.</p><p><code>defs/examples/fin/page/acme-snapshot-links.html</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- links to other pages --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;page_links&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>Financial<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;acme-bs.html&#34;</span><span class=p>&gt;</span>Balance Sheet<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;acme-pl.html&#34;</span><span class=p>&gt;</span>Profit <span class=err>&amp;</span> Loss<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>In job.xml, instead of locators for bs and pl, we just define locator
for acme-snapshot-links.html and task named linkTask to scrape and
convert links.</p><pre tabindex=0><code class=language-raw data-lang=raw>locatorGroups:
  snapshotGroup:
    locators: [
       { name: acme, url: &#34;/defs/examples/fin/page/acme-snapshot-links.html&#34; }
    ]

taskGroups:
  snapshotGroup:

    priceTask:
      dataDef: price

    linkTask:
      dataDef: links
      steps:
        jsoupDefault:
          process:
            class: &#34;org.codetab.scoopi.step.process.LocatorCreator&#34;
            previous: parser
            next: seeder
</code></pre><p>In <em>jsoupDefault</em> steps the parser step handover data to filter filter
which in turn handover the filtered data to appender. The work flow is</p><pre><code>seeder -&gt; loader -&gt; parser -&gt; filter -&gt; appender
</code></pre><p>But, the task <em>linkTask</em> override inserts a new <em>process</em> step with step
class <code>org.codetab.scoopi.step.convert.LocatorCreator</code> which creates a
new locator from the parsed link and hands over it to seeder step and
the work flow
becomes</p><pre tabindex=0><code> seeder -&gt; loader -&gt; parser -&gt; process (locator creator) -&gt; seeder -&gt; loader -&gt; parser -&gt; filter -&gt; appender
</code></pre><h2 id=datadef-for-links>DataDef for Links</h2><p>The linkTask used dataDef named <em>links</em> where we defines link to scrape
which is as follows</p><pre tabindex=0><code class=language-raw data-lang=raw>links:
    query:
      block: &#34;#page_links &gt; table &gt; tbody &gt; tr &gt; td:nth-child(4) &gt; ul&#34;
    items: [
      item: { name: &#34;link&#34;, linkGroup: bsGroup, index: 2,
              selector: &#34;li:nth-child(%{index}) &gt; a attribute: href&#34;,
              prefix: [ &#34;/defs/examples/fin/page/&#34; ] },
    ]
</code></pre><p>The axis item defines data item to hold scraped links. The linkGroup is
name of the task group that has to set to the newly created locator.
Let&rsquo;s clarify this aspect in detail. The task group of the linkTask is
snapshotGroup. So the parsed link initially belongs to task group
snapshotGroup. But any dataDef defined in snapshotGroup are not able to
parse the acme-bs.html page. Only tasks in bsGroup are able to parse the
acme-bs.html as they use bs dataDef. So we need to assign newly created
bs locator to bsGroup which is specified using linkGroup property of
member. The groups changes in workflow is show
below.</p><pre tabindex=0><code> |-----            snapshotGroup                    -----|                     bsGroup

 seeder -&gt; loader -&gt; parser -&gt; process (locator creator) -&gt; seeder -&gt; loader -&gt; parser -&gt; process (filter) -&gt; converter
</code></pre><h2 id=prefix>Prefix</h2><p>The web pages uses absolute or relative links. The example
acme-snapshot-links.html uses relative links as shown below.</p><p><code>defs/examples/fin/page/acme-snapshot-links.html</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- links to other pages --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;page_links&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>Financial<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;acme-bs.html&#34;</span><span class=p>&gt;</span>Balance Sheet<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;acme-pl.html&#34;</span><span class=p>&gt;</span>Profit <span class=err>&amp;</span> Loss<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>We have to prefix path <code>/defs/examples/fin/page/</code> to scraped link value
<code>acme-bs.html</code> otherwise loader is not able to load the page. Use prefix
property in item to add any prefix to the item value.</p><p>The <a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/defs/examples/fin/jsoup/ex-10/job.yml target=_blank>Example 10</a> combines all the definitions we have used so far (examples 1 to 9) - links, price, snapshot, bs and pl - into single job which outputs all the data to data.txt file.</p><p>The next chapter shows how to flip through pages with pagination and
scrape data.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><ins class=adsbygoogle style=display:inline-block;width:160px;height:600px data-ad-client=ca-pub-1281079745125126 data-ad-slot=8963022093></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>