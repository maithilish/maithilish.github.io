<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Scoopi web scraper default steps can be overriden to define new set of steps. It also possible to convert or format data using converter plugins"><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Converters - Scoopi Web Scraper - why just scrape when you can scoop","headline":"Converters - Scoopi Web Scraper - why just scrape when you can scoop","url":"https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/","description":"Scoopi web scraper default steps can be overriden to define new set of steps. It also possible to convert or format data using converter plugins","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-12T00:16:00+0530","dateModified":"2019-01-12T00:16:00+0530","wordCount":"483","keywords":["converters","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Converters - Scoopi Web Scraper - why just scrape when you can scoop</title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Scoopi Web Scraper"><div><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-basic id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Basics</a><div id=tutorial-scoopi-web-scraper-v097-basic class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/installation-quick-start/ class="toc-page dropdown-item text-wrap text-muted">Installation and Quick Start</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/definition-file/ class="toc-page dropdown-item text-wrap text-muted">Definition File</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/datadef/ class="toc-page dropdown-item text-wrap text-muted">DataDef</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/dimensions/ class="toc-page dropdown-item text-wrap text-muted">Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/data-items-dynamic-query/ class="toc-page dropdown-item text-wrap text-muted">Data Items and Dynamic Query</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/index-indexrange-breakafter/ class="toc-page dropdown-item text-wrap text-muted">Index, IndexRange and BreakAfter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/filters/ class="toc-page dropdown-item text-wrap text-muted">Filters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/basic/selector-query-analyzer/ class="toc-page dropdown-item text-wrap text-muted">Selector</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-advanced id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Advanced</a><div id=tutorial-scoopi-web-scraper-v097-advanced><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/multi-dimensions/ class="toc-page dropdown-item text-wrap text-muted">Multi Dimensions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/multi-tasks/ class="toc-page dropdown-item text-wrap text-muted">Multi Tasks</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/workflow-steps-plugins/ class="toc-page dropdown-item text-wrap text-muted">WorkFlow, Steps and Plugins</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/ class="toc-page dropdown-item text-wrap text-danger">Converters</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/scripter/ class="toc-page dropdown-item text-wrap text-muted">Scripter</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/create-locators-links/ class="toc-page dropdown-item text-wrap text-muted">Create Locators from Links</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/pagination/ class="toc-page dropdown-item text-wrap text-muted">Pagination</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/appender-encoder/ class="toc-page dropdown-item text-wrap text-muted">Appender and Encoder</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/dom-loader-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-muted">Dom Loader</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/ajax-selenium-webdriver/ class="toc-page dropdown-item text-wrap text-muted">Ajax</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-scoopi-web-scraper-v097-manage id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Manage</a><div id=tutorial-scoopi-web-scraper-v097-manage class=collapse><a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/persistence/ class="toc-page dropdown-item text-wrap text-muted">Persistence</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/split-definitions/ class="toc-page dropdown-item text-wrap text-muted">Split Definitions</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/logs/ class="toc-page dropdown-item text-wrap text-muted">Logs</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/dashboard/ class="toc-page dropdown-item text-wrap text-muted">Dashboard</a>
<a href=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/manage/db-setup/ class="toc-page dropdown-item text-wrap text-muted">DB Setup</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/&amp;text=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/&amp;t=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/&amp;title=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop%20https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v097/advanced/converters/&amp;title=Converters%20-%20Scoopi%20Web%20Scraper%20-%20why%20just%20scrape%20when%20you%20can%20scoop" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h1 id=converters>Converters</h1><p>This chapter explain adding new steps to workflow and converter plugins.</p><h2 id=add-new-step>Add new Step</h2><p>We can add new steps at task level. The
<a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/defs/examples/fin/jsoup/ex-8/job.yml target=_blank>Example 8</a>
adds <em>converter</em> step to <em>jsoupDefault</em> steps in bs task. The relevant
snippet is shown below</p><p><code>defs/examples/fin/jsoup/ex-8/job.yml</code></p><pre tabindex=0><code class=language-raw data-lang=raw>bsTask:
  dataDef: bs
  steps:
    jsoupDefault:
      converter:
        class: &#34;org.codetab.scoopi.step.process.DataConverter&#34;
        previous: filter
        next: appender
        ....
</code></pre><p>The bsTask uses jsoupDefault built-in step as base and inserts converter
step between filter and appender steps. The converter step is added only
to baTask and for any other task that uses jsoupDefault step is not
affected by this.</p><p>The structure of steps add or override is as follows</p><pre tabindex=0><code class=language-raw data-lang=raw>bsTask:                 -- task name
    dataDef: bs
    steps:
      jsoupDefault:          -- base steps name
        converter:           -- step to add or override
</code></pre><p>Steps can override or add multiple steps.</p><h2 id=converters-1>Converters</h2><p>Let&rsquo;s see how to add plugins to steps. The datadef snippet from the
example is as below.</p><pre tabindex=0><code class=language-raw data-lang=raw>bsTask:
  dataDef: bs
  steps:
    jsoupDefault:
      converter:
        class: &#34;org.codetab.scoopi.step.process.DataConverter&#34;
        previous: filter
        next: appender
        plugins: [
          plugin: {
                 name: dateConverter,
                 class: &#34;org.codetab.scoopi.plugin.converter.DateRoller&#34;,
                 item: year,
                 inPattern: &#34;MMM &#39;&#39;YY&#34;,
                 outPattern: &#34;yyyy-MM-dd&#34;,
                 roll: &#34;DAY_OF_MONTH=ceil&#34; }
       ]
</code></pre><p>The <em>plugins</em> is an array defined at step level and as array, it can
hold multiple <em>plugin</em> objects. The above example defines a single
plugin named dateConverter. It uses
<em>org.codetab.scoopi.plugin.converter.DateRoller</em> which is applied to
item named year. The inPattern and outPattern changes the date format
and also roll any date field to ceiling and floor. For example, if axis
item&rsquo;s date text is <em>Dec &lsquo;16</em>, the DateRoller first changes the date to
format YYYY-MM-dd and date becomes 2016-12-01, but as financial dates
are normally month end we need to roll the date field <em>DAY_OF_MONTH</em>
to ceiling to get month end date. Refer <a href=https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html target=_blank>SimpleDateFormat</a> for in and out patterns and <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html target=_blank>Calendar</a> for date fields.</p><p>Just to change the format without rolling the date, we can use
<em>org.codetab.scoopi.plugin.converter.DateFormater</em>.</p><h2 id=new-steps-definition>New steps definition</h2><p>Do we need to define multiple steps when multiple tasks require
jsoupDefault steps with date converter plugin. No, Scoopi allows you to
define new steps in job.yml file using top level <em>steps</em> element.</p><pre tabindex=0><code class=language-raw data-lang=raw>taskGroups:
  bsGroup:
    bsTask:
      dataDef: bs
      steps: fooSteps

  plGroup:
    plTask:
      dataDef: pl
      steps: fooSteps

steps:
  fooSteps:
    jsoupDefault:
      converter:
        class: &#34;org.codetab.scoopi.step.process.DataConverter&#34;
        previous: filter
        next: appender
        plugins: [
          plugin: {
            name: dateConverter,
            class: &#34;org.codetab.scoopi.plugin.converter.DateRoller&#34;,
            item: year,
            inPattern: &#34;MMM &#39;&#39;YY&#34;,
            outPattern: &#34;yyyy-MM-dd&#34;,
            roll: &#34;DAY_OF_MONTH=ceil&#34; }
        ]
</code></pre><p>The above snippet defines two tasks - bsTask and plTask and both uses an
user defined steps - fooSteps. The steps element defines a new fooSteps
which uses jsoupDefault as base and adds converter step with DateRoller
plugin. The steps element is top level element in job.yml like other top
level elements - taskGroups, locatorGroups and dataDefs.</p><p>We can also create completely new steps without using default steps as
base. To do that, copy any steps definition from <a href=https://github.com/maithilish/scoopi-scraper/blob/master/engine/src/main/resources/steps-default.yml target=_blank>steps-default.yml</a>
to job.yml. Rename and alter the step as required.</p><p>The next chapter describes scripting plugin which allows data
modifications with JavaScript.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>