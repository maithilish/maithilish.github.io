<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="This tutorial explains some of the advanced features of Hierarchical Multi Module Project. In extended-multi project, we add one more module to simple-multi and the new module, config, has one class ConfigService that uses Apache Commons Configuration library to manage configurations of the app"><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Maven Hierarchical Multi Module Project - CodeTab","headline":"Maven Hierarchical Multi Module Project - CodeTab","url":"https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/","description":"This tutorial explains some of the advanced features of Hierarchical Multi Module Project. In extended-multi project, we add one more module to simple-multi and the new module, config, has one class ConfigService that uses Apache Commons Configuration library to manage configurations of the app","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-11T21:49:00+0530","dateModified":"2019-01-11T21:49:00+0530","wordCount":"603","keywords":["Hierarchical Multi Module Project","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Maven Hierarchical Multi Module Project - CodeTab</title></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Apache Maven Tutorial</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Apache Maven Tutorial - CodeTab"><div><a href=https://www.codetab.org/tutorial/apache-maven/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/apache-maven/install-apache-maven/ class="toc-page text-wrap text-muted">Installation</a></div><div><a href=https://www.codetab.org/tutorial/apache-maven/simple-project/ class="toc-page text-wrap text-muted">Simple Project</a></div><div><a href=https://www.codetab.org/tutorial/apache-maven/dependency-management/ class="toc-page text-wrap text-muted">Dependency Management</a></div><div><a href=https://www.codetab.org/tutorial/apache-maven/lifecycle-phases/ class="toc-page text-wrap text-muted">Lifecycle Phases</a></div><div><a href=https://www.codetab.org/tutorial/apache-maven/maven-lifecycle-goals/ class="toc-page text-wrap text-muted">Phases and Plugin Goals</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-maven-plugins id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Plugins</a><div id=tutorial-apache-maven-plugins class=collapse><a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-plugins/ class="toc-page dropdown-item text-wrap text-muted">Plugins</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-plugin-goals/ class="toc-page dropdown-item text-wrap text-muted">Plugin Goals</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-plugin-configuration/ class="toc-page dropdown-item text-wrap text-muted">Plugin Configuration</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-plugin-execution/ class="toc-page dropdown-item text-wrap text-muted">Plugin Execution</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-project-object-model/ class="toc-page dropdown-item text-wrap text-muted">POM â€“ Project Object Model</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-resources-plugin/ class="toc-page dropdown-item text-wrap text-muted">Resources Plugin</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/manage-maven-directories/ class="toc-page dropdown-item text-wrap text-muted">Manage Directories</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/maven-archetype-plugin/ class="toc-page dropdown-item text-wrap text-muted">Archetype Plugin</a>
<a href=https://www.codetab.org/tutorial/apache-maven/plugins/useful-maven-help-commands/ class="toc-page dropdown-item text-wrap text-muted">Useful Help Commands</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-maven-distribution id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Project Distribution</a><div id=tutorial-apache-maven-distribution class=collapse><a href=https://www.codetab.org/tutorial/apache-maven/distribution/maven-project-distribution/ class="toc-page dropdown-item text-wrap text-muted">Project Distribution</a>
<a href=https://www.codetab.org/tutorial/apache-maven/distribution/maven-assembly-plugin/ class="toc-page dropdown-item text-wrap text-muted">Assembly Plugin</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-maven-profile id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Profile</a><div id=tutorial-apache-maven-profile class=collapse><a href=https://www.codetab.org/tutorial/apache-maven/profile/maven-profiles/ class="toc-page dropdown-item text-wrap text-muted">Profiles</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-maven-multi-module id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Multi Module</a><div id=tutorial-apache-maven-multi-module><a href=https://www.codetab.org/tutorial/apache-maven/multi-module/multi-module-project/ class="toc-page dropdown-item text-wrap text-muted">Multi Module Project</a>
<a href=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/ class="toc-page dropdown-item text-wrap text-danger">Hierarchical Project</a>
<a href=https://www.codetab.org/tutorial/apache-maven/multi-module/inheritance/ class="toc-page dropdown-item text-wrap text-muted">Inheritance</a>
<a href=https://www.codetab.org/tutorial/apache-maven/multi-module/dependency-management/ class="toc-page dropdown-item text-wrap text-muted">Dependency Management</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-maven-eclipse id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Eclipse</a><div id=tutorial-apache-maven-eclipse class=collapse><a href=https://www.codetab.org/tutorial/apache-maven/eclipse/maven-eclipse-plugin/ class="toc-page dropdown-item text-wrap text-muted">Install Eclipse Maven Plugin</a>
<a href=https://www.codetab.org/tutorial/apache-maven/eclipse/manage-eclipse-maven-project/ class="toc-page dropdown-item text-wrap text-muted">Manage Eclipse Maven Project</a>
<a href=https://www.codetab.org/tutorial/apache-maven/eclipse/eclipse-maven-multi-module/ class="toc-page dropdown-item text-wrap text-muted">Eclipse Multi Module</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/&amp;text=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/&amp;t=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/&amp;title=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab%20https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/apache-maven/multi-module/hierarchical-project/&amp;title=Maven%20Hierarchical%20Multi%20Module%20Project%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h1 id=hierarchical-multi-module-project>Hierarchical Multi Module Project</h1><p>The previous tutorial explained the structure of a simple multi module project. Let&rsquo;s extend it further to learn advanced features of Maven multi module project.</p><p>The example code is available at GitHub <a href=https://github.com/maithilish/maven-examples target=_blank>Maven Examples</a>. Download the examples as zip and extract it to some location or clone it with git.</p><h2 id=flat-vs-hierarchical-layout>Flat vs Hierarchical Layout</h2><p>In extended-multi project, we add one more module to simple-multi and
the new module, <code>config</code>, has one class ConfigService that uses Apache
Commons Configuration library to manage configurations of the app.</p><p>We can keep on adding new modules to the top-level directory as we have
done with app and util modules in simple-multi. But, with this flat
layout, we soon end up with lots of module in the top-level directory.</p><p>Instead we can structure the project hierarchically, and group <code>util</code>
and <code>config</code> modules under another module (for example named as shared)
and add the <code>shared</code> module to top-level parent POM.</p><p>The flat and hierarchical layout is shown below (parent POM are
highlighted with yellow)</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/apache-maven/media/maven-multi-flat-hierachical-layout.png alt="maven multi module flat and hierachical layout"></figure><p>To build extended-multi, go to the extracted directory and run</p><pre><code>$ cd extended-multi
$ mvn test
</code></pre><p>which builds <code>shared</code>, <code>util</code>, <code>config</code> and <code>app</code> modules in that order.</p><h2 id=commons-configurations>Commons Configurations</h2><p>By the way, Apache Commons Configuration is quite useful to manage
configurations from multiple sources such as XML, property file or
system. But, for simplicity, in extended-multi we just hardcoded a
config value and retrieve it via getter. In case, you like to use it any
of your projects, then see our Gotz Project <a href=https://github.com/maithilish/gotz/blob/master/src/main/java/org/codetab/gotz/shared/ConfigService.java target=_blank>ConfigService class</a>
for complete example.</p><div>&nbsp;</div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1281079745125126 data-ad-slot=6135368983></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div>&nbsp;</div><h2 id=example>Example</h2><p>Let&rsquo;s go through the structure of <code>extended-multi</code> project. The top
level directory contains parent POM and two module directories - app and
shared.</p><p>The parent POM specifies maven coordinates and packaging type as pom.
The <code>modules/module</code> element adds app and shared modules.</p><p><code>extended-multi/pom.xml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl>....
</span></span><span class=line><span class=cl><span class=nt>&lt;groupId&gt;</span>org.codetab<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;artifactId&gt;</span>extended-multi<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;version&gt;</span>1.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;packaging&gt;</span>pom<span class=nt>&lt;/packaging&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;modules&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;module&gt;</span>app<span class=nt>&lt;/module&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;module&gt;</span>shared<span class=nt>&lt;/module&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/modules&gt;</span>
</span></span><span class=line><span class=cl>....
</span></span></code></pre></div><p>There is no much change in app module which we saw in the previous
tutorial expect that it specifies extended-multi as its parent.</p><p>The <code>shared</code> module folder contains two module directories - util and
config and a parent POM. The contents of <code>shared/pom.xml</code> is as below</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl>....
</span></span><span class=line><span class=cl><span class=nt>&lt;parent&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.codetab<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>extended-multi<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/parent&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;artifactId&gt;</span>shared<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;packaging&gt;</span>pom<span class=nt>&lt;/packaging&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;modules&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;module&gt;</span>util<span class=nt>&lt;/module&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;module&gt;</span>config<span class=nt>&lt;/module&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/modules&gt;</span>
</span></span><span class=line><span class=cl>....
</span></span></code></pre></div><p>It specifies that <code>extended-multi</code> as its parent and adds two modules -
<code>util</code> and <code>config</code>. The packaging type is set as <code>pom</code> as there is no
source directory in it.</p><p>The config module pom.xml specifies that shared module is its parent and
uses commons configurations as dependency.</p><p><code>shared/config/pom.xml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl>....
</span></span><span class=line><span class=cl><span class=nt>&lt;parent&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.codetab<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>shared<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/parent&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;artifactId&gt;</span>util<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.apache.commons<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>3.6<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>commons-lang3<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span><span class=line><span class=cl>....
</span></span></code></pre></div><p>Similarly, the <code>shared/util/pom.xml</code> specifies that shared module is its
parent.</p><div>&nbsp;</div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1281079745125126 data-ad-slot=6135368983></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div>&nbsp;</div><h2 id=build>Build</h2><p>To build maven multi module project, we have to run maven commands from
the top level folder of the project. Maven processes top level POM and
the module POMs and after all POMs are processed, the reactor properly
sequences the modules and then builds each module.</p><p>When <code>mvn test</code> command is run, Maven first runs test phase for
extended-multi but as there are no source files in top level project,
phase executes without doing anything and then it complies and tests
shared and finally, the app module.</p><p>For command <code>mvn clean</code>, maven cleans all modules one by one.</p><p>When command <code>mvn clean install</code> is run from the top level folder, maven
compiles, tests and installs all modules - extended-multi (just the
pom.xml), shared (just the pom.xml), util, config and app - to the local
repository.</p><p>In the next tutorial, we explain inheritance which is useful to compact
the multi module POM.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>