<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Multiple Task and Tasks. In Gotz, we can define multiple task for tasks and also, multiple tasks are allowed in a job file."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Multiple Tasks - Gotz ETL - CodeTab","headline":"Multiple Tasks - Gotz ETL - CodeTab","url":"https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/","description":"Multiple Task and Tasks. In Gotz, we can define multiple task for tasks and also, multiple tasks are allowed in a job file.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-11T20:43:00+0530","dateModified":"2019-01-11T20:43:00+0530","wordCount":"426","keywords":["multiple task","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Multiple Tasks - Gotz ETL - CodeTab</title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Gotz ETL</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Gotz ETL - Gotz ETL - CodeTab"><div><a href=https://www.codetab.org/tutorial/gotz-etl/gotz-installation-quick-start/ class="toc-page text-wrap text-muted">Installation and Quick Start</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/bean-locator/ class="toc-page text-wrap text-muted">Bean and Locator</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/datadef-axis-member/ class="toc-page text-wrap text-muted">DataDef, Axis and Member</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/query-region-field/ class="toc-page text-wrap text-muted">Query, Region and Field</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/members-dynamic-query/ class="toc-page text-wrap text-muted">Members and Dynamic Query</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/indexrange-index/ class="toc-page text-wrap text-muted">IndexRange, Index and BreakAfter</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/filters/ class="toc-page text-wrap text-muted">Filters</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/namespace/ class="toc-page text-wrap text-muted">Namespace</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/tasks-steps/ class="toc-page text-wrap text-muted">Tasks and Steps</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/ class="toc-page text-wrap text-danger">Multiple Task and Tasks</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/converters/ class="toc-page text-wrap text-muted">Converters</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/persistence/ class="toc-page text-wrap text-muted">Persistence</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/appenders-encoders/ class="toc-page text-wrap text-muted">Appenders and Encoders</a></div><div><a href=https://www.codetab.org/tutorial/gotz-etl/split-definitions/ class="toc-page text-wrap text-muted">Split Definitions</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/&amp;text=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/&amp;t=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/&amp;title=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab%20https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/gotz-etl/multiple-task-tasks/&amp;title=Multiple%20Tasks%20-%20Gotz%20ETL%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><p>We can define multiple task for tasks and also, multiple tasks are
allowed in a job file.</p><p>The Example-1 scrapes Price data from acme-quote.html page while
Example-2 extracts Snapshot data from the same page. We can add these
two task within tasks element.</p><p>But before doing that let&rsquo;s introduce one more feature - <strong>steps
reference</strong> - which extracts steps into separate entity which can be
used by both tasks.</p><div>&nbsp;</div><div>&nbsp;</div><h2 id=steps-reference>Steps Reference</h2><p>In Example-6, steps is moved out of task element as a standalone element
under &lt;fields></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl><span class=nt>&lt;fields</span> <span class=na>name=</span><span class=s>&#34;locator&#34;</span> <span class=na>class=</span><span class=s>&#34;org.codetab.gotz.model.Locator&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns=</span><span class=s>&#34;http://codetab.org/xfields&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;steps</span> <span class=na>name=</span><span class=s>&#34;commonSteps&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;step</span> <span class=na>name=</span><span class=s>&#34;seeder&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>class=</span><span class=s>&#34;org.codetab.gotz.step.extract.LocatorSeeder&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;nextStep&gt;</span>loader<span class=nt>&lt;/nextStep&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/step&gt;</span>
</span></span><span class=line><span class=cl>    ....
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/steps&gt;</span>
</span></span></code></pre></div><p>By doing so we can refer the steps definition from multiple task.</p><h2 id=multiple-task>Multiple Task</h2><p>Next, to run multiple task - price and snapshot - on acme-quote.html we
define tasks as show below</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl><span class=nt>&lt;fields</span> <span class=na>name=</span><span class=s>&#34;locator&#34;</span> <span class=na>class=</span><span class=s>&#34;org.codetab.gotz.model.Locator&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns=</span><span class=s>&#34;http://codetab.org/xfields&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;steps</span> <span class=na>name=</span><span class=s>&#34;commonSteps&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        .... steps ....
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/steps&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;tasks</span> <span class=na>name=</span><span class=s>&#34;quote tasks&#34;</span> <span class=na>group=</span><span class=s>&#34;quote&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;task</span> <span class=na>name=</span><span class=s>&#34;snapshot task&#34;</span> <span class=na>dataDef=</span><span class=s>&#34;snapshot&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;steps</span> <span class=na>ref=</span><span class=s>&#34;commonSteps&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/task&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;task</span> <span class=na>name=</span><span class=s>&#34;price task&#34;</span> <span class=na>dataDef=</span><span class=s>&#34;price&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;steps</span> <span class=na>ref=</span><span class=s>&#34;commonSteps&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/task&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/tasks&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/fields&gt;</span>
</span></span></code></pre></div><p>The above snippet defines two task, first one applies snapshot dataDef
and second one price dataDef on locators of group quote i.e.
acme-quote.html page and both task use commonSteps through <strong>&lt;steps
ref=&ldquo;commonSteps&rdquo; /></strong></p><div>&nbsp;</div><div>&nbsp;</div><h2 id=multiple-tasks>Multiple tasks</h2><p>The Example-7 extends on previous one which executes multiple tasks on
multiple locators group. It scrapes price and snapshot data from
acme-quote.html and bs data from acme-bs.html. Relevant snippet from the
example is show below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl><span class=nt>&lt;locators</span> <span class=na>group=</span><span class=s>&#34;quote&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;locator</span> <span class=na>name=</span><span class=s>&#34;acme&#34;</span> <span class=na>url=</span><span class=s>&#34;/defs/examples/page/acme-quote.html&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/locators&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;locators</span> <span class=na>group=</span><span class=s>&#34;bs&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;locator</span> <span class=na>name=</span><span class=s>&#34;acme&#34;</span> <span class=na>url=</span><span class=s>&#34;/defs/examples/page/acme-bs.html&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/locators&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;fields</span> <span class=na>name=</span><span class=s>&#34;locator&#34;</span> <span class=na>class=</span><span class=s>&#34;org.codetab.gotz.model.Locator&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns=</span><span class=s>&#34;http://codetab.org/xfields&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;steps</span> <span class=na>name=</span><span class=s>&#34;commonSteps&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        .... steps ....
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/steps&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;tasks</span> <span class=na>name=</span><span class=s>&#34;quote tasks&#34;</span> <span class=na>group=</span><span class=s>&#34;quote&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;task</span> <span class=na>name=</span><span class=s>&#34;snapshot task&#34;</span> <span class=na>dataDef=</span><span class=s>&#34;snapshot&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;steps</span> <span class=na>ref=</span><span class=s>&#34;commonSteps&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/task&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;task</span> <span class=na>name=</span><span class=s>&#34;price task&#34;</span> <span class=na>dataDef=</span><span class=s>&#34;price&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;steps</span> <span class=na>ref=</span><span class=s>&#34;commonSteps&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/task&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/tasks&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;tasks</span> <span class=na>name=</span><span class=s>&#34;bs&#34;</span> <span class=na>group=</span><span class=s>&#34;bs&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;task</span> <span class=na>name=</span><span class=s>&#34;bs&#34;</span> <span class=na>dataDef=</span><span class=s>&#34;bs&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;steps</span> <span class=na>ref=</span><span class=s>&#34;commonSteps&#34;</span> <span class=nt>/&gt;</span>                    
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/task&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/tasks&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/fields&gt;</span>
</span></span></code></pre></div><p>It defines two locators group quote and bs and with corresponding tasks
one for group quote and another one for bs. The first tasks (group
quote) has two task - price and snapshot and second tasks (group bs) has
one tasks - bs.</p><p>In all, Gotz executes three task</p><ol><li>price task parses locator acme-quote.html with price dateDef.</li><li>snapshot task agian parses locator acme-quote.html with snapshot
dateDef.</li><li>bs task parses acme-bs.html with bs dateDef.</li></ol><p>Output of all the three tasks go to output/data.txt. But, there is a
problem in output data - the date for bs data is in MMM &lsquo;YY format and
database throws error when we try to push the data with DBAppender.</p><p>We need to apply converters to change format or adjust value etc., and
next chapter does exactly that.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>