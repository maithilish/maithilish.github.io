<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="WordPress Dropbox Backup - In this chapter of WordPress Tutorial, we setup Dropbox to receive backup files from OpenShift and then automate the process."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYHTHXW09H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYHTHXW09H")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Dropbox Backup - WordPress Tutorial - CodeTab","headline":"Dropbox Backup - WordPress Tutorial - CodeTab","url":"https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/","description":"WordPress Dropbox Backup - In this chapter of WordPress Tutorial, we setup Dropbox to receive backup files from OpenShift and then automate the process.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-11T04:44:00+0530","dateModified":"2019-01-11T04:44:00+0530","wordCount":"1066","keywords":["wordpress dropbox backup","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.b34f4a49e8fbf83dd7dd8f945eb35a939c19aa15051f677ac5a9c057ac6c8774.css integrity="sha256-s09KSej7+D3X3Y+UXrNak5wZqhUFH2d6xanAV6xsh3Q="><title>Dropbox Backup - WordPress Tutorial - CodeTab</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">WordPress Guide</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="WordPress Tutorial - CodeTab"><div><a href=https://www.codetab.org/tutorial/wordpress/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress/ class="toc-page text-wrap text-muted">About WordPress</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/openshift-wordpress/ class="toc-page text-wrap text-muted">OpenShift WordPress Tutorial</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-installation/ class="toc-page text-wrap text-muted">Installation</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-settings/ class="toc-page text-wrap text-muted">Settings</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-posts-vs-pages/ class="toc-page text-wrap text-muted">Posts Vs Pages</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-themes/ class="toc-page text-wrap text-muted">Themes</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-plugins/ class="toc-page text-wrap text-muted">Plugins</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-w3-total-cache id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>W3 Total Cache</a><div id=tutorial-wordpress-w3-total-cache class=collapse><a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/settings/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Settings
</a><a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/browser-cache/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Browser Cache
</a><a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/minify-settings/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Minify Settings
</a><a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/performance-analyze/ class="toc-page dropdown-item text-wrap text-muted">Performance Analyze</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-seo id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Search Engine Optimization</a><div id=tutorial-wordpress-seo class=collapse><a href=https://www.codetab.org/tutorial/wordpress/seo/seo-tips/ class="toc-page dropdown-item text-wrap text-muted">SEO Tips
</a><a href=https://www.codetab.org/tutorial/wordpress/seo/wordpress-seo-plugin/ class="toc-page dropdown-item text-wrap text-muted">SEO Plugin</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-webmaster-tools id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Web Master Tools</a><div id=tutorial-wordpress-webmaster-tools class=collapse><a href=https://www.codetab.org/tutorial/wordpress/webmaster-tools/google-analytics/ class="toc-page dropdown-item text-wrap text-muted">Google Analytics
</a><a href=https://www.codetab.org/tutorial/wordpress/webmaster-tools/google-webmaster-tools/ class="toc-page dropdown-item text-wrap text-muted">Google Webmaster Tools</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-import id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Import Static Site</a><div id=tutorial-wordpress-import class=collapse><a href=https://www.codetab.org/tutorial/wordpress/import/import-static-html-site/ class="toc-page dropdown-item text-wrap text-muted">Import Static HTML Site
</a><a href=https://www.codetab.org/tutorial/wordpress/import/child-theme/ class="toc-page dropdown-item text-wrap text-muted">Child Theme
</a><a href=https://www.codetab.org/tutorial/wordpress/import/dynamic-stylesheets/ class="toc-page dropdown-item text-wrap text-muted">Dynamic Stylesheets</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-backup id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Backup</a><div id=tutorial-wordpress-backup><a href=https://www.codetab.org/tutorial/wordpress/backup/wordpress-backup/ class="toc-page dropdown-item text-wrap text-muted">Backup
</a><a href=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/ class="toc-page dropdown-item text-wrap text-muted">Dropbox Backup
</a><a href=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/ class="toc-page dropdown-item text-wrap text-danger">Restore, Clone, Migrate</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-openshift id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>OpenShift Cloud</a><div id=tutorial-wordpress-openshift class=collapse><a href=https://www.codetab.org/tutorial/wordpress/openshift/install-source/ class="toc-page dropdown-item text-wrap text-muted">OpenShift WordPress Install Source
</a><a href=https://www.codetab.org/tutorial/wordpress/openshift/dns-setup/ class="toc-page dropdown-item text-wrap text-muted">OpenShift DNS Setup
</a><a href=https://www.codetab.org/tutorial/wordpress/openshift/rhc-client-tools/ class="toc-page dropdown-item text-wrap text-muted">OpenShift RHC Client Tools
</a><a href=https://www.codetab.org/tutorial/wordpress/openshift/linux-primer/ class="toc-page dropdown-item text-wrap text-muted">OpenShift Linux Primer</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-8><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/&amp;text=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/&amp;t=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/&amp;title=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab%20https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/&amp;title=Dropbox%20Backup%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h2 id=112wordpress-dropbox-backup>11.2. WordPress Dropbox Backup</h2><p>In the previous section, we backup the WordPress installation. In this
section, we setup Dropbox to receive files from OpenShift and then
automate the WordPress Dropbox Backup process.</p><h3 id=openshift-to-dropbox>OpenShift to Dropbox</h3><p>It makes sense to move the backup files out of OpenShift to Dropbox as
it serves two purposes - conserves storage space and in the unlikely
event of application corruption, we have a safe set in Dropbox.</p><p>The steps to connect WordPress to Dropbox are:</p><ul><li><p><strong>Create Dropbox App</strong>: Dropbox does not accept files sent directly,
and it only accept files handed over by a Dropbox App.</p></li><li><p><strong>Allow access to App</strong>: Allow access to the Dropbox App to receive
files from other systems. When access is allowed, App provides
authentication tokens and secrets.</p></li><li><p><strong>Send files to App</strong>: Using the authentication tokens, OpenShift
can send files to Dropbox App, which in turn puts the files in
Dropbox.</p></li></ul><p>Let&rsquo;s start with Dropbox App creation. Don&rsquo;t worry, it&rsquo;s quiet easy!
Log in to the Dropbox account and open the <a href=https://www.dropbox.com/developers/apps target=_blank>Dropbox App
Console</a>. In App console, click
<strong>Create app</strong>. Select following options:</p><ul><li><p>What type of app do you want to create - <strong>Dropbox API App</strong>.</p></li><li><p>What type of data does your app need to store on Dropbox - <strong>Files
and Datastore</strong>.</p></li><li><p>Can your app be limited to its own folder - <strong>Yes</strong></p></li></ul><p>In <strong>App Name</strong> field, enter a name for the app and click <strong>Create
app</strong>. Dropbox creates the app and displays the app details, where we
need to note down <strong>App Key</strong> and <strong>App Secret</strong>. We require these
values to authenticate from OpenShift in the next step. We can always
get these values from Dropbox App Console.</p><p>We need to run setup to link OpenShift to Dropbox. To setup, log in to
the OpenShift Shell through RHC or PuTTY (Windows users).</p><p>In OpenShift Shell, change directory to <code>app-root/data/backup</code>.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; cd app-root/data/backup
</code></pre><p>Run <code>dropbox-setup.sh</code> script.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; ./dropbox-setup.sh
</code></pre><p>Setup prompts for App Key and App Secret and on authentication, it
displays a Dropbox URL. Open the URL in the browser, which shows Dropbox
App Authorization screen. Click Allow access to complete the
authorization from Dropbox end.</p><p>Switch back to OpenShift Shell and press Enter to complete the setup.
Script saves the authorization tokens received from the Dropbox in a
file named .dropbox_auths. It is hidden file in backup directory and we
can use <code>cat .dropbox_auths</code> to display its contents. Setup is one time
affair and it allows us to send files to Dropbox without use of
passwords.</p><p>With the setup, OpenShift is ready to push files to Dropbox. For the
WordPress Dropbox backup, use the backup-to-dropbox.sh script.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; ./backup-to-dropbox.sh
</code></pre><p>Dropbox script is extended version of the previous script. It creates
the backup gzip file and pushes it to our Dropbox account. Dropbox App
creates a folder - Apps/&lt;dropbox-app-name> and save the file under it.
After uploading, script deletes the backup set from OpenShift to
conserve storage. In the screenshot, backup gzip file is in folder named
<code>WordPress Tutorial Backup</code> (Dropbox app name) under the <code>Apps</code> folder.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-dropbox-folder.png alt="WordPress Dropbox Backup - Dropbox Apps folder"></figure><h3 id=automate-wordpress-dropbox-backup>Automate WordPress Dropbox Backup</h3><p>To automate WordPress Dropbox Backup, we have to add Cron cartridge to
OpenShift and then add the backup script to the Cron folder.</p><div>&nbsp;</div><div>&nbsp;</div><p>We can use RHC or OpenShift Web Console to add a new cartridge to our
application. First, we need to know the full name of the Cron cartridge.
To list the available cartridges run:</p><pre tabindex=0><code class=language-screen data-lang=screen>C:&gt; rhc cartridges
</code></pre><p>From the list, we know name of the cartridge is cron-1.4. To add the
cartridge to the OpenShift application run:</p><pre tabindex=0><code class=language-screen data-lang=screen>C:&gt; rhc cartridge-add cron-1.4 --app quickstart
</code></pre><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-rhc-addcart.png alt="WordPress Dropbox Backup - RHC Add Cartridge - Cron"></figure><p>For monthly backup, we have to copy <code>backup-to-dropbox.sh</code> script to
<code>.openshift/cron/monthly</code> directory, which is in application deployment
directory usually <code>app-root/repo</code>. However, a direct copy to the
repository has a drawback.</p><p>OpenShift use Git software configuration management tool for application
deployment. Git keeps track of the deployments and allows us revert to
any previous versions. However, Git does not track the files copied
directly to the repository. To properly place the script file in Cron
folder, we have to go through following procedure.</p><p>In the command prompt, run following RHC command to find out the Git
repository URL.</p><pre tabindex=0><code class=language-screen data-lang=screen>C:&gt; rhc apps
</code></pre><p>From the output, copy the <strong>Git URL</strong> to clipboard. Next, we need to use
Git to download the application. We can also find out Git URL in
<strong>OpenShift Web Console</strong> → <strong>Applications</strong> → <strong>Application Overview</strong>
→ <strong>Source Code</strong>
field.</p><pre tabindex=0><code class=language-screen data-lang=screen>C:&gt; git clone ssh://xxeca20e8@quickstart-wordpressguide.rhcloud.com/~/git/quickstart.git/
</code></pre><p>Change the example URL to the real Git URL of the application. Git
clones (downloads) the WordPress application source code and save it to
a directory with the same name as the application. For application
<strong>quickstart</strong>, it clones the source to directory named <code>quickstart</code>. We
call this directory as cloned source directory.</p><p>Next we need to copy <code>backup-to-dropbox.sh</code> to <code>.openshift/cron/monthly</code>
in cloned directory. We need to download wordpress-tutorial-sample.zip
from <a href=../media/wordpress-tutorial-sample.zip>CodeTab Downloads</a> and
extract backup-to-dropbox.sh from it. and copy it to
.openshift/cron/monthly directory in cloned source directory.</p><p>Change to cloned source directory and run following commands. Replace
&lt;path-to> in copy command to the actual path of backup-to-dropbox.sh
script file.</p><pre tabindex=0><code class=language-screen data-lang=screen> Windows

C:&gt; copy &lt;path-to&gt;backup-to-dropbox.sh .openshiftcronmonthly


 Linux 

$ cp &lt;path-to&gt;/backup-to-dropbox.sh .openshift/cron/monthly
</code></pre><p>Next from the source directory, run</p><pre tabindex=0><code class=language-screen data-lang=screen>C:&gt; git status
</code></pre><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-dropbox-gitstatus.png alt="WordPress Dropbox Backup - WordPress application source git status"></figure><p>Git output indicates that it is yet to track the new file. Use Git add
action to add a file.</p><pre tabindex=0><code class=language-screen data-lang=screen> Windows 

C:&gt; git add .openshift/cron/monthly/backup-to-dropbox.sh
C:&gt; git update-index --chmod=+x .openshift/cron/monthly/backup-to-dropbox.sh

 Linux

$ chmod 755 .openshift/cron/monthly/backup-to-dropbox.sh
$ git add .openshift/cron/monthly/backup-to-dropbox.sh
</code></pre><p>Again check the <code>git status</code>, and it should show the file as added.
Next, commit the changes.</p><pre tabindex=0><code class=language-screen data-lang=screen>Windows

C:&gt; git commit -m &#34;Cron job - backup to dropbox added&#34;

Linux

$ git commit -m &#34;Cron job - backup to dropbox added&#34;
</code></pre><p>So far, the changes are applied to local repository that exists in our
PC. We need to send these changes to the Git Repository in OpenShift. To
do that,</p><pre tabindex=0><code class=language-screen data-lang=screen>Windows

C:&gt; git push

Linux

$ git push
</code></pre><p>Git pushes all the changes back to the repository in the server. As part
of deployment, Git also restarts our application and cartridges so that
changes becomes effective.</p><div>&nbsp;</div><div>&nbsp;</div><p>From hereon, Cron takes over and runs the backup script every month. For
CodeTab, we have set monthly backup as changes are less frequent.
Additionally, we run manual backup in the OpenShift shell whenever we
create new pages.</p><p>In the next section, we do a full WordPress restore from the backup set.</p></main></div></div><aside id=sidebar-right class=col-md-1><div class="row my-5 justify-content-center"></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script src=/js/vendor.min.53a9c8fc3cce9658f4d62a893cd70a0b064ffeb53a74a5c776889aea89eaf65a.js></script></body></html>