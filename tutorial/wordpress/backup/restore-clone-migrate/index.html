<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="In this chapter of WordPress Tutorial, we use backup for a full WordPress Restore and also clone it to a new site. WordPress Restore involves three steps."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-42139846-3")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Restore Clone Migrate - WordPress Tutorial - CodeTab","headline":"Restore Clone Migrate - WordPress Tutorial - CodeTab","url":"https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/","description":"In this chapter of WordPress Tutorial, we use backup for a full WordPress Restore and also clone it to a new site. WordPress Restore involves three steps.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-11T04:57:00+0530","dateModified":"2019-01-11T04:57:00+0530","wordCount":"1391","keywords":["wordpress restore","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Restore Clone Migrate - WordPress Tutorial - CodeTab</title></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">WordPress Guide</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="WordPress Tutorial - CodeTab"><div><a href=https://www.codetab.org/tutorial/wordpress/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress/ class="toc-page text-wrap text-muted">About WordPress</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/openshift-wordpress/ class="toc-page text-wrap text-muted">OpenShift WordPress Tutorial</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-installation/ class="toc-page text-wrap text-muted">Installation</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-settings/ class="toc-page text-wrap text-muted">Settings</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-posts-vs-pages/ class="toc-page text-wrap text-muted">Posts Vs Pages</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-themes/ class="toc-page text-wrap text-muted">Themes</a></div><div><a href=https://www.codetab.org/tutorial/wordpress/wordpress-plugins/ class="toc-page text-wrap text-muted">Plugins</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-w3-total-cache id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>W3 Total Cache</a><div id=tutorial-wordpress-w3-total-cache class=collapse><a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/settings/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Settings</a>
<a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/browser-cache/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Browser Cache</a>
<a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/minify-settings/ class="toc-page dropdown-item text-wrap text-muted">W3 Total Cache Minify Settings</a>
<a href=https://www.codetab.org/tutorial/wordpress/w3-total-cache/performance-analyze/ class="toc-page dropdown-item text-wrap text-muted">Performance Analyze</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-seo id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Search Engine Optimization</a><div id=tutorial-wordpress-seo class=collapse><a href=https://www.codetab.org/tutorial/wordpress/seo/seo-tips/ class="toc-page dropdown-item text-wrap text-muted">SEO Tips</a>
<a href=https://www.codetab.org/tutorial/wordpress/seo/wordpress-seo-plugin/ class="toc-page dropdown-item text-wrap text-muted">SEO Plugin</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-webmaster-tools id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Web Master Tools</a><div id=tutorial-wordpress-webmaster-tools class=collapse><a href=https://www.codetab.org/tutorial/wordpress/webmaster-tools/google-analytics/ class="toc-page dropdown-item text-wrap text-muted">Google Analytics</a>
<a href=https://www.codetab.org/tutorial/wordpress/webmaster-tools/google-webmaster-tools/ class="toc-page dropdown-item text-wrap text-muted">Google Webmaster Tools</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-import id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Import Static Site</a><div id=tutorial-wordpress-import class=collapse><a href=https://www.codetab.org/tutorial/wordpress/import/import-static-html-site/ class="toc-page dropdown-item text-wrap text-muted">Import Static HTML Site</a>
<a href=https://www.codetab.org/tutorial/wordpress/import/child-theme/ class="toc-page dropdown-item text-wrap text-muted">Child Theme</a>
<a href=https://www.codetab.org/tutorial/wordpress/import/dynamic-stylesheets/ class="toc-page dropdown-item text-wrap text-muted">Dynamic Stylesheets</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-backup id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Backup</a><div id=tutorial-wordpress-backup><a href=https://www.codetab.org/tutorial/wordpress/backup/wordpress-backup/ class="toc-page dropdown-item text-wrap text-muted">Backup</a>
<a href=https://www.codetab.org/tutorial/wordpress/backup/dropbox-backup/ class="toc-page dropdown-item text-wrap text-muted">Dropbox Backup</a>
<a href=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/ class="toc-page dropdown-item text-wrap text-danger">Restore, Clone, Migrate</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-openshift id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>OpenShift Cloud</a><div id=tutorial-wordpress-openshift class=collapse><a href=https://www.codetab.org/tutorial/wordpress/openshift/install-source/ class="toc-page dropdown-item text-wrap text-muted">OpenShift WordPress Install Source</a>
<a href=https://www.codetab.org/tutorial/wordpress/openshift/dns-setup/ class="toc-page dropdown-item text-wrap text-muted">OpenShift DNS Setup</a>
<a href=https://www.codetab.org/tutorial/wordpress/openshift/rhc-client-tools/ class="toc-page dropdown-item text-wrap text-muted">OpenShift RHC Client Tools</a>
<a href=https://www.codetab.org/tutorial/wordpress/openshift/linux-primer/ class="toc-page dropdown-item text-wrap text-muted">OpenShift Linux Primer</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/&amp;text=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/&amp;t=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/&amp;title=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab%20https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/wordpress/backup/restore-clone-migrate/&amp;title=Restore%20Clone%20Migrate%20-%20WordPress%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h2 id=113wordpress-restore-clone>11.3. WordPress Restore, Clone</h2><p>In the previous section, we saw how to offload the backup files to the
Dropbox. In this section, we use the backup for a full WordPress restore
and also to clone it to a new site and use it cloned site as testing or
staging area.</p><h3 id=wordpress-restore>WordPress Restore</h3><p>WordPress Restore procedure involves following steps:</p><ul><li><p>Create a new WordPress application on OpenShift.</p></li><li><p>Import MySQL dump to database.</p></li><li><p>Extract wp-content directories.</p></li></ul><p><strong>CLI</strong></p><p>To step through WordPress Restore procedure, we have to access OpenShift
Shell through RHC or PuTTY (for Windows users) and securely copy files
using SSH. <a href=/tutorial/wordpress/openshift/rhc-client-tools/>OpenShift RHC Client Tools</a> and <a href=/tutorial/wordpress/openshift/linux-primer/>OpenShift Linux Primer</a> explains the secure copy.</p><p>Create WordPress Application on OpenShift</p><p>When we do a WordPress Restore, it means, we already have an OpenShift
account with a WordPress application. To restore WordPress from the
backup, we have to use the same Public URL for the new WordPress
instance. WordPress Restore to a different URL is known as clone.</p><p>Delete the existing WordPress application to free up the public URL for
the new application.</p><pre tabindex=0><code class=language-screen data-lang=screen>Window and Linux

C:&gt; rhc app delete &lt;app-name&gt;
</code></pre><p>We can also delete the application through OpenShift Web Console. This
step is irreversible so delete the application only when there is a full
backup.</p><p>Next, create a new WordPress application as explained in <a href=/tutorial/wordpress/openshift-wordpress/>OpenShift WordPress</a>.
It is mandatory to use the same name as the deleted application. We
should also complete the installation of WordPress as explained in <a href=/tutorial/wordpress/wordpress-installation/>WordPress Installation</a>.
Once application creation and WordPress installation are complete, open
the WordPress dashboard to check whether site is up properly.</p><p>Usually for a fresh WordPress installation, we proceed to install themes
and plugins. However, for WordPress Restore there is no need to install
theme and plugins as these components comes from the backup.</p><p>Download Backup file</p><p>We can download the backup file from Dropbox directly to the OpenShift
server. To do that, we need the URL of the backup file.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-dropbox-sharelink.png alt="WordPress Restore Clone Migrate - Dropbox Share Link"></figure><p>Log in to Dropbox and navigate to the folder which has the backup gzip
file. Select the latest backup file and click on <strong>Share Link</strong> menu to
open the sharing window in a new tab. In the popup, click <strong>Get Link</strong>
to copy the file&rsquo;s URL to clipboard.</p><p>Next, log in to OpenShift Shell. Windows users use PuTTY or RHC.</p><pre tabindex=0><code class=language-screen data-lang=screen>$ rhc ssh quickstart
</code></pre><p>In OpenShift Shell, change directory to <code>app-root/data</code>.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; cd app-root/data
</code></pre><p>Download the backup file from Dropbox using wget command. Replace the
URL shown in the command with the actual URL copied to
clipboard.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; wget https://www.dropbox.com/s/5tpxxxxp2w/quickstart-wordpress-backup-2014-06-11.tar.gz
</code></pre><p>WGet downloads the backup file
quickstart-wordpress-backup-2014-06-11.tar.gz from the Dropbox and saves
in <code>app-root/data</code> directory.</p><div>&nbsp;</div><div>&nbsp;</div><p>Extract WP-Content folders</p><p>Using tar command, we extract the contents of the backup archive.
Replace the example file name shown in command with the real file name.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; tar -xzvf quickstart-wordpress-backup-2014-06-11.tar.gz
</code></pre><p>Backup file extracts to three folders - themes, plugins and uploads and
one SQL file. Extracted folder contains the plugins, themes and media
files from the backup WordPress installation.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-dropbox-extractedfiles.png alt="WordPress Restore Clone Migrate - OpenShift - app-root/data files listing"></figure><p>At this point, when we open the dashboard, these items are yet to show
up in the admin menu. Reason being; WordPress stores plugins, themes,
and media file metadata in MySQL database table, and we are yet to
import database.</p><p>Import MySQL Tables</p><p>Among the extracted files, we also find a SQL file that contains
database of WordPress installation.</p><p>To import SQL file, use <code>mysql</code>
command.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; mysql --password=$OPENSHIFT_MYSQL_DB_PASSWORD -u $OPENSHIFT_MYSQL_DB_USERNAME -S $OPENSHIFT_MYSQL_DB_SOCKET $OPENSHIFT_APP_NAME &lt; quickstart-2014-06-11.sql
</code></pre><p>Replace the example filename quickstart-2014-06-11.sql with the real SQL
file name. SQL import drops all the tables in database and recreates
tables with data from our old WordPress site.</p><p>With that, we finished the WordPress Restore. Restart the application
through OpenShift Web Console or RHC. Open the WordPress and check the
contents. It should contain all posts, pages, themes, plugins and media
from the old site.</p><p><strong>W3 Total Cache</strong></p><p>W3 Total Cache Plugin creates some files outside the standard
<code>wp-content/plugins</code> directory. Moreover, it also hard codes WordPress
installation&rsquo;s absolute path in some PHP files. In OpenShift, the
absolute path contains the application UUID and it changes when we
restore the WordPress to a new application. Even though we can edit
certain files and bring up W3, it is safer - and also easier - to delete
the W3 Plugin, reinstall and setup as explained in <a href=/tutorial/wordpress/w3-total-cache/settings/>WordPress W3 Total Cache</a></p><p><strong>Remove uploaded files</strong></p><p>Once we are finished with the WordPress Restore, remember to delete
backup files from the data directory to conserve storage space.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; cd app-root/data
&gt; rm *.gz 
&gt; rm *.sql
</code></pre><h3 id=clone-wordpress-site>Clone WordPress Site</h3><p>To try out new themes or plugins or troubleshoot some issues in a live
site is always a risky proposition. We would rather prefer to do these
activities in the testing site. Clone creates a new WordPress site with
the same content as the original but with a different URL. Cloned site
comes handy to test version upgrades.</p><p>To clone WordPress, create a new WordPress application with a different
name as explained in <a href=/tutorial/wordpress/openshift-wordpress/>OpenShift WordPress</a>. We should also complete the installation of WordPress as explained in <a href=/tutorial/wordpress/wordpress-installation/>WordPress Installation</a>.</p><p>All other steps are same as that of Restore explained in the last
section, except we need to modify site URL in SQL file before importing.
To summarize, steps to clone are:</p><ul><li><p>Create a new WordPress application in OpenShift, with a different
name. Complete the WordPress installation.</p></li><li><p>Download backup archive file to OpenShift <code>app-root/data</code> directory
and extract it.</p></li><li><p>In the extracted SQL file, replace all occurrences of the original
site URL with clone site (new site) URL. We explain this in detail
in the next para.</p></li><li><p>Import modified SQL file to MySQL database.</p></li></ul><p>Modify SQL file</p><p>We use a <code>Sed</code> command to replace matching strings in the file. Execute
the following command to replace all occurrences of the original site
URL with a new site (clone site) URL in extracted SQL file. In the next
command, replace &lt;orginal url> and &lt;new url> with Public URL of your
existing and new WordPress applications.</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; sed -i &#39;#&lt;original url&gt;#&lt;new url&gt;#g&#39; &lt;SQL File Name&gt;
</code></pre><p>For example, if your original WordPress application is
travel-xyz.rhcloud.com and URL of the new site is test-xyz.rhcloud.com,
then command would be</p><pre tabindex=0><code class=language-screen data-lang=screen>&gt; cat *.sql | grep -o &#34;http://travel-xyz.rhcloud.com&#34; | wc -l

&gt; sed -i &#39;#http://travel-xyz.rhcloud.com#http://test-xyz.rhcloud.com#g&#39; quickstart-2014-06-11.sql

&gt; cat *.sql | grep -o &#34;http://test-xyz.rhcloud.com&#34; | wc -l
</code></pre><p>Import the SQL file to MySQL database as already explained in the
Restore section. We check whether number of URL are same before and
after modification with <code>cat</code> commands. URL modification is essential
otherwise whenever we click an internal link in cloned site, it takes us
to the original site!</p><p>Next, open the General Settings of cloned site and change Site Name so
that we know that we are working on cloned site. We also need to
discourage search engines from indexing our cloned site, and we do this
by changing settings in <strong>Settings</strong> → <strong>Reading</strong>.</p><p>With that, our cloned WordPress site is ready for use as testing or
staging site.</p><div>&nbsp;</div><div>&nbsp;</div><h3 id=wordpress-version-upgrade>WordPress Version upgrade</h3><p>Apart from trying out new Plugins and Themes, a WordPress testing site
is also useful to test version upgrade of WordPress core, Plugins, and
Themes.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress/media/wp-restore-updates.png alt="WordPress Restore Clone Migrate - WordPress Updates Notification"></figure><p>WordPress periodically checks for updates to its core, plugins and
themes. When there are updates available, WordPress Dashboard displays a
notification in Updates menu and also in the Admin bar.</p><p>When there are updates, open WordPress Updates screen using
<strong>Dashboard</strong> → <strong>Updates</strong>, which shows updates in three blocks -
WordPress Core, Plugins and Themes. Select items one by one and apply
the update and verify the site functionality after each update. After
some updates, we may have to restart WordPress application through
OpenShift Web console.</p><p><strong>Blank screens !</strong></p><p>WordPress may display a blank screen after an update. Before trying out
any other thing, always restart the OpenShift WordPress application
through OpenShift Web Console.</p><p>After a successful upgrade of the test site, we can go ahead and upgrade
the live site. Usually, WordPress core and also the leading themes and
plugins upgrades are stable and upgrade goes without any hitch. Still,
we always prefer to test them rather than to face some nasty surprises
in the live site.</p><p>Though out the tutorial we used WordPress that is bundled as <strong>OpenShift
Instant App</strong>. In the next chapter, we describe WordPress Installation
from the source.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>