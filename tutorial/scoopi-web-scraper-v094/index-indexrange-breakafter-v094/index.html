<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="Scoopi web scraper can extract set of data without using multiple queries with the features such as index, indexRange and BreakAfter.">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/www.codetab.org\/"
        },
        "articleSection" : "tutorial",
        "name" : "Index BreakAfter - Scoopi Web Scraper - CodeTab",
        "headline" : "Index BreakAfter - Scoopi Web Scraper - CodeTab",
        "description" : "Scoopi web scraper can extract set of data without using multiple queries with the features such as index, indexRange and BreakAfter.",
        "inLanguage" : "en",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": "Maithilish",
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-12T03:23:00+0530",
        "dateModified" : "2019-01-12T03:23:00+0530",
        "url" : "\/tutorial\/scoopi-web-scraper-v094\/index-indexrange-breakafter-v094\/",
        "wordCount" : "666",
        "keywords" : [ "indexRange","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.5094155807f5e8e42efd4efe08a15d3c51025b1e28787bdea850902bf7650261.css" integrity="sha256-UJQVWAf16OQu/U7&#43;CKFdPFECWx4oeHveqFCQK/dlAmE=">

<title>Index BreakAfter - Scoopi Web Scraper - CodeTab</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>
  <div class="row">
    <aside id="sidebar" class="col-md-4">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">

    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">Scoopi Web Scraper</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="Scoopi Web Scraper V094">
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/introduction/"
            class="toc-page text-muted ">
            Introduction
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/installation-quick-start-v094/"
            class="toc-page text-muted ">
            Installation and Quick Start
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/definition-file-v094/"
            class="toc-page text-muted ">
            Definition File
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/datadef-v094/"
            class="toc-page text-muted ">
            DataDef
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/selector-v094/"
            class="toc-page text-muted ">
            Selector
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/members-v094/"
            class="toc-page text-muted ">
            Members
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/"
            class="toc-page text-danger ">
            Index, IndexRange and BreakAfter
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/filters-v094/"
            class="toc-page text-muted ">
            Filters
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/multiple-tasks-v094/"
            class="toc-page text-muted ">
            Multiple Tasks
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/steps-and-plugins-v094/"
            class="toc-page text-muted ">
            Steps and Plugins
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/converters-v094/"
            class="toc-page text-muted ">
            Converters
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/create-locators-links-v094/"
            class="toc-page text-muted ">
            Create Locators from Links
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/persistence-v094/"
            class="toc-page text-muted ">
            Persistence
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/appender-and-encoder-v094/"
            class="toc-page text-muted ">
            Appender and Encoder
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/split-definitions-v094/"
            class="toc-page text-muted ">
            Split Definitions
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/logs-v094/"
            class="toc-page text-muted ">
            Logs
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/dashboard-v094/"
            class="toc-page text-muted ">
            Dashboard
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/scoopi-web-scraper-v094/db-setup-v094/"
            class="toc-page text-muted ">
            DB Setup
        </a>
    </div>
    
</div>






                
            </div>
        </div>
    </nav>

</nav>

</div>
      <div class="row my-5 justify-content-center">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>
    <div id="contentbar" class="col-md-8">
      <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/&amp;text=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/&amp;t=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/&amp;title=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab%20https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/&amp;title=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/scoopi-web-scraper-v094/index-indexrange-breakafter-v094/&amp;title=Index%20BreakAfter%20-%20Scoopi%20Web%20Scraper%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
      <div class="row">
        <main id="content" class="col-md-11 post-basic">
          

<h1 id="index-indexrange-and-breakafter">Index, IndexRange and BreakAfter</h1>

<p>This chapter explains the use of index, indexRange and breakAfter to
extract set of data without using multiple queries.</p>

<p>The
<a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/jsoup/ex-3/job.yml" target="_blank">Example 3</a>
extracts multiple data from
<a href="https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/page/acme-bs.html" target="_blank">defs/examples/page/acme-bs.html</a>
page, which contains Balance Sheet data of Acme for past five years in a
HTML table with 27 rows and 5 columns. The partial contents of the table
is shown
below.</p>

<table>
<thead>
<tr>
<th>Item</th>
<th>Dec &lsquo;16</th>
<th>Dec &lsquo;15</th>
<th>Dec &lsquo;14</th>
<th>Dec &lsquo;13</th>
<th>Dec &lsquo;12</th>
</tr>
</thead>

<tbody>
<tr>
<td>Total Share Capital</td>
<td>804.72</td>
<td>801.55</td>
<td>795.32</td>
<td>790.18</td>
<td>781.84</td>
</tr>

<tr>
<td>Reserves</td>
<td>32,071.87</td>
<td>29,881.73</td>
<td>25,414.29</td>
<td>21,444.92</td>
<td>17,957.00</td>
</tr>

<tr>
<td>&hellip;. 25 more rows &hellip;.</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>The datadef to extract data from the table is specified in
<code>defs/examples/jsoup/ex-3/job.xml</code> which extracts three rows of data for
the first column (Dec 2016). DataDef is as below</p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">bs:
  axis:
    fact:
      query:
        region: &#34;table:contains(Sources Of Funds)&#34;  
        field: &#34;tr:nth-child(%{row.index}) &gt; td:nth-child(%{col.index})&#34; 
    col:
      query:
        region: &#34;table:contains(Sources Of Funds)&#34;
        field: &#34;tr:nth-child(1) &gt; td:nth-child(%{col.index})&#34;        
      members: &lt;a href=&#34;https://github.com/maithilish/scoopi/blob/master/src/main/resources/defs/examples/jsoup/ex-4/job.yml&#34; target=&#34;_blank&#34;&gt; 
        member: {name: year, index: 2},
      ]  
    row:
      query:
        region: &#34;table:contains(Sources Of Funds)&#34;
        field: &#34;tr:nth-child(%{row.index}) &gt; td:nth-child(1)&#34;      
      members: [ 
        member: {name: item, indexRange: 7-9 },
    ]</code></pre></div>
<p>Index can be specified in two ways - <em>index</em> or <em>indexRange</em>. The above
dataDef uses index in col axis and indexRange in row axis.</p>

<p>The col axis uses index property in member element with the index value
of 2. The query selector td:nth-child(%{col.index}) uses substitution
variable %{col.index} which is replaced by index value 2 and content of
second &lt;td&gt; whose value <em>Dec &lsquo;16</em> is returned by the selector for each
row.</p>

<p>The row axis member uses indexRange</p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">member: {name: item, indexRange: 7-9 }</code></pre></div>
<p>For its selector, tr:nth-child(%{row.index}) &gt; td:nth-child(1), parser
internally creates 3 members and allots index 6, 7 and 8 respectively.</p>

<p>The Fact axis selector uses both the col and row indexes</p>

<pre><code>tr:nth-child(%{row.index}) &gt;  td:nth-child(%{col.index})
</code></pre>

<p>The selector for three members after variables are substituted is as
follows (index value is shown inside the [ ])</p>

<p>Member 1</p>

<pre><code>col [2] : tr:nth-child(1) &gt; td:nth-child(2)
row [6] : tr:nth-child(6) &gt; td:nth-child(1)
fact [] :  tr:nth-child(6) &gt;  td:nth-child(2)
</code></pre>

<p>Member 2</p>

<pre><code>col [2] : tr:nth-child(1) &gt; td:nth-child(2)
row [7] : tr:nth-child(7) &gt; td:nth-child(1)
fact []:  tr:nth-child(7) &gt;  td:nth-child(2)
</code></pre>

<p>Member 3</p>

<pre><code>col [2] : tr:nth-child(1) &gt; td:nth-child(2)
row [8] : tr:nth-child(8) &gt; td:nth-child(1)
fact []:  tr:nth-child(8) &gt;  td:nth-child(2)
</code></pre>

<h3 id="get-all-data-from-table">Get all data from table</h3>

<p>To get all data for one year, change the indexRange of row axis from 7-9
to 7-39 and run Scoopi. The output data should have 33 rows of data for
the one year i.e. Dec 2016.</p>

<p>Next, in col axis, change index property to indexRange: 2-6. Now, run
Scoopi and you should have about 198 rows of data in output. We leave
these as exercise.</p>

<h2 id="breakafter">BreakAfter</h2>

<p>In the previous example, finding indexRange for col was easy because of
limited number of columns, but for row axis it was tedious.</p>

<p>The <em>breakAfter</em> feature comes handy when rows or columns are more or
when in-between data grows or contracts.</p>

<p>The job.xml file of next example,
[Example 4</a>
is same as the previous example, but in row axis, it uses breakAfter
along with index instead of IndexRange.</p>
<div class="highlight"><pre class="chroma"><code class="language-raw" data-lang="raw">row:
  query:
    region: &#34;table:contains(Sources Of Funds)&#34;
    field: &#34;tr:nth-child(%{row.index}) &gt; td:nth-child(1)&#34;      
  members: [ 
    member: {name: item, index: 5, breakAfter: [&#34;Book Value (Rs)&#34;] },
  ]</code></pre></div>
<p>Member begins with index 5 and iterates until selector returns &ldquo;Book
Value&rdquo; and outputs full set of Balance sheet data. In case, index
property is not set then index begins with 1.</p>

<p>The breakAfter is also useful when first and last item is constant and
in-between rows or cols shrinks or expands. Using breakAfter, we can
scrape all data between them without bothering about the index. Note
that breakAfter is array and we can define multiple items and iteration
breaks as such any one is matched.</p>

<p>If we go through the output of Example-4, we see a lot of unwanted data
such as sub-headings, texts such as &ldquo;12 months&rdquo;, nulls and blanks etc.,
and this is a common problem when dealing with unstructured sources. To
handle this, Scoopi allows us to define filters and the next chapter
covers it.</p>

        </main>
        <aside id="sidebar-right" class="col-md-1">
        </aside>
      </div>
    </div>
  </div>
</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js"></script>
</body>

</html>