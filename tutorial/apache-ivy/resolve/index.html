<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Apache Ivy Resolve task resolve dependencies set in ivy.xml and fetches resolved dependencies into the Apache Ivy cache."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-42139846-3');</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Resolve - Apache Ivy Tutorial - CodeTab","headline":"Resolve - Apache Ivy Tutorial - CodeTab","url":"https://www.codetab.org/tutorial/apache-ivy/resolve/","description":"Apache Ivy Resolve task resolve dependencies set in ivy.xml and fetches resolved dependencies into the Apache Ivy cache.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-10T22:06:00+0530","dateModified":"2019-01-10T22:06:00+0530","wordCount":"975","keywords":["apache ivy resolve","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.e7fd2d89f73c680873529a110a9007503a1bda864a3a3a6c53c4eb02a54c35eb.css integrity="sha256-5/0tifc8aAhzUpoRCpAHUDob2oZKOjpsU8TrAqVMNes="><title>Resolve - Apache Ivy Tutorial - CodeTab</title></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Apache Ivy Guide</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Apache Ivy Tutorial - Apache Ivy Tutorial - CodeTab"><div><a href=https://www.codetab.org/tutorial/apache-ivy/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/installation/ class="toc-page text-wrap text-muted">Installation</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/ant-tasks/ class="toc-page text-wrap text-muted">Ant Tasks</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/resolve/ class="toc-page text-wrap text-danger">Resolve</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/cachepath-retrieve/ class="toc-page text-wrap text-muted">Cachepath and Retrieve</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/pattern/ class="toc-page text-wrap text-muted">Pattern</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/repository-resolvers/ class="toc-page text-wrap text-muted">Resolvers and Repository</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/install-task-local-repository/ class="toc-page text-wrap text-muted">Install Task and Local Repositories</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/shared-repository/ class="toc-page text-wrap text-muted">Shared Repository</a></div><div><a href=https://www.codetab.org/tutorial/apache-ivy/publish/ class="toc-page text-wrap text-muted">Publish</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-apache-ivy-ivyde id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Eclipse Ivy Plugin</a><div id=tutorial-apache-ivy-ivyde class=collapse><a href=https://www.codetab.org/tutorial/apache-ivy/ivyde/eclipse-ivyde-plugin-resolve/ class="toc-page dropdown-item text-wrap text-muted">IvyDE Plugin for Eclipse</a>
<a href=https://www.codetab.org/tutorial/apache-ivy/ivyde/ivyde-settings-retrieve/ class="toc-page dropdown-item text-wrap text-muted">IvyDE Settings and Retrieve</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-7><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/apache-ivy/resolve/&text=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/apache-ivy/resolve/&t=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/apache-ivy/resolve/&title=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab&body=https://www.codetab.org/tutorial/apache-ivy/resolve/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab%20https://www.codetab.org/tutorial/apache-ivy/resolve/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/apache-ivy/resolve/&title=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><div title=weibo><a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/apache-ivy/resolve/&title=Resolve%20-%20Apache%20Ivy%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-weibo text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><p>Resolve task, resolve dependencies described in ivy.xml and places the
resolved dependencies in the Apache Ivy cache.</p><p>Let&rsquo;s go through a sample project to understand this important concept.
First, create a directory tree for package <code>in.ex.ivy</code> in the work dir</p><pre><code class=language-screen data-lang=screen>mkdir -p src/in/ex/ivy
</code></pre><p>Add following class file to <code>src/in/ex/ivy</code>.</p><p><code>Example.java</code></p><div class=highlight><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>in.ex.ivy</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.apache.commons.lang.StringUtils</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example</span> <span class=o>{</span>
      <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>String</span> <span class=n>string</span> <span class=o>=</span> <span class=n>StringUtils</span><span class=o>.</span><span class=na>upperCase</span><span class=o>(</span><span class=s>&#34;Ivy Beginner Guide&#34;</span><span class=o>);</span>
            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>string</span><span class=o>);</span>
      <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>Example class depends on Apache Commons module <strong>commons-lang</strong> and
let&rsquo;s delegate the Dependency management to Apache Ivy.</p><p>Add a file named <code>ivy.xml</code> to the work dir.</p><p><code>ivy.xml</code></p><div class=highlight><pre class=chroma><code class=language-XML data-lang=XML><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&gt;</span>
<span class=nt>&lt;ivy-module</span> <span class=na>version=</span><span class=s>&#34;2.0&#34;</span>
 <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
 <span class=na>xsi:noNamespaceSchemaLocation=</span><span class=s>&#34;http://ant.apache.org/ivy/schemas/ivy.xsd&#34;</span><span class=nt>&gt;</span>
 <span class=nt>&lt;info</span> <span class=na>organisation=</span><span class=s>&#34;in.ex&#34;</span> <span class=na>module=</span><span class=s>&#34;ivy-example&#34;</span> <span class=na>status=</span><span class=s>&#34;integration&#34;</span><span class=nt>&gt;</span>
 <span class=nt>&lt;/info&gt;</span>
 <span class=nt>&lt;dependencies&gt;</span>
  <span class=nt>&lt;dependency</span> <span class=na>org=</span><span class=s>&#34;commons-lang&#34;</span> <span class=na>name=</span><span class=s>&#34;commons-lang&#34;</span> <span class=na>rev=</span><span class=s>&#34;2.6&#34;</span> <span class=nt>/&gt;</span>
 <span class=nt>&lt;/dependencies&gt;</span>
<span class=nt>&lt;/ivy-module&gt;</span>
</code></pre></div><p>Ivy reads this file and manage the dependencies. It provides info about
the sample project and its dependencies and has 3 sections</p><ol><li><p>ivy-module : this is a standard root element with version,schema
etc.</p></li><li><p>info : this section is information about the project.</p><ul><li><p>organisation : organisation or company.</p></li><li><p>module : name of the project</p></li><li><p>status : release status – milestone, integration or release.</p></li></ul></li><li><p>dependencies : one or more dependencies for this project.</p><ul><li><p>dependency :</p><ul><li><p>org : organisation which provides the module</p></li><li><p>name : module name</p></li><li><p>rev : revision or version of the module</p></li></ul></li></ul></li></ol><p>To sum up, in ivy.xml we are indicating that our project is dependent on
commons-lang revision 2.6.</p><p>To run the Apache Ivy in command line mode, we depend on Apache Ant. Add
Ant build file <code>build.xml</code> to the work
dir.</p><p><code>build.xml</code></p><div class=highlight><pre class=chroma><code class=language-XML data-lang=XML><span class=nt>&lt;project</span> <span class=na>name=</span><span class=s>&#34;ivy example&#34;</span> <span class=na>default=</span><span class=s>&#34;resolve&#34;</span> <span class=na>xmlns:ivy=</span><span class=s>&#34;antlib:org.apache.ivy.ant&#34;</span><span class=nt>&gt;</span>
 <span class=nt>&lt;target</span> <span class=na>name=</span><span class=s>&#34;resolve&#34;</span> <span class=na>description=</span><span class=s>&#34;resolve dependencies with ivy&#34;</span><span class=nt>&gt;</span>
  <span class=nt>&lt;ivy:resolve</span> <span class=nt>/&gt;</span>
 <span class=nt>&lt;/target&gt;</span>
<span class=nt>&lt;/project&gt;</span>
</code></pre></div><p>In the project element we add Ivy namespace, so that Apache Ivy Ant
Tasks are visible to Ant during the build. Resolve task is defined
through &lt;ivy:resolve /> within target element. When Ant encounters
this element, it calls Apache Ivy Resolve task which resolves the
dependencies described in <code>ivy.xml</code> and places the resolved dependencies
in its cache.</p><p>That completes the Apache Ivy and Ant configuration. Next, run Ant from
work directory.</p><pre><code class=language-screen data-lang=screen>ant
</code></pre><p>Apache Ivy gets into the job of resolving the dependencies we mentioned
in ivy.xml. If you are connected to the Internet, Ivy fetches the
commons-lang 2.6 from a public repository in Internet and places them in
the cache.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/apache-ivy/media/console.png alt="Ivy Resolve Task"></figure><p><strong>Figure 3.1. Resolve output</strong></p><p>Console output shows the status of Resolve.</p><ul><li><p>conf - ivy is using default configuration</p></li><li><p>module - as indicated by number and dwnlded columns, one module is
resolved and downloaded.</p></li><li><p>artifacts - as indicated by the columns under artifacts, module
contains 3 artifacts, i.e. jar, source and javadoc and Ivy has
downloaded those three artifacts.</p></li></ul><p>In this example, we have not specified the location where Ivy has to
look for the modules. But how come Ivy is able to complete the task. In
the absence of specific settings, Apache Ivy falls back on default
settings that comes bundled with it. For a repository location, it uses
a concept known as Resolver and <strong>default public resolver</strong> points to
<strong><a href=http://repo1.maven.org/maven2>http://repo1.maven.org/maven2</a></strong>. This default setting enabled Ivy to
resolve and fetch the module.</p><p>In case a module itself has other dependencies, then Ivy will fetch all
required dependencies. These are known as transitive dependencies. For
example, log4j depends on other modules like javax.mail, junit,
jermanio.spec and oro etc., Dependency line &lt;dependency org=&ldquo;log4j&rdquo;
name=&ldquo;log4j&rdquo; rev=&ldquo;1.2.16&rdquo;/> will download log4j plus four dependent
modules. By adding <strong>transitive=&ldquo;false&rdquo;</strong> to dependency line, we can
force the Ivy not to download the other transitive dependencies.
Dependency line &lt;dependency org=&ldquo;log4j&rdquo; name=&ldquo;log4j&rdquo; rev=&ldquo;1.2.16&rdquo;
transitive=&ldquo;false&rdquo; /> downloads just log4j.</p><div>&nbsp;</div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1281079745125126 data-ad-slot=6135368983></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div>&nbsp;</div><p>Ivy dependency line</p><p>The dependency line &lt;dependency org=&ldquo;commons-lang&rdquo; name=&ldquo;commons-lang&rdquo;
rev=&ldquo;2.6&rdquo; /> in ivy.xml requires some explanation. First is how to
construct this line. When module developers publish the modules to
public repositories they define these values and from these repositories
we can easily get the details. As an example, let&rsquo;s find out the
dependency line for the module, commons-lang, from the repository.</p><p>Go to MVN Repository at <a href=http://mvnrepository.com/>http://mvnrepository.com/</a> and search for
commons-lang which yields all matching commons module. From the list,
select commons-lang which displays the commons-lang versions available
in the repository.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/apache-ivy/media/mvn1.png alt="Ivy Resolve Task - Dependency element"></figure><p><strong>Figure 3.2. Module versions</strong></p><p>Click on 2.5 or whatever version you are interested. Repositories hosts
modules for Ivy and also other build systems like maven, grape etc.
Select Ivy tab and there you will have the exact dependency line for
Apache Ivy. Cut and paste this line to ivy.xml</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/apache-ivy/media/mvn2.png alt="Ivy Resolve Task - dependency element"></figure><p><strong>Figure 3.3. Ivy Dependency element</strong></p><p>Another thing about this particular dependency line is that the <strong>org</strong>
is mentioned as commons-lang whereas it should have been <strong>apache.org</strong>.
For some reasons, while publishing the module to the repository,
developer (or build guy) has mentioned it as commons-lang instead of
apache.org and so it is continuing like that. Instead of guessing, it is
always easy to do a search in maven repository and copy the dependency
line as provided there.</p><p><strong>Clean the Work Dir</strong></p><p>Before trying out the next example, delete all files from work dir,
except src dir, to avoid errors and confusion. We require src dir which
contains the example class to run some examples and so, don&rsquo;t delete
that.</p><div>&nbsp;</div><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1281079745125126 data-ad-slot=6135368983></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div>&nbsp;</div><p>Apache Ivy Cache</p><p>On first run, &lt;ivy:resolve> fetches the artifacts from the public
repository and place them in the cache. During subsequent calls to
&lt;ivy:resolve> either from this project or any other project, Ivy finds
the module in cache and will not download it from public repository.
Through the cache, Ivy speeds up the time required for resolve and also
saves bandwidth usage. By default, Apache Ivy cache is at <code>$HOME/.ivy2</code>.
Beyond that, we need not bother much about the internals of the cache.</p><p>With the &lt;ivy:resolve>, we are able to resolve the dependencies and
place them in the cache and the next chapter covers tasks to expose the
resolved artifacts to the project.</p></main></div></div><aside id=sidebar-right class=col-md-2><div class="row my-5 justify-content-center border"><div>&nbsp;</div><ins class=adsbygoogle style=display:inline-block;width:160px;height:600px data-ad-client=ca-pub-1281079745125126 data-ad-slot=8963022093></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div>&nbsp;</div></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script src=/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js></script></body></html>