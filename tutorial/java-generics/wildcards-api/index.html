<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="Java library API extensively use wildcard bounds and it is essential to understand it clearly"><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYHTHXW09H"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYHTHXW09H")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Java Generics Wildcards in API - CodeTab","headline":"Java Generics Wildcards in API - CodeTab","url":"https://www.codetab.org/tutorial/java-generics/wildcards-api/","description":"Java library API extensively use wildcard bounds and it is essential to understand it clearly","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-11-01T12:32:00+0530","dateModified":"2019-11-01T12:32:00+0530","wordCount":"1113","keywords":["java generics bounded wildcards api tutorial","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.36dba173dca94f4b9fca7c6a1c3d15560f7a96c6ab0c0042dcd000f8469a9dc1.css integrity="sha256-Ntuhc9ypT0ufynxqHD0VVg96lsarDABC3NAA+EaancE="><title>Java Generics Wildcards in API - CodeTab</title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">Java Generics Tutorial</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="Java Generics Tutorial - CodeTab"><div><a href=https://www.codetab.org/tutorial/java-generics/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/subtype/ class="toc-page text-wrap text-muted">Subtypes</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/wildcards/ class="toc-page text-wrap text-muted">Wildcards</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/bounded-wildcards/ class="toc-page text-wrap text-muted">Bounded Wildcards</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/wildcards-api/ class="toc-page text-wrap text-danger">Wildcards in API</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/type-parameter-bounds/ class="toc-page text-wrap text-muted">Type Parameter Bounds</a></div><div><a href=https://www.codetab.org/tutorial/java-generics/design/ class="toc-page text-wrap text-muted">Guidelines</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-8><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/java-generics/wildcards-api/&amp;text=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/java-generics/wildcards-api/&amp;t=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/java-generics/wildcards-api/&amp;title=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/java-generics/wildcards-api/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab%20https://www.codetab.org/tutorial/java-generics/wildcards-api/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/java-generics/wildcards-api/&amp;title=Java%20Generics%20Wildcards%20in%20API%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><p>The previous tutorial covered wildcard bounds, producers, consumers and how they work with get and put methods; this tutorial explorers wildcard bounds in Java API.</p><p>Following class hierarchy is used in explanation:</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/java-generics/media/generics-class-hierarchy.png alt="Java Generics Bounded Wildcard"></figure><h1 id=wildcard-bounds-in-java-api>Wildcard bounds in Java API</h1><p>Java API extensively uses wildcard bounds, and we should learn to tackle them. We start with couple of easy ones from <code>java.util.Collections</code> and then move on to a difficult ones from <code>java.util.Stream</code>.</p><p>Take the Collections class method <code>&lt;T> void fill(List&lt;? super T> list, T obj)</code>. If wildcard bound is not there and T is Dog then we can pass <code>List&lt;Dog</code> and nothing else and fill it with Dog. But with <code>List&lt;? super T></code>, we can fill a Dog not only to <code>List&lt;Dog></code> but also to <code>List&lt;Pet></code>. The <code>List&lt;? super T></code> acts as consumer, which allows invocation of put methods as explained in previous tutorial.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-JAVA data-lang=JAVA><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>pets</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>dogs</span><span class=o>,</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>());</span>
</span></span></code></pre></div><div>&nbsp;</div><div>&nbsp;</div><p>Next, look at the <code>public static &lt;T> void copyâ€‹(List&lt;? super T> dest, List&lt;? extends T> src)</code> method of Collections class. If wildcards are not used then we can copy list of a type to another list of same type.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-JAVA data-lang=JAVA><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>pets</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>allPets</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>allPets</span><span class=o>,</span> <span class=n>pets</span><span class=o>);</span>
</span></span></code></pre></div><p>However, with wildcards bounds; if T is Dog, then we can copy list of Dog or Bulldog to list of Dog or Pet. The <code>List&lt;? extends T> src</code> acts as producer that allows only the get methods as explained in previous tutorial, while <code>List&lt;? super T> dst</code> acts as consumer which allows put methods.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-JAVA data-lang=JAVA><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>pets</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>bulldogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Cat</span><span class=o>&gt;</span> <span class=n>cats</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=n>pets</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=n>dogs</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=n>bulldogs</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=n>cats</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>dogs</span><span class=o>,</span> <span class=n>dogs</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>dogs</span><span class=o>,</span> <span class=n>bulldogs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Error: can&#39;t copy String list to Pet list
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>strings</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>Collections</span><span class=o>.</span><span class=na>copy</span><span class=o>(</span><span class=n>pets</span><span class=o>,</span> <span class=n>strings</span><span class=o>);</span>   <span class=c1>// error
</span></span></span></code></pre></div><p>The final example is quizzical <code>java.util.Stream.map()</code> method which is normally used with lambda expression as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;USA&#34;</span><span class=o>,</span> <span class=s>&#34;China&#34;</span><span class=o>,</span> <span class=s>&#34;India&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>s</span> <span class=o>-&gt;</span> <span class=n>s</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>())</span>
</span></span><span class=line><span class=cl>                        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  
</span></span></code></pre></div><p>At first glance, the map() method signature is quite cryptic.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=o>&lt;</span><span class=n>R</span><span class=o>&gt;</span> <span class=n>Stream</span><span class=o>&lt;</span><span class=n>R</span><span class=o>&gt;</span> <span class=nf>map</span><span class=o>(</span><span class=n>Function</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>R</span><span class=o>&gt;</span> <span class=n>mapper</span><span class=o>)</span>
</span></span></code></pre></div><p>It broadly means:</p><ul><li>map input parameter is a <code>Function</code> that accepts input of type T and returns an object of type R.</li><li>map returns a <code>Stream</code> of objects of type R.</li><li>R is the type parameter defined at method level, so function can return instance of any type.</li></ul><p>But, what does <code>Function&lt;? super T, ? extends R></code> really signifies? To know that, we need to understand the implications had it been designed without any wildcards as <code>public &lt;R> Stream&lt;R> map(Function&lt;T, R> mapper)</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>,</span> <span class=n>Cat</span><span class=o>&gt;</span> <span class=n>fn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Cat</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>fn</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  
</span></span></code></pre></div><p>The above code, defines a Function that takes Dog as input and returns a new Cat and use it to map a stream of Dog <code>List&lt;Dog></code>. If map api is without any wildcards then it accepts only the Function with input as Dog and nothing else. If we try to pass <code>Function&lt;Pet, Cat></code> or any other input type results in compiler error. Return type R can be any type.</p><p>To be more flexible, API uses wildcard bounds. For the function input, there are two options: <code>Function&lt;? extends T, R></code> or <code>Function&lt;? super T, R></code>. The first option <code>? extents T</code> is more flexible, but it makes the input as a Producer. To execute the lambda expression, map() calls the functional method <code>Function.apply(T t)</code>, which is a put method as it parameter T is a type parameter. As we have seen in the previous tutorial, put methods are not allowed on Producers. So, the extends is ruled out.</p><div>&nbsp;</div><div>&nbsp;</div><p>The other option, <code>? super T</code> acts as Consumer, and there is no bar on calling <code>apply(T t)</code> on it. It allows T and all its super type as input. Now, we are free to use not only Dog but also its super class, Pet, as input. Following combinations are valid:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>pets</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>bulldogs</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>petfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=s>&#34;foo&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>dogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=s>&#34;bar&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Bulldog</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>bulldogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=s>&#34;zoo&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// for List&lt;Pet&gt; only the functions whose input is Pet or its super are allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>petfn</span><span class=o>);</span>     
</span></span><span class=line><span class=cl><span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>dogfn</span><span class=o>);</span>       <span class=c1>// error - Dog is not super of Pet 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span>   <span class=c1>// error - Bulldog is not super of Pet
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// for List&lt;Dog&gt; only the functions whose input is Dog or its super are allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>dogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>petfn</span><span class=o>);</span>     
</span></span><span class=line><span class=cl><span class=n>dogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>dogfn</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>dogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span>   <span class=c1>// error - Bulldog is not super of Dog 
</span></span></span><span class=line><span class=cl><span class=c1></span>        
</span></span><span class=line><span class=cl><span class=c1>// for List&lt;Bulldog&gt; only the functions whose input is Bulldog or its super are allowed        
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>bulldogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>petfn</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>bulldogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>dogfn</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>bulldogs</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>* Function&lt;Pet, String&gt; can map list of Pet, Dog and Bulldog 
</span></span></span><span class=line><span class=cl><span class=cm>*   - function input is Pet and it is super of Pet, Dog and Bulldog
</span></span></span><span class=line><span class=cl><span class=cm>* Function&lt;Dog, String&gt; can map list of Dog and Bulldog
</span></span></span><span class=line><span class=cl><span class=cm>*   - function input is Dog and it is super of Dog and Bulldog
</span></span></span><span class=line><span class=cl><span class=cm>* Function&lt;Bulldog, String&gt; can map list of Bulldog
</span></span></span><span class=line><span class=cl><span class=cm>*   - function input is Bulldog and it is super Bulldog
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></div><p>Next, let&rsquo;s tackle the function return type if function is specified as <code>Function&lt;? super T, R></code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Pet</span><span class=o>&gt;</span> <span class=n>petfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Bulldog</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Bulldog</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>bulldogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Bulldog</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>s1</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>petfn</span><span class=o>);</span>   <span class=c1>// allowed: only petfn
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>s2</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>dogfn</span><span class=o>);</span>   <span class=c1>// allowed: only dogfn
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>s3</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span>   <span class=c1>// allowed: only bulldogfn
</span></span></span><span class=line><span class=cl><span class=c1></span>  
</span></span></code></pre></div><p>When map is assigned to <code>Stream&lt;Pet></code>, <code>R</code> is set to Pet; only petfn is allowed and we can neither use dogfn nor bulldogfn. Similarly, for <code>Stream&lt;Dog></code> we can use a Function with return type Dog and nothing else.</p><p>To make things more flexible, API uses wildcard bounds. For return type, again there are two options: <code>? extends R</code> and <code>? super R</code>. As producer and consumer is not applicable for return type, the most flexible type, <code>? extends R</code>, is chosen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Pet</span><span class=o>&gt;</span> <span class=n>petfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Cat</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Dog</span><span class=o>&gt;</span> <span class=n>dogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>,</span> <span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>bulldogfn</span> <span class=o>=</span> <span class=n>e</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Bulldog</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Pet</span><span class=o>&gt;</span> <span class=n>s1</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span> <span class=c1>// allowed: petfn, dogfn and bulldogfn
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span> <span class=n>s2</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span> <span class=c1>// allowed: dogfn and bulldogfn
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Bulldog</span><span class=o>&gt;</span> <span class=n>s3</span> <span class=o>=</span> <span class=n>pets</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>bulldogfn</span><span class=o>);</span> <span class=c1>// allowed: bulldogfn
</span></span></span></code></pre></div><p>In the first map statement, R is Pet so then functions - petfn, dogfn and bulldogfn - that returns Pet or its subtypes are allowed. In the second map call, R is Dog and functions - dogfn and bulldogfn - that returns Dog or Bulldog are allowed.</p><p>Just like wildcard bounds, we can bind the type parameter itself and the next tutorial explains it.</p></main></div></div><aside id=sidebar-right class=col-md-1><div class="row my-5 justify-content-center"></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script src=/js/vendor.min.e0afe83ba5579b9676fc5f849c1becff1395739520a7c0bc45535f04acd819c3.js></script></body></html>