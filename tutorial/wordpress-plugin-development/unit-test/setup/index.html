<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="The tutorial - WordPress Test Setup - shows how to test the WordPress Plugin Unit Test setup completed in the previous blog by running some test cases.">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://google.com/article"
        },
        "articleSection" : "tutorial",
        "name" : "Test Setup - WordPress Plugin Development - CodeTab",
        "headline" : "Test Setup - WordPress Plugin Development - CodeTab",
        "url" : "https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/",
        "description" : "The tutorial - WordPress Test Setup - shows how to test the WordPress Plugin Unit Test setup completed in the previous blog by running some test cases.",
        "inLanguage" : "en",
        "image": "https://www.codetab.org/logo.jpg",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": {
            "@type": "Organization",
            "name": "Maithilish",
            "url": "https://www.codetab.org/",
            "logo": {
               "@type": "ImageObject",
               "url": "https://www.codetab.org/logo.png",
               "width":"200",
               "height":"200"
            }
        },
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-11T13:24:00+0530",
        "dateModified" : "2019-01-11T13:24:00+0530",
        "wordCount" : "859",
        "keywords" : [ "wordpress test setup","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.e7fd2d89f73c680873529a110a9007503a1bda864a3a3a6c53c4eb02a54c35eb.css" integrity="sha256-5/0tifc8aAhzUpoRCpAHUDob2oZKOjpsU8TrAqVMNes=">

<title>Test Setup - WordPress Plugin Development - CodeTab</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>

  <div class="row">
    
    <aside id="sidebar" class="col-md-3">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">

    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">WP Plugin Development</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="WordPress Plugin Development - CodeTab">
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/introduction/"
            class="toc-page text-wrap text-muted ">
            Introduction
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/install-locally/"
            class="toc-page text-wrap text-muted ">
            Install Locally
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/simple-plugin/"
            class="toc-page text-wrap text-muted ">
            Simple Plugin
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/shortcode/"
            class="toc-page text-wrap text-muted ">
            Shortcode
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-structure/"
            class="toc-page text-wrap text-muted ">
            Plugin Structure
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-main-file/"
            class="toc-page text-wrap text-muted ">
            Main File
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/hooks-actions-filters/"
            class="toc-page text-wrap text-muted ">
            Hooks, Actions, Filters
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-admin-module-settings" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Admin Module - Settings
    </a>
    
    <div id="tutorial-wordpress-plugin-development-admin-module-settings" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/add-menu/"
            class="toc-page dropdown-item text-wrap text-muted">
            Add Menu
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/settings-api/"
            class="toc-page dropdown-item text-wrap text-muted">
            Settings API
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/options-page/"
            class="toc-page dropdown-item text-wrap text-muted">
            Options Page
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-admin-module-custom-posts" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Admin Module - Posts
    </a>
    
    <div id="tutorial-wordpress-plugin-development-admin-module-custom-posts" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/post-type/"
            class="toc-page dropdown-item text-wrap text-muted">
            Custom Post Type
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/"
            class="toc-page dropdown-item text-wrap text-muted">
            Meta Box
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/save-post/"
            class="toc-page dropdown-item text-wrap text-muted">
            Save Post
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-frontend" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Frontend
    </a>
    
    <div id="tutorial-wordpress-plugin-development-frontend" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/enqueue-scripts/"
            class="toc-page dropdown-item text-wrap text-muted">
            Plugin Enqueue Scripts
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/pass-data-to-javascript/"
            class="toc-page dropdown-item text-wrap text-muted">
            Pass Data to JavaScript
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/debug-info/"
            class="toc-page dropdown-item text-wrap text-muted">
            Debug Info
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-ajax" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Ajax
    </a>
    
    <div id="tutorial-wordpress-plugin-development-ajax" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/wordpress-ajax/"
            class="toc-page dropdown-item text-wrap text-muted">
            Ajax
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/chart-page/"
            class="toc-page dropdown-item text-wrap text-muted">
            Chart Page
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/google-charts/"
            class="toc-page dropdown-item text-wrap text-muted">
            Google Charts
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-internationalization" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Internationalization
    </a>
    
    <div id="tutorial-wordpress-plugin-development-internationalization" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/internationalize/"
            class="toc-page dropdown-item text-wrap text-muted">
            Internationalization
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/localization/"
            class="toc-page dropdown-item text-wrap text-muted">
            Localization
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-activation" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Activation
    </a>
    
    <div id="tutorial-wordpress-plugin-development-activation" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/"
            class="toc-page dropdown-item text-wrap text-muted">
            Activation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/enable-multisite/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/multisite-activation/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site Activation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-deactivation/"
            class="toc-page dropdown-item text-wrap text-muted">
            Deactivation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-uninstall/"
            class="toc-page dropdown-item text-wrap text-muted">
            Uninstall
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-unit-test" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Testing
    </a>
    
    <div id="tutorial-wordpress-plugin-development-unit-test" class="">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/plugin-unit-testing/"
            class="toc-page dropdown-item text-wrap text-muted">
            Unit Test
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/"
            class="toc-page dropdown-item text-wrap text-danger">
            Test Setup
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/simple-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Simple Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/scripts-actions-filters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Unit Test Scripts, Actions, Filters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/advanced-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Advanced Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/internationalization-functions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Test Internationalization Functions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/ajax/"
            class="toc-page dropdown-item text-wrap text-muted">
            Ajax Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/multisite-plugin-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site Plugin Unit Tests
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
    </aside>

    <div id="contentbar" class="col-md-7">
        <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/&amp;text=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/&amp;t=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/&amp;title=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab%20https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/&amp;title=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/&amp;title=Test%20Setup%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
        <div class="row">
          <main id="content" class="col-md-11 post-basic">
            <h2 id="122wordpress-test-setup">12.2.Â WordPress Test Setup</h2>
<p>In the previous blog, <a href="/tutorial/wordpress-plugin-development/unit-test/plugin-unit-testing/">WordPress PHPUnit Setup</a> we put up all the scaffolding necessary to run WordPress Plugin Tests. In this blog, we test the setup by running some test cases.</p>
<h3 id="run-test-cases">Run Test Cases</h3>
<p>The test cases are placed in plugins' <code>tests/phpunit/tests</code> folder.
Let&rsquo;s start with a test case to test the constants defined in the
<code>wp-simple-plugin.php</code>. Add a test file <code>test-wp-simple-plugin.php</code> to
<code>tests/phpunit/tests</code> with following contents.</p>
<p><code>wp-simple-plugin/tests/phpunit/tests/test-wp-simple-plugin.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">class</span> <span class="nc">Test_WP_Simple_Plugin</span> <span class="k">extends</span> <span class="nx">WP_UnitTestCase</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_constants</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span> <span class="s1">&#39;wp-simple-plugin&#39;</span><span class="p">,</span> <span class="nx">WPSP_NAME</span> <span class="p">);</span>

        <span class="nv">$url</span> <span class="o">=</span> <span class="nx">str_replace</span><span class="p">(</span> <span class="s1">&#39;tests/phpunit/tests/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="nx">trailingslashit</span><span class="p">(</span> <span class="nx">plugin_dir_url</span><span class="p">(</span> <span class="no">__FILE__</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span> <span class="nv">$url</span><span class="p">,</span> <span class="nx">WPSP_URL</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>PHPUnit is an Object Oriented Testing Framework and we define test class
by extending the WordPress Tests Library class <code>WP_UnitTestCase</code>. The
test methods are prefixed with <strong>test_</strong> and in the test method
<code>test_constants()</code> we assert whether constants WPSP_NAME and WPSP_URL
exists.</p>
<p>Let&rsquo;s run test and see how it progresses.</p>
<pre><code class="language-screen" data-lang="screen">$ cd wp-simple-plugin
$ phpunit
</code></pre><p>PHPUnit is called from the top directory of the plugin where it reads
the phpunit.xml and executes test files defined by it.</p>
<figure class="text-center" >
  <img class="lazy img-fluid" data-src="/tutorial/wordpress-plugin-development/media/wp-pd-sos-ut-first-run.png" alt="WordPress Test Setup - PHPUnit run tests" />
</figure>

<p>If all is well, then you should get see OK at the end of result with
counts of tests and assertions.</p>


<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>


<h3 id="troubleshoot-the-setup">Troubleshoot the Setup</h3>
<p>But, many things tends to go wrong when we first execute the tests. Some
of the typical errors and how to troubleshoot them are explained here.</p>
<p>Database Connection Error</p>
<p>When Test Lib is unable to connect to test database, it displays error
message in HTML format. Resolve database connection error by going
through following steps.</p>
<ul>
<li>
<p>check whether you are able to connect to wptest database through
mysql client by using username - wptest and password - wptest.</p>
<pre><code class="language-screen" data-lang="screen">$ cd /opt/lampp
$ bin/mysql --pass=wptest -u wptest wptest
mysql&gt; exit
</code></pre><p>In case, you are unable to connect to MySQL then check whether mysql
is up and running by using ps in Linux or process manager in
Windows.</p>
</li>
<li>
<p>next, check whether you are able to connect to MySQL through network
layer by using host name and port.</p>
<pre><code class="language-screen" data-lang="screen">$ cd /opt/lampp
$ bin/mysql --pass=wptest -u wptest --host=localhost.localdomain --port=3306 wptest
mysql&gt; exit
</code></pre><p>In case, you are unable to connect to MySQL then check whether mysql
is up and running and its listening port is 3306 by using ps in
Linux.</p>
<figure class="text-center" >
  <img class="lazy img-fluid" data-src="/tutorial/wordpress-plugin-development/media/wp-pd-sos-ut-mysql-ps.png" alt="WordPress Test Setup - MySQL     ps" />
</figure>

</li>
</ul>
<p>Host Name</p>
<p>One more oddity we found was the host name and MySQL version. When path
is pointed to MySQL version 5.3.x then we are able run tests with
DB_HOST (wp-tests-config.php) is set as localhost.localdomain but not
with localhost. However, with MySQL version 5.5.x we are able to run
test even when DB_HOST is set as localhost.</p>
<p>WordPress Core Path Error</p>
<p>The ABSPATH definition in wp-tests-config.php should end with a trailing
slash otherwise WordPress is unable to construct the absolute path of
include files.</p>
<p>Permission Error</p>
<p>One more error is related to permission of WordPress directory.</p>
<pre><code class="language-screen" data-lang="screen">1) Test_WP_Simple_Plugin::test_constants
UnexpectedValueException: RecursiveDirectoryIterator::__construct(/opt/lampp/wptest/wordpress/wp-content/uploads): failed to open dir: No such file or directory
</code></pre><p>The error indicates that WordPress instance created by Tests Library is
unable to access the uploads directory in <code>wordpress/wp-content</code>. The
user who runs the test should have write permission on wp-contents
directory. To rectify this, either change the owner of the
<code>/opt/lampp/wptest/wordpress</code> or add the user to group which owns the
the wordpress directory.</p>
<p>Plugin Link Error</p>
<p>When you run tests that checks the constants if you get following error
then it means Test Lib is unable to load the plugin main file (and also
the plugin) and because of that constant WPSP_NAME is not defined.</p>
<pre><code class="language-screen" data-lang="screen">There was 1 failure:

1) Test_WP_Simple_Plugin::test_constants
Failed asserting that two strings are identical.
--- Expected
+++ Actual
@@ @@
-wp-simple-plugin
+WPSP_NAME

/orange/work/tem/wp-simple-plugin/tests/phpunit/tests/test-wp-simple-plugin.php:7

FAILURES!
Tests: 1, Assertions: 1, Failures: 1.
</code></pre><p>To rectify this, you need to create link in wordpress/wp-content/plugins
directory pointing to the actual location of the plugin code as
explained in <a href="/tutorial/wordpress-plugin-development/unit-test/plugin-unit-testing/#create-plugin-link">Create Link to Plugin</a>.</p>
<p>PHPUnit Error</p>
<p>XAMPP comes with PHPUnit and PHP. On one occasion, PHPUnit threw some
dependency error which happened when /opt/lampp/bin was in users $PATH.
However, subsequently the problem has not repeated. We have never faced
this problem when we use stock PHP that comes with Linux and
phpunit.phar installed as explained in the previous blog.</p>


<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>



<h3 id="wordpress-options-and-tests">WordPress Options and Tests</h3>
<p>In the previous blog, we used following code in
<code>tests/phpunit/bootstrap.php</code> to activate and load the plugin.</p>
<p><code>wp-simple-plugin/tests/phpunit/bootstrap.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$GLOBALS</span><span class="p">[</span> <span class="s1">&#39;wp_tests_options&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;active_plugins&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;wp-simple-plugin/wp-simple-plugin.php&#39;</span>
        <span class="p">),</span>
        <span class="s1">&#39;wpsp_test&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
<span class="p">);</span>
</code></pre></div><p>The array at index <strong>active_plugins</strong> is used by Tests Library to
activate and load the plugin as part of WordPress initialization. The
subsequent items in the array are used to create WordPress Options that
are available during testing. With the above code, Tests Library creates
an WordPress Option named <strong>wpsp_test</strong> and sets it value as true.
Within test cases, we can refer this temporary option using WordPress
Options API.</p>
<p>To test the option declared in bootstrap.php, add a new test case to the
test file and re-run the phpunit.</p>
<p><code>wp-simple-plugin//tests/phpunit/tests/test-wp-simple-plugin.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_wpsp_option</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="nx">get_option</span><span class="p">(</span><span class="s1">&#39;wpsp_test&#39;</span><span class="p">));</span>
    <span class="p">}</span>
</code></pre></div><p>In the next blog, we explain the various patterns used to unit test the
Share on Social Plugin.</p>

          </main>
        </div>
      </div>
  
    <aside id="sidebar-right" class="col-md-2">
      <div class="row my-5 justify-content-center border">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>

  </div>

</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js"></script>
</body>

</html>