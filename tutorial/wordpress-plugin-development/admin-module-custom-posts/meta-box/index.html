<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="WordPress Meta Box groups HTML input and other elements. In this tutorial we setup, render and customize custom post type editor with WordPress Meta Box."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYHTHXW09H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYHTHXW09H")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"Meta Box - WordPress Plugin Development - CodeTab","headline":"Meta Box - WordPress Plugin Development - CodeTab","url":"https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/","description":"WordPress Meta Box groups HTML input and other elements. In this tutorial we setup, render and customize custom post type editor with WordPress Meta Box.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-11T09:52:00+0530","dateModified":"2019-01-11T09:52:00+0530","wordCount":"939","keywords":["wordpress meta box","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.1698d0d77ecc1e6eab497430854b900ce057b6560d89fe0c2c5304b319fb0940.css integrity="sha256-FpjQ137MHm6rSXQwhUuQDOBXtlYNif4MLFMEsxn7CUA="><title>Meta Box - WordPress Plugin Development - CodeTab</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">WP Plugin Development</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="WordPress Plugin Development - CodeTab"><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/install-locally/ class="toc-page text-wrap text-muted">Install WP on Docker</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/simple-plugin/ class="toc-page text-wrap text-muted">Simple Plugin</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/shortcode/ class="toc-page text-wrap text-muted">Shortcode</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-structure/ class="toc-page text-wrap text-muted">Plugin Structure</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-main-file/ class="toc-page text-wrap text-muted">Main File</a></div><div><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/hooks-actions-filters/ class="toc-page text-wrap text-muted">Hooks, Actions, Filters</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-admin-module-settings id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Admin - Settings</a><div id=tutorial-wordpress-plugin-development-admin-module-settings class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/add-menu/ class="toc-page dropdown-item text-wrap text-muted">Add Menu
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/settings-api/ class="toc-page dropdown-item text-wrap text-muted">Settings API
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/options-page/ class="toc-page dropdown-item text-wrap text-muted">Options Page</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-admin-module-custom-posts id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Admin - Posts</a><div id=tutorial-wordpress-plugin-development-admin-module-custom-posts><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/post-type/ class="toc-page dropdown-item text-wrap text-muted">Custom Post Type
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/ class="toc-page dropdown-item text-wrap text-danger">Meta Box
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/save-post/ class="toc-page dropdown-item text-wrap text-muted">Save Post</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-frontend id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Frontend</a><div id=tutorial-wordpress-plugin-development-frontend class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/enqueue-scripts/ class="toc-page dropdown-item text-wrap text-muted">Plugin Enqueue Scripts
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/pass-data-to-javascript/ class="toc-page dropdown-item text-wrap text-muted">Pass Data to JavaScript
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/debug-info/ class="toc-page dropdown-item text-wrap text-muted">Debug Info</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-ajax id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Ajax</a><div id=tutorial-wordpress-plugin-development-ajax class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/wordpress-ajax/ class="toc-page dropdown-item text-wrap text-muted">Ajax
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/chart-page/ class="toc-page dropdown-item text-wrap text-muted">Chart Page
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/google-charts/ class="toc-page dropdown-item text-wrap text-muted">Google Charts</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-internationalization id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Internationalization</a><div id=tutorial-wordpress-plugin-development-internationalization class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/internationalize/ class="toc-page dropdown-item text-wrap text-muted">Internationalization
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/localization/ class="toc-page dropdown-item text-wrap text-muted">Localization</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-activation id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Activation</a><div id=tutorial-wordpress-plugin-development-activation class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/ class="toc-page dropdown-item text-wrap text-muted">Activation
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/enable-multisite/ class="toc-page dropdown-item text-wrap text-muted">Multi site
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/multisite-activation/ class="toc-page dropdown-item text-wrap text-muted">Multi site Activation
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-deactivation/ class="toc-page dropdown-item text-wrap text-muted">Deactivation
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-uninstall/ class="toc-page dropdown-item text-wrap text-muted">Uninstall</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-wordpress-plugin-development-unit-test id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Testing</a><div id=tutorial-wordpress-plugin-development-unit-test class=collapse><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/plugin-unit-testing/ class="toc-page dropdown-item text-wrap text-muted">Unit Test
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/ class="toc-page dropdown-item text-wrap text-muted">Test Setup
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/simple-unit-tests/ class="toc-page dropdown-item text-wrap text-muted">Simple Unit Tests
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/scripts-actions-filters/ class="toc-page dropdown-item text-wrap text-muted">Unit Test Scripts, Actions, Filters
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/advanced-unit-tests/ class="toc-page dropdown-item text-wrap text-muted">Advanced Unit Tests
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/internationalization-functions/ class="toc-page dropdown-item text-wrap text-muted">Test Internationalization Functions
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/ajax/ class="toc-page dropdown-item text-wrap text-muted">Ajax Unit Tests
</a><a href=https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/multisite-plugin-unit-tests/ class="toc-page dropdown-item text-wrap text-muted">Multi site Plugin Unit Tests</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-8><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/&amp;text=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/&amp;t=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/&amp;title=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab%20https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/&amp;title=Meta%20Box%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h2 id=72wordpress-meta-box>7.2. WordPress Meta Box</h2><p>In the previous blog, we saw how to register a new custom post type
named sos and use it as Social Lockers. To manage the custom post type
items, in this blog we setup, render and customize Sos Locker editor
with WordPress Meta Box.</p><p>While registering the custom post type, we used
<strong>register_meta_box_cb</strong> to register the callback method
<code>setup_meta_boxes()</code>.</p><p><code>share-on-social/admin/class-sos.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>create_post_type</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>register_post_type</span><span class=p>(</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=c1>// other args
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=s1>&#39;register_meta_box_cb&#39;</span> <span class=o>=&gt;</span> <span class=k>array</span><span class=p>(</span><span class=nv>$this</span><span class=p>,</span><span class=s1>&#39;setup_meta_boxes&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>....</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>When we add or edit Sos Locker WordPress calls the callback, which we
use to customize meta boxes of the editor.</p><h3 id=wordpress-meta-box>WordPress Meta Box</h3><p>WordPress Post editor is composed of Meta Boxes which holds HTML input
and other elements. The screenshot of Sos Locker editor shows three meta
boxes. The main meta box titled <strong>Share Locker</strong> is to edit lockers'
meta data. On the right there are two meta boxes - CodeTab which is used
to advertise this tutorial and the standard Publish meta box that
WordPress adds to post editor.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress-plugin-development/media/wp-pd-sos-custom-post-add-new.png alt="WordPress Meta Box - Share on Social Add New Locker"></figure><p>Let&rsquo;s see how this is done. In the callback method <code>setup_meta_boxes()</code>,
we use two WordPress functions - <a href=http://codex.wordpress.org/Function_Reference/add_meta_box target=_blank>add_meta_box()</a> and <a href=http://codex.wordpress.org/Function_Reference/remove_meta_box target=_blank>remove_meta_box()</a>.</p><p><code>share-on-social/admin/class-sos.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>    <span class=k>function</span> <span class=nf>setup_meta_boxes</span> <span class=p>(</span> <span class=nv>$post</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>add_meta_box</span><span class=p>(</span> <span class=s1>&#39;locker_meta_box&#39;</span><span class=p>,</span> <span class=nx>__</span><span class=p>(</span> <span class=s1>&#39;Share Locker&#39;</span><span class=p>,</span> <span class=s1>&#39;sos-domain&#39;</span> <span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=k>array</span><span class=p>(</span><span class=nv>$this</span><span class=p>,</span><span class=s1>&#39;render_locker_meta_box&#39;</span><span class=p>),</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>,</span> <span class=s1>&#39;normal&#39;</span><span class=p>,</span> <span class=s1>&#39;high&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>add_meta_box</span><span class=p>(</span> <span class=s1>&#39;codedrops_meta_box&#39;</span><span class=p>,</span> <span class=s1>&#39;CodeDrops&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=k>array</span><span class=p>(</span><span class=nv>$this</span><span class=p>,</span><span class=s1>&#39;render_codedrops_meta_box&#39;</span><span class=p>),</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>,</span> <span class=s1>&#39;side&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>remove_meta_box</span><span class=p>(</span> <span class=s1>&#39;slider_sectionid&#39;</span><span class=p>,</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>,</span> <span class=s1>&#39;normal&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>remove_meta_box</span><span class=p>(</span> <span class=s1>&#39;layout_sectionid&#39;</span><span class=p>,</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>,</span> <span class=s1>&#39;normal&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>To add <strong>Share Locker</strong> meta box, we use following arguments.</p><ul><li><p><strong>id</strong> - locker_meta_box,</p></li><li><p><strong>title</strong> - Share Locker.</p></li><li><p><strong>callback</strong> - method <code>render_locker_meta_box()</code> renders this meta
box.</p></li><li><p><strong>post_type</strong> - only applicable to custom post type and we set it
<strong>sos</strong>.</p></li><li><p><strong>context</strong> - edit page is divided into three area - normal,
advanced and side. We use normal to position the meta box below the
title field. While, <strong>advanced</strong> places the meta box below the
normal and <strong>side</strong> places box on the side bar.</p></li><li><p><strong>priority</strong> - when there are multiple meta boxes in each area
(context), their placement may fine tuned with priority - high,
core, default and low.</p></li><li><p><strong>callback_args</strong> - arguments to callback, if any.</p></li></ul><p>We similarly add the second meta box to the side bar. WordPress adds
other standard meta boxes - Layout and Slider - to the editor. Sos
Lockers editor doesn&rsquo;t require these two meta boxes. We use
remove_meta_box() function to remove these meta boxes for sos custom
post type.</p><div>&nbsp;</div><div>&nbsp;</div><p>Let&rsquo;s get back to Share Locker meta box and see how it is rendered by
the callback.</p><p><code>share-on-social/admin/class-sos.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>    <span class=k>function</span> <span class=nf>render_locker_meta_box</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>wp_nonce_field</span><span class=p>(</span> <span class=s1>&#39;save_locker&#39;</span><span class=p>,</span> <span class=s1>&#39;locker_nonce&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>get_table</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add_editor</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>function</span> <span class=nf>get_table</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>global</span> <span class=nv>$post</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$locker_id</span> <span class=o>=</span> <span class=nx>get_post_meta</span><span class=p>(</span> <span class=nv>$post</span><span class=o>-&gt;</span><span class=na>ID</span><span class=p>,</span> <span class=s1>&#39;locker_id&#39;</span><span class=p>,</span> <span class=k>true</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// other meta data
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=nv>$locker_id_label</span> <span class=o>=</span> <span class=nx>__</span><span class=p>(</span> <span class=s1>&#39;Locker ID&#39;</span><span class=p>,</span> <span class=s1>&#39;sos-domain&#39;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// other labels
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=nv>$table</span> <span class=o>=</span> <span class=s>&lt;&lt;&lt;</span><span class=dl>EOD</span><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>&lt;div&gt;$see_help_message&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s>&lt;table class=&#34;form-table&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s>&lt;tr&gt;
</span></span></span><span class=line><span class=cl><span class=s>&lt;th scope=&#34;row&#34;&gt;&lt;label for=&#34;locker_id&#34;&gt;$locker_id_label&lt;/label&gt;&lt;/th&gt;
</span></span></span><span class=line><span class=cl><span class=s>    &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;locker_id&#34; id=&#34;locker_id&#34; value=&#34;$locker_id&#34; /&gt;&lt;/td&gt;
</span></span></span><span class=line><span class=cl><span class=s>&lt;/tr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>        // html elements of other metadata fields
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    &lt;/table&gt;
</span></span></span><span class=line><span class=cl><span class=s></span><span class=dl>EOD</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nv>$table</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In the rendering method, we set <strong>nonce</strong> token which is a security
feature of WordPress to authenticate the requests. Next, we echo a HTML
table containing the the required text fields, check boxes and radio
buttons.</p><p>When we edit a locker, WordPress sets the locker object which is a sos
custom post of type in the global variable $post and we use the $post
object to get the post_id of the locker as <code>$post->ID</code>.</p><div>&nbsp;</div><div>&nbsp;</div><p>Locker edit page also has TINY MCE Visual Editor at the bottom to enter
the display text of the locker. Rendering method calls <code>add_editor() </code>method to add the TINY MCE editor.</p><p><code>share-on-social/admin/class-sos.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>    <span class=k>function</span> <span class=nf>add_editor</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>global</span> <span class=nv>$post</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$id</span> <span class=o>=</span> <span class=s1>&#39;locker_text&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$name</span> <span class=o>=</span> <span class=s1>&#39;locker_text&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$value</span> <span class=o>=</span> <span class=nx>wp_kses_post</span><span class=p>(</span> <span class=nx>get_post_meta</span><span class=p>(</span> <span class=nv>$post</span><span class=o>-&gt;</span><span class=na>ID</span><span class=p>,</span> <span class=s1>&#39;locker_text&#39;</span><span class=p>,</span> <span class=k>true</span> <span class=p>)</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>$editor_options</span> <span class=o>=</span> <span class=k>array</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;textarea_name&#39;</span> <span class=o>=&gt;</span> <span class=nv>$name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;textarea_rows&#39;</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;tinymce&#39;</span> <span class=o>=&gt;</span> <span class=k>array</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;toolbar1&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;bold italic underline | alignleft aligncenter alignright | outdent indent | undo redo |  fullscreen&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;toolbar2&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;formatselect fontselect fontsizeselect | forecolor backcolor | removeformat&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>wp_editor</span><span class=p>(</span> <span class=nv>$value</span><span class=p>,</span> <span class=nv>$id</span><span class=p>,</span> <span class=nv>$editor_options</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>In add_editor() method, we use TINY MCE editor options to set essential
toolbar icons and then call WordPress
<a href=http://codex.wordpress.org/Function_Reference/wp_editor target=_blank>wp_editor()</a> function which adds the visual editor. When post is saved we can fetch the text entered in editor from the $_POST[&rsquo;locker_text&rsquo;] as the editor option <strong>textarea_name</strong> is set to <strong>locker_text</strong>.</p><p><strong>Post Contents</strong></p><p>Share on Social plugin saves locker display text as meta data. The
Display Text field is just a bunch of HTML text and it may very well
saved as post content instead of separate meta data.</p><p>While registering sos custom post type, we disabled the default content
editor that WordPress adds to the post editor and enabled a separate
TINY MCE editor to enter the display text. We do so to have a better
control over the editor. WordPress places the default content editor at
the top of the page. As it is meant to edit post content, its dimension
is quite large. By going for custom TINY MCE editor, we could do the
following.</p><ul><li><p>place the editor at the bottom of meta box after all other fields.</p></li><li><p>make editor smaller.</p></li><li><p>disable some of the toolbar items.</p></li></ul><h3 id=hide-publish-details>Hide Publish Details</h3><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/wordpress-plugin-development/media/wp-pd-sos-custom-post-publish-details.png alt="WordPress Meta Box - Publish Meta box"></figure><p>The default Publish Meta box has editable fields such as <strong>Status</strong>,
<strong>Visibility</strong> and <strong>Published on</strong> etc., Sos Lockers doesn&rsquo;t require
these information. The block that displays these things is the
minor-publishing section and there is no documented way to remove it.
Instead, we toggle the block style and hide it in <code>hide_minor_publish()</code>
method which is hooked to <strong>admin_head</strong> hook.</p><p><code>share-on-social/admin/class-sos.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>function</span> <span class=nf>hide_minor_publish</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nv>$screen</span> <span class=o>=</span> <span class=nx>get_current_screen</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span> <span class=nx>in_array</span><span class=p>(</span> <span class=nv>$screen</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>array</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>post_type</span><span class=p>)</span> <span class=p>)</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=k>echo</span> <span class=s1>&#39;&lt;style&gt;#minor-publishing { display: none; }&lt;/style&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In the next section, we see how to publish the post.</p></main></div></div><aside id=sidebar-right class=col-md-1><div class="row my-5 justify-content-center"></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script src=/js/vendor.min.c32ad1c7e87da9243fe3a4ff30c9040737545641e3a0a16a1cde4d62759f9fea.js></script></body></html>