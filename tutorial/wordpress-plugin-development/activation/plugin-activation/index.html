<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="This tutorial explains WordPress Plugin Activation, Deactivation and Uninstall phases in detail and how to code them in WordPress Multisite Installations.">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://google.com/article"
        },
        "articleSection" : "tutorial",
        "name" : "Activation - WordPress Plugin Development - CodeTab",
        "headline" : "Activation - WordPress Plugin Development - CodeTab",
        "url" : "https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/",
        "description" : "This tutorial explains WordPress Plugin Activation, Deactivation and Uninstall phases in detail and how to code them in WordPress Multisite Installations.",
        "inLanguage" : "en",
        "image": "https://www.codetab.org/logo.jpg",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": {
            "@type": "Organization",
            "name": "Maithilish",
            "url": "https://www.codetab.org/",
            "logo": {
               "@type": "ImageObject",
               "url": "https://www.codetab.org/logo.png",
               "width":"200",
               "height":"200"
            }
        },
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-11T11:53:00+0530",
        "dateModified" : "2019-01-11T11:53:00+0530",
        "wordCount" : "740",
        "keywords" : [ "wordpress plugin activation","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.e7fd2d89f73c680873529a110a9007503a1bda864a3a3a6c53c4eb02a54c35eb.css" integrity="sha256-5/0tifc8aAhzUpoRCpAHUDob2oZKOjpsU8TrAqVMNes=">

<title>Activation - WordPress Plugin Development - CodeTab</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>

  <div class="row">
    
    <aside id="sidebar" class="col-md-3">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">

    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">WP Plugin Development</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="WordPress Plugin Development - CodeTab">
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/introduction/"
            class="toc-page text-wrap text-muted ">
            Introduction
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/install-locally/"
            class="toc-page text-wrap text-muted ">
            Install Locally
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/simple-plugin/"
            class="toc-page text-wrap text-muted ">
            Simple Plugin
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/shortcode/"
            class="toc-page text-wrap text-muted ">
            Shortcode
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-structure/"
            class="toc-page text-wrap text-muted ">
            Plugin Structure
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/plugin-main-file/"
            class="toc-page text-wrap text-muted ">
            Main File
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/hooks-actions-filters/"
            class="toc-page text-wrap text-muted ">
            Hooks, Actions, Filters
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-admin-module-settings" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Admin Module - Settings
    </a>
    
    <div id="tutorial-wordpress-plugin-development-admin-module-settings" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/add-menu/"
            class="toc-page dropdown-item text-wrap text-muted">
            Add Menu
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/settings-api/"
            class="toc-page dropdown-item text-wrap text-muted">
            Settings API
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-settings/options-page/"
            class="toc-page dropdown-item text-wrap text-muted">
            Options Page
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-admin-module-custom-posts" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Admin Module - Posts
    </a>
    
    <div id="tutorial-wordpress-plugin-development-admin-module-custom-posts" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/post-type/"
            class="toc-page dropdown-item text-wrap text-muted">
            Custom Post Type
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/meta-box/"
            class="toc-page dropdown-item text-wrap text-muted">
            Meta Box
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/admin-module-custom-posts/save-post/"
            class="toc-page dropdown-item text-wrap text-muted">
            Save Post
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-frontend" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Frontend
    </a>
    
    <div id="tutorial-wordpress-plugin-development-frontend" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/enqueue-scripts/"
            class="toc-page dropdown-item text-wrap text-muted">
            Plugin Enqueue Scripts
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/pass-data-to-javascript/"
            class="toc-page dropdown-item text-wrap text-muted">
            Pass Data to JavaScript
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/frontend/debug-info/"
            class="toc-page dropdown-item text-wrap text-muted">
            Debug Info
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-ajax" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Ajax
    </a>
    
    <div id="tutorial-wordpress-plugin-development-ajax" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/wordpress-ajax/"
            class="toc-page dropdown-item text-wrap text-muted">
            Ajax
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/chart-page/"
            class="toc-page dropdown-item text-wrap text-muted">
            Chart Page
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/ajax/google-charts/"
            class="toc-page dropdown-item text-wrap text-muted">
            Google Charts
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-internationalization" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Internationalization
    </a>
    
    <div id="tutorial-wordpress-plugin-development-internationalization" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/internationalize/"
            class="toc-page dropdown-item text-wrap text-muted">
            Internationalization
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/internationalization/localization/"
            class="toc-page dropdown-item text-wrap text-muted">
            Localization
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-activation" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Activation
    </a>
    
    <div id="tutorial-wordpress-plugin-development-activation" class="">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/"
            class="toc-page dropdown-item text-wrap text-danger">
            Activation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/enable-multisite/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/multisite-activation/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site Activation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-deactivation/"
            class="toc-page dropdown-item text-wrap text-muted">
            Deactivation
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-uninstall/"
            class="toc-page dropdown-item text-wrap text-muted">
            Uninstall
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-wordpress-plugin-development-unit-test" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Testing
    </a>
    
    <div id="tutorial-wordpress-plugin-development-unit-test" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/plugin-unit-testing/"
            class="toc-page dropdown-item text-wrap text-muted">
            Unit Test
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/setup/"
            class="toc-page dropdown-item text-wrap text-muted">
            Test Setup
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/simple-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Simple Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/scripts-actions-filters/"
            class="toc-page dropdown-item text-wrap text-muted">
            Unit Test Scripts, Actions, Filters
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/advanced-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Advanced Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/internationalization-functions/"
            class="toc-page dropdown-item text-wrap text-muted">
            Test Internationalization Functions
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/ajax/"
            class="toc-page dropdown-item text-wrap text-muted">
            Ajax Unit Tests
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/wordpress-plugin-development/unit-test/multisite-plugin-unit-tests/"
            class="toc-page dropdown-item text-wrap text-muted">
            Multi site Plugin Unit Tests
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
    </aside>

    <div id="contentbar" class="col-md-7">
        <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/&amp;text=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/&amp;t=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/&amp;title=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab%20https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/&amp;title=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/wordpress-plugin-development/activation/plugin-activation/&amp;title=Activation%20-%20WordPress%20Plugin%20Development%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
        <div class="row">
          <main id="content" class="col-md-11 post-basic">
            <p>While it is true that WordPress takes care of the majority of the
activation and deactivation process, these phases are ideal to carryout
any specific customizations related to the plugin. With this background,
in this chapter we cover WordPress Plugin Activation, Deactivation and
Uninstall phases in detail and also, how to deal them in WordPress
Multisite Installations.</p>
<h2 id="111wordpress-plugin-activation">11.1. WordPress Plugin Activation</h2>
<p>In Share on Social Plugin, we use Activation phase to remove stale basic
locker that is left over by the previous installation and also, add
settings such as plugin version etc.,</p>
<p>Plugin uses class <code>Sos_Activator</code> of <code>admin/class-activator.php</code> to
customize the plugins' activation and deactivation.</p>
<p>The method, <code>Sos_Activator::setup()</code>, uses WordPress function
<a href="http://codex.wordpress.org/Function_Reference/register_activation_hook" target="_blank">register_activation_hook()</a>
to register the method that has to be invoked when plugin is activated.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Sos_Activator</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setup</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">register_activation_hook</span><span class="p">(</span> <span class="nx">SOS_PLUGIN_FILE</span><span class="p">,</span> 
                <span class="k">array</span><span class="p">(</span> <span class="nv">$this</span><span class="p">,</span><span class="s1">&#39;activate&#39;</span> <span class="p">));</span>
    <span class="p">}</span>
</code></pre></div><p>This hooks <code>Sos_Activator::activate()</code> as activation method. The first
parameter to the registration function is the constant
<strong>SOS_PLUGIN_FILE</strong> defined in the plugins' main file. It expands to
the plugin main file <code>share-on-social.php</code>.</p>
<p>When admin installs the plugin and activates it, WordPress as part of
activation process calls <code>Sos_Activator::activate()</code> method.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">activate</span> <span class="p">(</span> <span class="nv">$networkwide</span> <span class="p">)</span> <span class="p">{</span>        
        <span class="k">if</span> <span class="p">(</span> <span class="nx">function_exists</span><span class="p">(</span> <span class="s1">&#39;is_multisite&#39;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_multisite</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
           <span class="o">....</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">false</span> <span class="o">==</span> <span class="nx">current_user_can</span><span class="p">(</span> <span class="s1">&#39;activate_plugins&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">activate_for_blog</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div><p>It checks whether it WordPress site is a multisite or single site and if
single site, it calls <code>Sos_Activator::activate_for_blog()</code>. Multisite
activation logic is bit more complex and we will deal with it in the
next chapter.</p>
<p>The Sos_Activator::activate_for_blog() method calls the method to
delete any existing basic locker and add settings.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">activate_for_blog</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// if exists remove it
</span><span class="c1"></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">delete_basic_locker</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">add_settings</span><span class="p">();</span>
    <span class="p">}</span>
</code></pre></div><p>When admin reinstalls the plugin, the default basic locker created in
the previous installation may still exists in the database and we delete
it so as to start in a clean state.</p>
<p>The method <code>Sos_Activator::delete_basic_locker()</code> finds the <strong>post_id</strong>
of the locker id &lsquo;basic&rsquo; and delete the post using WordPress function
<a href="http://codex.wordpress.org/Function_Reference/wp_delete_post" target="_blank">wp_delete_post()</a>.
After plugin is fully activated, as we have already seen, the method <code>Sos::create_post_type()</code> registers sos custom post type and creates a
new default locker.</p>


<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>



<p>The method <code>Sos_Activator::add_settings()</code> adds or updates the version
number of the plugin in <strong>sos_common_options</strong> in WordPress database.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">delete_basic_locker</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nv">$post_id</span> <span class="o">=</span> <span class="nx">Sos_Helper</span><span class="o">::</span><span class="na">get_locker_post_id</span><span class="p">(</span> <span class="s1">&#39;basic&#39;</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nv">$post_id</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">wp_delete_post</span><span class="p">(</span> <span class="nv">$post_id</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">add_settings</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nv">$option_group</span> <span class="o">=</span> <span class="s1">&#39;sos_common_options&#39;</span><span class="p">;</span>
        <span class="nv">$options</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span> <span class="nv">$option_group</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">false</span> <span class="o">==</span> <span class="nv">$options</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;version&#39;</span> <span class="o">=&gt;</span> <span class="nx">SOS_VERSION</span> <span class="p">);</span>
            <span class="nx">add_option</span><span class="p">(</span> <span class="nv">$option_group</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$options</span><span class="p">[</span> <span class="s1">&#39;version&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">SOS_VERSION</span><span class="p">;</span>
            <span class="nx">update_option</span><span class="p">(</span> <span class="nv">$option_group</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div><p><strong>Version Number</strong></p>
<p>It is highly recommended to store the plugin version number in WordPress
database and it comes handy either for plugin support calls or during
plugin up-gradation.</p>
<p>Even when a plugin is not using the version number, it doesn&rsquo;t hurt to
store this small bit of information somewhere in the database.</p>
<h3 id="action-links">Action Links</h3>
<p>It is useful to add some Call-to-Action links in the plugin section. For
Share on Social Plugin, we add action link <strong>Settings</strong>, which appears
once plugin is activated, so as to draw admins' attention to do the
essential settings before they use the plugin.</p>
<figure class="text-center" >
  <img class="lazy img-fluid" data-src="/tutorial/wordpress-plugin-development/media/wp-pd-sos-action-link.png" alt="WordPress Plugin Activation - Action Links" />
</figure>

<p>WordPress filter hook <strong>plugin_action_links</strong> is used to add the
action links the plugin activation section.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">setup</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">add_filter</span><span class="p">(</span> <span class="s1">&#39;plugin_action_links&#39;</span><span class="p">,</span> 
                <span class="k">array</span><span class="p">(</span> <span class="nv">$this</span><span class="p">,</span><span class="s1">&#39;action_links&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="p">}</span>
</code></pre></div><p>To the filter method <code>Sos_Activator::action_links()</code>, WordPress passes
the array of links, that will be added to activation section, through
$links parameter. Through the $file parameter plugins' base name is
passed to the filter method.</p>
<p><code>share-on-social/admin/class-activator.php</code></p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">action_links</span> <span class="p">(</span> <span class="nv">$links</span><span class="p">,</span> <span class="nv">$file</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">SOS_PLUGIN_BASENAME</span> <span class="o">==</span> <span class="nv">$file</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">$settings_link</span> <span class="o">=</span> <span class="s1">&#39;&lt;a href=&#34;&#39;</span> <span class="o">.</span> <span class="nx">get_bloginfo</span><span class="p">(</span> <span class="s1">&#39;wpurl&#39;</span> <span class="p">)</span> <span class="o">.</span>
                     <span class="s1">&#39;/wp-admin/edit.php?post_type=sos&amp;page=sos_settings_page&#34;&gt;Settings&lt;/a&gt;&#39;</span><span class="p">;</span>
            <span class="nx">array_unshift</span><span class="p">(</span> <span class="nv">$links</span><span class="p">,</span> <span class="nv">$settings_link</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$links</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div><p>The filter method returns the $links array after adding the new links
that points to Share on Social <strong>Settings</strong> menu. It is important to
note that when Installed Plugin page is opened the filter method
<code>Sos_Activator::action_links()</code> is called for each and every active
plugin. By using $file parameter, we add action link only when base name
is share-on-social so that the link is added only for Share on Plugin.</p>


<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>


<p> </p>
<p>In the next section, we install WordPress Multisite and learn to code
plugin activation for Multisites.</p>

          </main>
        </div>
      </div>
  
    <aside id="sidebar-right" class="col-md-2">
      <div class="row my-5 justify-content-center border">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>

  </div>

</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.8489448e4e75ceb388a38abde3871de9485502974c5feddcf04a3d413dc6e103.js"></script>
</body>

</html>