<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="GWT Tutorial FactPanel displays FactItem in a HorizontalPanel. FactItem is a widget with two Labels, one for text and another for value."><meta name=author content="Maithilish"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYHTHXW09H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYHTHXW09H")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://google.com/article"},"articleSection":"tutorial","name":"FactPanel - GWT Tutorial - CodeTab","headline":"FactPanel - GWT Tutorial - CodeTab","url":"https://www.codetab.org/tutorial/gwt/content/factpanel/","description":"GWT Tutorial FactPanel displays FactItem in a HorizontalPanel. FactItem is a widget with two Labels, one for text and another for value.","inLanguage":"en","image":"https://www.codetab.org/logo.jpg","author":"Maithilish","creator":"Maithilish","publisher":{"@type":"Organization","name":"Maithilish","url":"https://www.codetab.org/","logo":{"@type":"ImageObject","url":"https://www.codetab.org/logo.png","width":"200","height":"200"}},"copyrightHolder":"Maithilish","copyrightYear":"2019","datePublished":"2019-01-10T18:22:00+0530","dateModified":"2019-01-10T18:22:00+0530","wordCount":"1002","keywords":["factpanel","Blog"]}</script><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/vendor.min.b34f4a49e8fbf83dd7dd8f945eb35a939c19aa15051f677ac5a9c057ac6c8774.css integrity="sha256-s09KSej7+D3X3Y+UXrNak5wZqhUFH2d6xanAV6xsh3Q="><title>FactPanel - GWT Tutorial - CodeTab</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1281079745125126" crossorigin=anonymous></script></head><body id=top><header><nav id=navbar-main class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm"><div class=container-fluid><a class=navbar-brand href=/>Codetab</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#tutorials><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>About</span></a></li></ul></div></div></nav></header><div class=container-fluid><div class=row>&nbsp;</div><div class=row><aside id=sidebar class=col-md-3><div class=row><nav id=navbar-side class="bg-light text-secondary"><h4 class="text-muted bg-white pl-2">GWT Tutorial</h4><nav class="navbar navbar-light bg-white navbar-expand-md"><button class="navbar-toggler ml-auto" type=button data-toggle=collapse data-target=#bookmenu aria-controls=bookmenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=bookmenu><div><div id="GWT Tutorial - Complete Project - CodeTab"><div><a href=https://www.codetab.org/tutorial/gwt/introduction/ class="toc-page text-wrap text-muted">Introduction</a></div><div><a href=https://www.codetab.org/tutorial/gwt/install/ class="toc-page text-wrap text-muted">Install GWT in Eclipse</a></div><div><a href=https://www.codetab.org/tutorial/gwt/create-project/ class="toc-page text-wrap text-muted">Project Setup</a></div><div><a href=https://www.codetab.org/tutorial/gwt/gwt-project-code/ class="toc-page text-wrap text-muted">GWT Project Code</a></div><div><a href=https://www.codetab.org/tutorial/gwt/gwt-demo/ class="toc-page text-wrap text-muted">GWT Tutorial Demo</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-shell id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Shell</a><div id=tutorial-gwt-shell class=collapse><a href=https://www.codetab.org/tutorial/gwt/shell/finsshell/ class="toc-page dropdown-item text-wrap text-muted">UIBinder and Custom Widget
</a><a href=https://www.codetab.org/tutorial/gwt/shell/contentpanel/ class="toc-page dropdown-item text-wrap text-muted">TabLayoutPanel
</a><a href=https://www.codetab.org/tutorial/gwt/shell/gwt-logging/ class="toc-page dropdown-item text-wrap text-muted">Logging</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-menu id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Menu</a><div id=tutorial-gwt-menu class=collapse><a href=https://www.codetab.org/tutorial/gwt/menu/menu/ class="toc-page dropdown-item text-wrap text-muted">ClientBundle
</a><a href=https://www.codetab.org/tutorial/gwt/menu/menu-parts/ class="toc-page dropdown-item text-wrap text-muted">Anchor
</a><a href=https://www.codetab.org/tutorial/gwt/menu/gwt-eventbus-events/ class="toc-page dropdown-item text-wrap text-muted">EventBus
</a><a href=https://www.codetab.org/tutorial/gwt/menu/gwt-eventbus-example/ class="toc-page dropdown-item text-wrap text-muted">EventBus Example</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-model id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Modle</a><div id=tutorial-gwt-model class=collapse><a href=https://www.codetab.org/tutorial/gwt/model/model/ class="toc-page dropdown-item text-wrap text-muted">Model</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-content id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Content</a><div id=tutorial-gwt-content><a href=https://www.codetab.org/tutorial/gwt/content/content/ class="toc-page dropdown-item text-wrap text-muted">GWT Tutorial - Content
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-celltable/ class="toc-page dropdown-item text-wrap text-muted">CellTable
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-autosuggest/ class="toc-page dropdown-item text-wrap text-muted">SuggestBox
</a><a href=https://www.codetab.org/tutorial/gwt/content/titlepanel/ class="toc-page dropdown-item text-wrap text-muted">TitlePanel
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-uifactory/ class="toc-page dropdown-item text-wrap text-muted">UiFactory
</a><a href=https://www.codetab.org/tutorial/gwt/content/factpanel/ class="toc-page dropdown-item text-wrap text-danger">FactPanel
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/ class="toc-page dropdown-item text-wrap text-muted">DisclosurePanel
</a><a href=https://www.codetab.org/tutorial/gwt/content/toolbar/ class="toc-page dropdown-item text-wrap text-muted">Toolbar
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-datagrid/ class="toc-page dropdown-item text-wrap text-muted">DataGrid
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-chart/ class="toc-page dropdown-item text-wrap text-muted">Google Chart
</a><a href=https://www.codetab.org/tutorial/gwt/content/gwt-close-tabs/ class="toc-page dropdown-item text-wrap text-muted">Close Tabs</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-rpc id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>RPC</a><div id=tutorial-gwt-rpc class=collapse><a href=https://www.codetab.org/tutorial/gwt/rpc/gwt-remote-procedure-calls/ class="toc-page dropdown-item text-wrap text-muted">RPC
</a><a href=https://www.codetab.org/tutorial/gwt/rpc/rest-of-rpc/ class="toc-page dropdown-item text-wrap text-muted">Rest of RPC</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-database id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Database</a><div id=tutorial-gwt-database class=collapse><a href=https://www.codetab.org/tutorial/gwt/database/setup-database/ class="toc-page dropdown-item text-wrap text-muted">Database Setup
</a><a href=https://www.codetab.org/tutorial/gwt/database/persist/ class="toc-page dropdown-item text-wrap text-muted">JDO Persistence
</a><a href=https://www.codetab.org/tutorial/gwt/database/retrieve/ class="toc-page dropdown-item text-wrap text-muted">JDO and Hibernate
</a><a href=https://www.codetab.org/tutorial/gwt/database/gwt-dao/ class="toc-page dropdown-item text-wrap text-muted">DAO</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-google-app-engine id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Goolge App Engine</a><div id=tutorial-gwt-google-app-engine class=collapse><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/google-app-engine/ class="toc-page dropdown-item text-wrap text-muted">Google App Engine
</a><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-deploy/ class="toc-page dropdown-item text-wrap text-muted">App Engine Deploy
</a><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-manage-data/ class="toc-page dropdown-item text-wrap text-muted">GAE Data Upload
</a><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-cache/ class="toc-page dropdown-item text-wrap text-muted">App Engine Cache
</a><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-task-queue/ class="toc-page dropdown-item text-wrap text-muted">App Engine Task Queue
</a><a href=https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-backends/ class="toc-page dropdown-item text-wrap text-muted">GAE Backends</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-openshift id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>OpenShift</a><div id=tutorial-gwt-openshift class=collapse><a href=https://www.codetab.org/tutorial/gwt/openshift/openshift/ class="toc-page dropdown-item text-wrap text-muted">OpenShift Setup
</a><a href=https://www.codetab.org/tutorial/gwt/openshift/prepare-openshift-project/ class="toc-page dropdown-item text-wrap text-muted">Prepare Project
</a><a href=https://www.codetab.org/tutorial/gwt/openshift/openshift-configure/ class="toc-page dropdown-item text-wrap text-muted">Configure
</a><a href=https://www.codetab.org/tutorial/gwt/openshift/openshift-build-deploy/ class="toc-page dropdown-item text-wrap text-muted">Build and Deploy
</a><a href=https://www.codetab.org/tutorial/gwt/openshift/openshift-development/ class="toc-page dropdown-item text-wrap text-muted">Development
</a><a href=https://www.codetab.org/tutorial/gwt/openshift/openshift-online-v3-deployment/ class="toc-page dropdown-item text-wrap text-muted">OpenShift Online V3 Deployment</a></div></div><div class="dropdown show mt-2"><a class="no-collapse-on-click card-link toc-section text-dark" href=#tutorial-gwt-build id=dropdownheader data-toggle=collapse aria-haspopup=true aria-expanded=false>Apache Ivy</a><div id=tutorial-gwt-build class=collapse><a href=https://www.codetab.org/tutorial/gwt/build/apache-ivy/ class="toc-page dropdown-item text-wrap text-muted">Apache Ivy</a></div></div></div></div></nav></nav></div></aside><div id=contentbar class=col-md-8><div id=share class="row justify-content-end"><div title=twitter><a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/gwt/content/factpanel/&amp;text=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-twitter-squared text-secondary"></i></a></div><div title=facebook><a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/gwt/content/factpanel/&amp;t=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-facebook-squared text-secondary"></i></a></div><div title=linkedin><a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/gwt/content/factpanel/&amp;title=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-linkedin-squared text-secondary"></i></a></div><div title=email><a href="mailto:?subject=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/gwt/content/factpanel/" target=_blank rel=noopener><i class="icon-mail-squared text-secondary"></i></a></div><div title=whatsapp><a href="https://web.whatsapp.com/send?text=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab%20https://www.codetab.org/tutorial/gwt/content/factpanel/" target=_blank rel=noopener><i class="icon-whatsapp text-secondary"></i></a></div><div title=reddit><a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/gwt/content/factpanel/&amp;title=FactPanel%20-%20GWT%20Tutorial%20-%20CodeTab" target=_blank rel=noopener><i class="icon-reddit-alien text-secondary"></i></a></div><i class="icon-blank ctab-transparent"></i></div><div class=row><main id=content class="col-md-11 post-basic"><h2 id=65factpanel>6.5. FactPanel</h2><p>FactPanel displays FactItem in a HorizontalPanel as shown in figure.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/gwt/media/factpanel.png alt=FactPanel></figure><h6 id=figure64factpanel>Figure 6.4. FactPanel</h6><p><code>FactItem</code> is a widget with two Labels, one for text and another for
value, and FactPanel holds the FactItems. Instead of UiBinder template,
<code>FactPanel</code> and <code>FactItem</code> directly extends <code>HorizontalPanel</code>.</p><p><code>in.fins.client.widget/FactItem.java</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FactItem</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>HorizontalPanel</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=n>Label</span><span class=w> </span><span class=n>label</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>matchs</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=n>Label</span><span class=w> </span><span class=n>value</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>category</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@UiConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=nf>FactItem</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>category</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>text</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>match</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>this</span><span class=p>.</span><span class=na>category</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>category</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>this</span><span class=p>.</span><span class=na>matchs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>match</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&#34;[,]+&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>label</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Label</span><span class=p>(</span><span class=n>text</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>label</span><span class=p>.</span><span class=na>setStyleName</span><span class=p>(</span><span class=s>&#34;fins-KeyValuePanel-Label-Key&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>add</span><span class=p>(</span><span class=n>label</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Label</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>value</span><span class=p>.</span><span class=na>setStyleName</span><span class=p>(</span><span class=s>&#34;fins-KeyValuePanel-Label-Value&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>add</span><span class=p>(</span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>....</span><span class=w>
</span></span></span></code></pre></div><p><code>FactItem</code> uses @UiConstructor annotation for constructor as Snapshot&rsquo;s
UiBinder requires this to instantiate the FactItem.</p><p>Following UI template, in <code>Snapshot.ui.xml</code>, instantiate FactPanel and
FactItems.</p><p><code>in.fins.client.content/Snapshot.ui.xml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-XML data-lang=XML><span class=line><span class=cl>        <span class=nt>&lt;g:layer</span> <span class=na>left=</span><span class=s>&#34;2%&#34;</span> <span class=na>width=</span><span class=s>&#34;96%&#34;</span> <span class=na>top=</span><span class=s>&#39;6%&#39;</span> <span class=na>height=</span><span class=s>&#39;7%&#39;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;f:FactPanel&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;FV&#34;</span> <span class=na>match=</span><span class=s>&#34;FV&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;BV&#34;</span> <span class=na>match=</span><span class=s>&#34;BV&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;High/Low&#34;</span> 
</span></span><span class=line><span class=cl>                                                <span class=na>match=</span><span class=s>&#34;52 Wk High,52 Wk Low&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;EPS&#34;</span> <span class=na>match=</span><span class=s>&#34;EPS&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;DIV&#34;</span> <span class=na>match=</span><span class=s>&#34;DIV (%)&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;DY&#34;</span> <span class=na>match=</span><span class=s>&#34;DY (%)&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;MC&#34;</span> <span class=na>match=</span><span class=s>&#34;Mk.Cap&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;f:FactItem</span> <span class=na>category=</span><span class=s>&#34;Quote&#34;</span> <span class=na>text=</span><span class=s>&#34;Ind. PE&#34;</span> <span class=na>match=</span><span class=s>&#34;Ind. PE&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/f:FactPanel&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/g:layer&gt;</span>
</span></span></code></pre></div><p>UiBinder creates FactItems through constructor marked with
@UiConstructor and then add them to <code>FactPanel</code> as child widgets and
then add FactPanel to layer of <code>LayoutPanel</code>. This is the first time we
are adding custom widget as the children of another custom widget. This
is allowed only if parent widget, in this case FactPanel, implements
<code>HasWidgets</code> interface. Then how come UiBinder is able to add FactItem
to FactPanel without implementing HasWidgets and reasons being,
<code>FactPanel</code> extends <code>HorizontalPanel</code> which implements HasWidgets. In
case we use UiBinder for FactPanel then we have to implement HasWidgets,
and we will do this for another widget in a later section.</p><p>UI entry <code>&lt;f:FactItem category="Quote" text="High/Low" match="52 Wk High,52 Wk Low" /></code> is bit different which has two keys in match, 52 Wk
High and 52 Wk Low delimited with a comma. This FactItem takes the value
from two Facts and displays them in a single FactItem. Constructor
splits string variable, match, into <code>String</code>[] and which is used later
to match against Fact with key &ldquo;52 Wk High&rdquo; and another Fact with &ldquo;52 Wk
Low&rdquo;.</p><p>Next we have to pass the selected <code>Symbol</code> to <code>FactPanel</code> so that it
displays the fact values.</p><div>&nbsp;</div><div>&nbsp;</div><h5 id=symbolevent-and-symbolaction>SymbolEvent and SymbolAction</h5><p>When user selects a name in <code>AutoSuggest</code>, it has to fetch the <code>Symbol</code>
from <code>SymbolDatabase</code> and fire a <code>SymbolEvent</code> so that any interested
client may retrieve the Symbol from SymbolEvent. Symbol holds data in
<code>DataGroup</code>, <code>Data</code> and <code>Fact</code>, and FactPanel has to iterate over the
received Symbol, and display the Facts.</p><p>AutoSuggest is a component of view layer whereas, task of fetching a
Symbol is an aspect of domain/model layer and therefore dealing with
SymbolEvent in AutoSuggest is not a good design practice, and instead a
mediator has to handle this task. <code>SymbolAction</code> acts as mediator
between AutoSuggest and clients like FactPanel, and it fetches a Symbol
from server, encapsulate it in SymbolEvent and fires the event.</p><p> </p><p>Propagation of events from AutoSuggest to FactPanel happens in two
stages as shown in the figure. AutoSuggest fires NameEvent on name
selection and SymbolAction handles this event, and once SymbolAction
fetches Symbol it fires a SymbolEvent, and FactPanel handles it to
display facts.</p><figure class=text-center><img class="lazy img-fluid" data-src=/tutorial/gwt/media/fp-events.png alt="Event Propagation"></figure><h6 id=figure65event-propagation>Figure 6.5. Event Propagation</h6><p>First instantiate SymbolAction and let it handle NameEvent.</p><p><code>in.fins.client.content/Snapshot.java</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=nf>Snapshot</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=p>....</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>SymbolAction</span><span class=w> </span><span class=n>symbolAction</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SymbolAction</span><span class=p>(</span><span class=n>getFilterMap</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>symbolAction</span><span class=p>.</span><span class=na>setEventSource</span><span class=p>(</span><span class=k>this</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>EventBus</span><span class=p>.</span><span class=na>get</span><span class=p>().</span><span class=na>addHandlerToSource</span><span class=p>(</span><span class=n>NameEvent</span><span class=p>.</span><span class=na>TYPE</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>symbolAction</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>....</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>[]&gt;</span><span class=w> </span><span class=nf>getFilterMap</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>[]&gt;</span><span class=w> </span><span class=n>filterMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>[]&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>filterMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;Quote&#34;</span><span class=p>,</span><span class=w> </span><span class=n>getFilter</span><span class=p>(</span><span class=s>&#34;Quote&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>filterMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=nf>getFilter</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>cat</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cat</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;Quote&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s>&#34;Price&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;PB&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;P/E&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;BV&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;DY (%)&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                        </span><span class=s>&#34;DIV (%)&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;FV&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;EPS&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Mk.Cap&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Ind. PE&#34;</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                                        </span><span class=s>&#34;52 Wk High&#34;</span><span class=p>,</span><span class=s>&#34;52 Wk Low&#34;</span><span class=w> </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><code>Snapshot</code> creates <code>SymbolAction</code> and adds it as handle for <code>NameEvent</code>.
Snapshot is set as eventSource for both <code>SymbolAction</code> and
<code>AutoSuggest</code>. Static method <code>Snapshot.getFilter()</code> returns keys and
<code>SymbolDatabase</code> generate Facts for those keys. Initially getFilter()
returns keys for only one category i.e. Quote, as FactPanel displays
Facts from that category, and later more categories are added. With this
code, SymbolAction receives the NameEvent and fetches Symbol which
contains Facts as specified by <code>filterMap()</code>.</p><p>Next job is to fire SymbolEvent from SymbolAction and let the FactPanel
handle the SymbolEvent.</p><p><code>in.fins.client.action/SymbolAction.java</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>onNameChange</span><span class=p>(</span><span class=n>NameEvent</span><span class=w> </span><span class=n>nameEvent</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>getSymbol</span><span class=p>(</span><span class=n>nameEvent</span><span class=p>.</span><span class=na>getName</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>getSymbol</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>symbolName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Symbol</span><span class=w> </span><span class=n>symbol</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SymbolDatabase</span><span class=p>.</span><span class=na>getSymbol</span><span class=p>(</span><span class=n>symbolName</span><span class=p>,</span><span class=w> </span><span class=n>filterMap</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>category</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>SymbolHelper</span><span class=p>.</span><span class=na>getCategories</span><span class=p>(</span><span class=n>symbol</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>SymbolHelper</span><span class=p>.</span><span class=na>setPositionDate</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span><span class=w> </span><span class=n>category</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                        </span><span class=n>SymbolHelper</span><span class=p>.</span><span class=na>getLastDate</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span><span class=w> </span><span class=n>category</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>EventBus</span><span class=p>.</span><span class=na>get</span><span class=p>().</span><span class=na>fireEventFromSource</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                               </span><span class=k>new</span><span class=w> </span><span class=n>SymbolEvent</span><span class=p>(</span><span class=n>symbol</span><span class=p>),</span><span class=n>eventSource</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>log</span><span class=p>.</span><span class=na>fine</span><span class=p>(</span><span class=s>&#34;Fired SymbolEvent &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>symbol</span><span class=p>.</span><span class=na>getName</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><code>in.fins.client.widget/FactPanel.java</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>onSymbolChange</span><span class=p>(</span><span class=n>SymbolEvent</span><span class=w> </span><span class=n>event</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>setVisible</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Symbol</span><span class=w> </span><span class=n>symbol</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>event</span><span class=p>.</span><span class=na>getSymbol</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>getWidgetCount</span><span class=p>();</span><span class=w> </span><span class=n>c</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>Widget</span><span class=w> </span><span class=n>widget</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getWidget</span><span class=p>(</span><span class=n>c</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>widget</span><span class=w> </span><span class=k>instanceof</span><span class=w> </span><span class=n>FactItem</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>FactItem</span><span class=w> </span><span class=n>item</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>FactItem</span><span class=p>)</span><span class=w> </span><span class=n>widget</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>Date</span><span class=w> </span><span class=n>date</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SymbolHelper</span><span class=p>.</span><span class=na>getPositionDate</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                </span><span class=n>item</span><span class=p>.</span><span class=na>getCategory</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Fact</span><span class=o>&gt;</span><span class=w> </span><span class=n>facts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SymbolHelper</span><span class=p>.</span><span class=na>getFacts</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                </span><span class=n>item</span><span class=p>.</span><span class=na>getCategory</span><span class=p>(),</span><span class=w> </span><span class=n>date</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>item</span><span class=p>.</span><span class=na>setValue</span><span class=p>(</span><span class=n>getValue</span><span class=p>(</span><span class=n>facts</span><span class=p>,</span><span class=w> </span><span class=n>item</span><span class=p>.</span><span class=na>getMatchs</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><code>ComplexPanel.getWidget()</code> returns the children, and if it is the
instance of FactItem then its value is set. SymbolHelper method is used
to get the List&lt;Fact>. Private method <code>getValue()</code> on match returns
the value from the List&lt;Fact>. FactPanel is hidden with
<code>setVisible(false)</code> in the constructor and made visible only when
SymbolEvent is received else FactPanel is visible even before user
selects a name.</p><p>Finally, make FactPanel as a handler for SymbolEvent</p><p><code>in.fins.client.content/Snapshot.java</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=w>        </span><span class=nd>@UiFactory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>FactPanel</span><span class=w> </span><span class=nf>factPanelFactory</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>FactPanel</span><span class=w> </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>FactPanel</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>EventBus</span><span class=p>.</span><span class=na>get</span><span class=p>().</span><span class=na>addHandlerToSource</span><span class=p>(</span><span class=n>SymbolEvent</span><span class=p>.</span><span class=na>TYPE</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>fp</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>fp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><div>&nbsp;</div><div>&nbsp;</div><h2 id=filtermap>FilterMap</h2><p>SymbolDatabase populates the Symbol with Fact based on keys in FilterMap
and this makes the job of minting new Symbols with random values quite
easy. Its real purpose is not that instead it reduces the data
transmitted over the network. In actual data store, there are more than
200 financial data points for each symbol. In case, SymbolAction fetches
the unfiltered Symbol with all these data point then bloated Symbol uses
unnecessary bandwidth. Instead, FilterMap is sent to sever to trim down
the symbol before transmission to save network resources but more about
this in the next part when we cover the RPC calls.</p><p>This pattern of event handling is used extensively for the custom widget
from now onwards.</p></main></div></div><aside id=sidebar-right class=col-md-1><div class="row my-5 justify-content-center"></div></aside></div></div><footer class="container-fluid mt-5"><div class=row><div class="col ml-auto"><div class="row mb-1 ml-2"><a class=text-muted href=/privacy-policy>Privacy</a></div><div class="row text-muted mb-2 ml-2"><span>&copy; 2019 &#183;Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span></div></div><div class="col mr-auto"><span class=float-right><a href=# id=back_to_top><i class="icon-up-open h1 text-secondary"></i></a></span></div></div></footer><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script src=/js/vendor.min.c32ad1c7e87da9243fe3a4ff30c9040737545641e3a0a16a1cde4d62759f9fea.js></script></body></html>