<!DOCTYPE html>
<html lang="en-us">

<head><meta charset="utf-8">
<meta name="description" content="GWT DisclosurePanel contains header and a content panel, that discloses the underlying content when a user clicks the header.">
<meta name="author" content="Maithilish">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42139846-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-42139846-3');
</script>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://www.codetab.org/"
        },
        "articleSection" : "tutorial",
        "name" : "DisclosurePanel - GWT Tutorial - CodeTab",
        "headline" : "DisclosurePanel - GWT Tutorial - CodeTab",
        "description" : "GWT DisclosurePanel contains header and a content panel, that discloses the underlying content when a user clicks the header.",
        "inLanguage" : "en",
        "author" : "Maithilish",
        "creator" : "Maithilish",
        "publisher": "Maithilish",
        "copyrightHolder" : "Maithilish",
        "copyrightYear" : "2019",
        "datePublished": "2019-01-10 17:51:00 +0530 IST",
        "dateModified" : "2019-01-10 17:51:00 +0530 IST",
        "url" : "/tutorial/gwt/content/gwt-disclosepanel/",
        "wordCount" : "1097",
        "keywords" : [ "gwt disclosurepanel","Blog" ]
    }
</script>
<link rel="icon" href="/favicon.ico">






<link rel="stylesheet" href="/css/vendor.min.06af1451a3c5b3b70a0c0bd7be26092e20e9c31251c08d44dbe1486a9a2a414c.css" integrity="sha256-Bq8UUaPFs7cKDAvXviYJLiDpwxJRwI1E2&#43;FIapoqQUw=">

<title>DisclosurePanel - GWT Tutorial - CodeTab</title></head>

<body id="top"><header><nav id="navbar-main" class="navbar fixed-top navbar-light navbar-expand-lg bg-white border-bottom shadow-sm">

    <div class="container-fluid">

        
        <a class="navbar-brand" href="/">Codetab</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbar">

            
            
            <ul class="navbar-nav ml-auto">
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#tutorials"  >
                        
                        <span>Home</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#projects"  >
                        
                        <span>Projects</span>
                        
                    </a>
                </li>

                
                

                

                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/post"  >
                        
                        <span>Posts</span>
                        
                    </a>
                </li>

                
                

                

                
                
                
                
                

                <li class="nav-item">
                    <a class="nav-link" href="/#about"  >
                        
                        <span>About</span>
                        
                    </a>
                </li>

                
                

            </ul>

        </div>
    </div>
</nav></header>

<div class="container-fluid">
  <div class="row">&nbsp;</div>
  <div class="row">
    <aside id="sidebar" class="col-md-4">
      <div class="row"><nav id="navbar-side" class="bg-light text-secondary">
        
    
    

    

    
    

    

    <h4 class="text-muted bg-white pl-2">GWT Tutorial</h4>

    <nav class="navbar navbar-light bg-white navbar-expand-md">

        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#bookmenu"
            aria-controls="bookmenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bookmenu">
            <div>
                
                









<div id="GWT Tutorial - Complete Project - CodeTab">
    
    <div>
        <a href="https://www.codetab.org/tutorial/gwt/introduction/" class="toc-page text-muted ">
            Introduction
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/gwt/install/" class="toc-page text-muted ">
            Install GWT in Eclipse
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/gwt/create-project/" class="toc-page text-muted ">
            Project Setup
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/gwt/gwt-project-code/" class="toc-page text-muted ">
            GWT Project Code
        </a>
    </div>
    
    <div>
        <a href="https://www.codetab.org/tutorial/gwt/gwt-demo/" class="toc-page text-muted ">
            GWT Tutorial Demo
        </a>
    </div>
    
</div>







<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-shell" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Shell
    </a>
    
    <div id="tutorial-gwt-shell" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/shell/finsshell/" class="toc-page dropdown-item text-muted">
            UIBinder and Custom Widget
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/shell/contentpanel/" class="toc-page dropdown-item text-muted">
            TabLayoutPanel
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/shell/gwt-logging/" class="toc-page dropdown-item text-muted">
            Logging
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-menu" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Menu
    </a>
    
    <div id="tutorial-gwt-menu" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/menu/menu/" class="toc-page dropdown-item text-muted">
            ClientBundle
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/menu/menu-parts/" class="toc-page dropdown-item text-muted">
            Anchor 
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/menu/gwt-eventbus-events/" class="toc-page dropdown-item text-muted">
            EventBus
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/menu/gwt-eventbus-example/" class="toc-page dropdown-item text-muted">
            EventBus Example
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-model" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Modle
    </a>
    
    <div id="tutorial-gwt-model" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/model/model/" class="toc-page dropdown-item text-muted">
            Model
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-content" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Content
    </a>
    
    <div id="tutorial-gwt-content" class="">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/content/" class="toc-page dropdown-item text-muted">
            GWT Tutorial - Content
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-celltable/" class="toc-page dropdown-item text-muted">
            CellTable
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-autosuggest/" class="toc-page dropdown-item text-muted">
            SuggestBox
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/titlepanel/" class="toc-page dropdown-item text-muted">
            TitlePanel
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-uifactory/" class="toc-page dropdown-item text-muted">
            UiFactory
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/factpanel/" class="toc-page dropdown-item text-muted">
            FactPanel
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/" class="toc-page dropdown-item text-danger">
            DisclosurePanel
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/toolbar/" class="toc-page dropdown-item text-muted">
            Toolbar
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-datagrid/" class="toc-page dropdown-item text-muted">
            DataGrid
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-chart/" class="toc-page dropdown-item text-muted">
            Google Chart
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/content/gwt-close-tabs/" class="toc-page dropdown-item text-muted">
            Close Tabs
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-rpc" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        RPC
    </a>
    
    <div id="tutorial-gwt-rpc" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/rpc/gwt-remote-procedure-calls/" class="toc-page dropdown-item text-muted">
            RPC
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/rpc/rest-of-rpc/" class="toc-page dropdown-item text-muted">
            Rest of RPC
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-database" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Database
    </a>
    
    <div id="tutorial-gwt-database" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/database/setup-database/" class="toc-page dropdown-item text-muted">
            Database Setup
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/database/persist/" class="toc-page dropdown-item text-muted">
            JDO Persistence 
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/database/retrieve/" class="toc-page dropdown-item text-muted">
            JDO and Hibernate
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/database/gwt-dao/" class="toc-page dropdown-item text-muted">
            DAO
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-google-app-engine" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Goolge App Engine
    </a>
    
    <div id="tutorial-gwt-google-app-engine" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/google-app-engine/" class="toc-page dropdown-item text-muted">
            Google App Engine
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-deploy/" class="toc-page dropdown-item text-muted">
            App Engine Deploy
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-manage-data/" class="toc-page dropdown-item text-muted">
            GAE Data Upload
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-cache/" class="toc-page dropdown-item text-muted">
            App Engine Cache
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-task-queue/" class="toc-page dropdown-item text-muted">
            App Engine Task Queue
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/google-app-engine/app-engine-backends/" class="toc-page dropdown-item text-muted">
            GAE Backends
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-openshift" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        OpenShift
    </a>
    
    <div id="tutorial-gwt-openshift" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/openshift/" class="toc-page dropdown-item text-muted">
            OpenShift Setup
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/prepare-openshift-project/" class="toc-page dropdown-item text-muted">
            Prepare Project
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/openshift-configure/" class="toc-page dropdown-item text-muted">
            Configure
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/openshift-build-deploy/" class="toc-page dropdown-item text-muted">
            Build and Deploy
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/openshift-development/" class="toc-page dropdown-item text-muted">
            Development
        </a>
        
        
        <a href="https://www.codetab.org/tutorial/gwt/openshift/openshift-online-v3-deployment/" class="toc-page dropdown-item text-muted">
            OpenShift Online V3 Deployment
        </a>
        
        
        
        
    </div>
</div>




<div class="dropdown show mt-2">
    <a class="no-collapse-on-click card-link toc-section text-dark" href="#tutorial-gwt-build" id="dropdownheader"
        data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
        Apache Ivy
    </a>
    
    <div id="tutorial-gwt-build" class="collapse">
        
        
        <a href="https://www.codetab.org/tutorial/gwt/build/apache-ivy/" class="toc-page dropdown-item text-muted">
            Apache Ivy
        </a>
        
        
        
        
    </div>
</div>



                
            </div>
        </div>
    </nav>

</nav>

</div>
      <div class="row my-5 justify-content-center">
<div>&nbsp;</div>


<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="8963022093"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>
</div>
    </aside>
    <div id="contentbar" class="col-md-8">
      <div id="share" class="row justify-content-end">





<div title=twitter>
    <a href="https://twitter.com/intent/tweet?url=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/&amp;text=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-twitter-squared text-secondary"></i>
    </a>
</div>




<div title=facebook>
    <a href="https://www.facebook.com/sharer.php?u=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/&amp;t=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-facebook-squared text-secondary"></i>
    </a>
</div>




<div title=linkedin>
    <a href="https://www.linkedin.com/shareArticle?url=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/&amp;title=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-linkedin-squared text-secondary"></i>
    </a>
</div>




<div title=email>
    <a href="mailto:?subject=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab&amp;body=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/" target="_blank" rel="noopener">
        <i class="icon-mail-squared text-secondary"></i>
    </a>
</div>




<div title=whatsapp>
    <a href="https://web.whatsapp.com/send?text=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab%20https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/" target="_blank" rel="noopener">
        <i class="icon-whatsapp text-secondary"></i>
    </a>
</div>




<div title=reddit>
    <a href="https://reddit.com/submit?url=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/&amp;title=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-reddit-alien text-secondary"></i>
    </a>
</div>




<div title=weibo>
    <a href="https://service.weibo.com/share/share.php?url=https://www.codetab.org/tutorial/gwt/content/gwt-disclosepanel/&amp;title=DisclosurePanel%20-%20GWT%20Tutorial%20-%20CodeTab" target="_blank" rel="noopener">
        <i class="icon-weibo text-secondary"></i>
    </a>
</div>




<i class="icon-blank ctab-transparent"></i></div>
      <div class="row">
        <main id="content" class="col-md-11 post-basic">
          

<h2 id="6-6-factdisclosepanel">6.6. FactDisclosePanel</h2>

<p>FactDisclosePanel shows or hide the Price, PB and PE graphs.</p>

<figure class="text-center" >
  <img class="lazy" data-src="/tutorial/gwt/media/factdisclosepanel.png" alt="FactDisclosePanel" />
</figure>


<h6 id="figure-6-6-factdisclosepanel">Figure 6.6. FactDisclosePanel</h6>

<p><code>FactDisclosePanel</code> (FDP) uses two GWT widgets, GWT <code>DisclosurePanel</code>
and inner <code>CaptionPanel</code>. <code>DisclosurePanel</code>, contains header and a
content panel, that discloses the underlying content when a user clicks
the header, and <code>CaptionPanel</code> encloses its contents with border and a
caption on upper left corner.</p>

<p><code>in.fins.client.widget/FactDisclosePanel.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="nd">@UiField</span><span class="o">(</span><span class="n">provided</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
        <span class="n">DisclosurePanel</span> <span class="n">dPanel</span><span class="o">;</span>
        <span class="nd">@UiField</span>
        <span class="n">CaptionPanel</span> <span class="n">cPanel</span><span class="o">;</span>

        <span class="nd">@UiConstructor</span>
        <span class="kd">public</span> <span class="nf">FactDisclosePanel</span><span class="o">(</span><span class="n">String</span> <span class="n">header</span><span class="o">,</span> <span class="n">String</span> <span class="n">caption</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">FinsResources</span> <span class="n">images</span> <span class="o">=</span> <span class="n">FinsResources</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">;</span>
                <span class="n">dPanel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DisclosurePanel</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">barChart</span><span class="o">(),</span> <span class="n">images</span><span class="o">.</span><span class="na">chart</span><span class="o">(),</span> <span class="n">header</span><span class="o">);</span>
                <span class="n">initWidget</span><span class="o">(</span><span class="n">binder</span><span class="o">.</span><span class="na">createAndBindUi</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
                <span class="n">cPanel</span><span class="o">.</span><span class="na">setCaptionText</span><span class="o">(</span><span class="n">caption</span><span class="o">);</span>
                <span class="n">dPanel</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="n">cPanel</span><span class="o">);</span>
                <span class="n">setVisible</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="o">}</span></code></pre></div>
<p>Instead of stock header, we want custom header for <code>DisclosurePanel</code>,
and for this we use <code>@UiField(provided = true)</code> annotation for
<code>disclosurePanel</code> field and instantiate it before calling UiBinder.</p>

<p><code>CaptionPanel</code> is set as content of DisclosurePanel to which child
widgets are added by implementing the HasWidget interface.</p>

<p>Following Ui declaration adds FDP to Snapshot.</p>

<p><code>in.fins.client.content/Snapshot.ui.xml</code></p>
<div class="highlight"><pre class="chroma"><code class="language-XML" data-lang="XML">        <span class="nt">&lt;g:row&gt;</span>
           <span class="nt">&lt;g:customCell&gt;</span>
                <span class="nt">&lt;f:FactDisclosePanel</span> <span class="na">header=</span><span class="s">&#34;Price&#34;</span> <span class="na">caption=</span><span class="s">&#34;Price&#34;</span> <span class="na">category=</span><span class="s">&#34;Quote&#34;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;f:ChartPanel</span> <span class="na">title=</span><span class="s">&#34;Price&#34;</span> <span class="na">key=</span><span class="s">&#34;Price&#34;</span> <span class="na">width=</span><span class="s">&#34;450px&#34;</span> 
                                      <span class="na">height=</span><span class="s">&#34;220px&#34;</span> <span class="na">rangeSelector=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/f:FactDisclosePanel&gt;</span>
           <span class="nt">&lt;/g:customCell&gt;</span>

           <span class="c">&lt;!-- likewise for PE and PB --&gt;</span>

        <span class="nt">&lt;/g:row&gt;</span></code></pre></div>
<p>This UI declaration adds FDP to Snapshot and a ChartPanel to FDP and
ChartPanel uses attributes width, rangeSelector etc to customize the
chart.</p>



<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>



<h5 id="haswidgets">HasWidgets</h5>

<p>To enable custom widget to hold other widgets, we have to implement
<code>HasWidget</code> interface, and FDP has to hold ChartPanel and for this it
implements <code>HasWidget</code>. This interface enables the widget to add or
remove child widgets and to enumerate the widgets it contains. It
defines following methods.</p>

<ul>
<li><p><code>add(Widget w)</code> - adds a child widget.</p></li>

<li><p><code>clear()</code> - removes all child widgets.</p></li>

<li><p><code>iterator()</code> - returns iterator for the contained widgets.</p></li>

<li><p><code>remove(Widget w)</code> - removes a child widget.</p></li>
</ul>

<p><code>in.fins.client.widget/FactDisclosePanel.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Widget</span> <span class="n">w</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">cPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">w</span><span class="o">);</span> 

                <span class="c1">// additional logic explained later              
</span><span class="c1"></span>        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clear</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">cPanel</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">cPanel</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">remove</span><span class="o">(</span><span class="n">Widget</span> <span class="n">w</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">cPanel</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
        <span class="o">}</span></code></pre></div>
<p>In these methods, we add (as well as remove and clear) ChartPanel widget
to CaptionPanel.</p>

<h5 id="datagroupevent-and-datagroupaction">DataGroupEvent and DataGroupAction</h5>

<p><code>SymbolEvent</code> that was used earlier provides data typically for a date
for the entire symbol, but to plot the graph we require data for all
dates between two periods for specific Fact. For example, to plot Price
graph we require Facts which has key Price for a range of dates.</p>

<p><code>DataGroupEvent</code> holds a DataGroup for a specific category with data for
all dates. For price graph, it holds <code>DataGroup</code> for Quote category, and
from DataGroup we can get <code>List&lt;Data&gt;</code> and each Data contains
List&lt;Fact&gt; which has Price Fact.</p>

<p><code>DataGroupAction</code> fetches <code>DataGroup</code> of a category and fires
<code>DataGroupEvent</code>. Like SymbolAction, which was covered earlier,
DataGroupAction is a mediator between two widgets and is responsible to
fetch DataGroup from datastore.</p>



<div>&nbsp;</div>

<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-1281079745125126"
     data-ad-slot="6135368983"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>&nbsp;</div>




<h5 id="flow-of-events">Flow of events</h5>

<p>Flow of event is as shown in next figure.</p>

<figure class="text-center" >
  <img class="lazy" data-src="/tutorial/gwt/media/fdp-events.png" alt="Flow of Events" />
</figure>


<h6 id="figure-6-7-flow-of-events">Figure 6.7. Flow of Events</h6>

<p>Event flow happens in two stages. Initially, when user selects a name,
<code>SymbolAction</code> fires a <code>SymbolEvent</code> which is handled by
<code>DataGroupAction</code> and assigns this symbol to a field for later use. This
event is common for the entire Snapshot page, and consumed by other
actions as well. Later when user expands FDP, it generates an
<code>OpenEvent</code> and <code>DataGroupAction</code> handles this event to fetch
<code>DataGroup</code> for the symbol held by its field and fires <code>DataGroupEvent</code>.
This event is propagated to FDP and then to its child widget
<code>ChartPanel</code> which uses DataGroup&rsquo;s Data and Facts to plot the graph.</p>

<p>DataGroupAction fetches DataGroup when user expands the FDP, and with
the help of boolean flag, <code>symbolChanged</code>, reuses the DataGroup on
subsequent clicks until user selects another symbol.</p>

<p><code>in.fins.client.action/DataGroupAction.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">symbolChanged</span> <span class="o">==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="n">dataGroup</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">log</span><span class="o">.</span><span class="na">fine</span><span class="o">(</span><span class="s">&#34;No Symbol change. Using existing dataGroup&#34;</span><span class="o">);</span>
                        <span class="n">EventBus</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">fireEventFromSource</span><span class="o">(</span><span class="k">new</span> <span class="n">DataGroupEvent</span><span class="o">(</span><span class="n">dataGroup</span><span class="o">),</span>
                                        <span class="n">eventSource</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="n">DataGroup</span> <span class="n">newDataGroup</span> <span class="o">=</span> <span class="n">SymbolDatabase</span><span class="o">.</span><span class="na">getDataGroup</span><span class="o">(</span>
                                        <span class="n">symbol</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">category</span><span class="o">,</span> <span class="n">filter</span><span class="o">);</span>
                        <span class="n">log</span><span class="o">.</span><span class="na">fine</span><span class="o">(</span><span class="s">&#34;Symbol Changed. Fetching dataGroup&#34;</span><span class="o">);</span>

          <span class="o">....</span></code></pre></div>
<h5 id="wiring-all-of-them">Wiring all of them</h5>

<p>UiFactory of FDP and ChartPanel wire them with <code>DataGroupAction</code>.</p>

<p><code>in.fins.client.content/Snapshot.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="nd">@UiFactory</span>
        <span class="kd">public</span> <span class="n">FactDisclosePanel</span> <span class="nf">factDisclosePanelFactory</span><span class="o">(</span><span class="n">String</span> <span class="n">header</span><span class="o">,</span>
                        <span class="n">String</span> <span class="n">caption</span><span class="o">,</span> <span class="n">String</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">DataGroupAction</span><span class="o">&lt;</span><span class="n">DisclosurePanel</span><span class="o">&gt;</span> <span class="n">dataGroupAction</span> <span class="o">=</span> 
                      <span class="k">new</span> <span class="n">DataGroupAction</span><span class="o">&lt;</span><span class="n">DisclosurePanel</span><span class="o">&gt;(</span>
                                <span class="n">category</span><span class="o">,</span> <span class="n">getFilter</span><span class="o">(</span><span class="n">category</span><span class="o">));</span>
                <span class="n">EventBus</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">addHandlerToSource</span><span class="o">(</span><span class="n">SymbolEvent</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span>
                                <span class="n">dataGroupAction</span><span class="o">);</span>

                <span class="n">FactDisclosePanel</span> <span class="n">fdp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FactDisclosePanel</span><span class="o">(</span><span class="n">header</span><span class="o">,</span> <span class="n">caption</span><span class="o">);</span>
                <span class="c1">// required to make fdp visible after symbol is loaded
</span><span class="c1"></span>                <span class="n">EventBus</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">addHandlerToSource</span><span class="o">(</span><span class="n">SymbolEvent</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">fdp</span><span class="o">);</span>
                <span class="n">fdp</span><span class="o">.</span><span class="na">addOpenHandler</span><span class="o">(</span><span class="n">dataGroupAction</span><span class="o">);</span>
                <span class="n">EventBus</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">addHandlerToSource</span><span class="o">(</span><span class="n">DataGroupEvent</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">dataGroupAction</span><span class="o">,</span>
                                <span class="n">fdp</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">fdp</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@UiFactory</span>
        <span class="kd">public</span> <span class="n">ChartPanel</span> <span class="nf">chartPanelFactory</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">,</span> <span class="n">String</span> <span class="n">key</span><span class="o">,</span> <span class="n">String</span> <span class="n">width</span><span class="o">,</span>
                        <span class="n">String</span> <span class="n">height</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">rangeSelector</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ChartPanel</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChartPanel</span><span class="o">(</span><span class="n">title</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">,</span> <span class="n">rangeSelector</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">cp</span><span class="o">;</span>
        <span class="o">}</span></code></pre></div>
<p>FDP also listens to <code>SymbolEvent</code> make itself visible on name selection.
This makes FDP visible only after symbol is loaded whereas use of
<code>NameEvent</code> makes visible slightly before, which may look odd. Other
widgets of Snapshot share the SymbolEvent and hence its use doesn&rsquo;t
affect the performance.</p>

<p>It is essential to understand that, FDP attaches open handler to
<code>DataGroupAction</code> and in turn listens for <code>DataGroupEvent</code> fired by
DataGroupAction.</p>

<p>In factory method, we are able to make FDP as a handler for the
DataGroupEvent fired by the DataGroupAction, but FDP has to send it down
to ChartPanel and following code accomplishes this.</p>

<p><code>in.fins.client.widget/FactDisclosePanel.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Widget</span> <span class="n">w</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">cPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">w</span> <span class="k">instanceof</span> <span class="n">DataGroupHandler</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">EventBus</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">addHandlerToSource</span><span class="o">(</span><span class="n">DataGroupEvent</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span>
                                        <span class="o">(</span><span class="n">DataGroupHandler</span><span class="o">)</span> <span class="n">w</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span></code></pre></div>
<p>In FDP, <code>add()</code> method registers all child widgets, which are instances
of <code>DataGroupHandler</code>, as handlers of <code>DataGroupEvent</code>. Once FDP
receives DataGroupEvent, it propagates the event to child widgets. To do
so, it creates a new DataGroupEvent because it is not a good idea to
handle the existing event outside this method.</p>

<h2 id="event-boundary">Event boundary</h2>

<p>Never refer the event received from EventBus outside its handler.</p>

<figure class="text-center" >
  <img class="lazy" data-src="/tutorial/gwt/media/fdp-events2.png" alt="DataGroupEvent propagation" />
</figure>


<h6 id="figure-6-8-datagroupevent-propagation">Figure 6.8. DataGroupEvent propagation</h6>

<p>We will cover Google Chart Tools in a later chapter, and for the moment
<code>ChartPanel</code> uses a basic <code>VerticalPanel</code> to display the chart data in
textual format. In handler method, we traverse through List&lt;Data&gt; of
DataGroup and add Facts with matching keys to VerticalPanel as <code>HTML</code>
widget.</p>

<p><code>in.fins.client.widget/ChartPanel.java</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Java" data-lang="Java">        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDataGroupChange</span><span class="o">(</span><span class="n">DataGroupEvent</span> <span class="n">dataGroupEvent</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">vPanel</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
                <span class="n">dataGroup</span> <span class="o">=</span> <span class="n">dataGroupEvent</span><span class="o">.</span><span class="na">getDataGroup</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="n">dataGroup</span><span class="o">.</span><span class="na">getDataList</span><span class="o">();</span>
                <span class="n">vPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">HTML</span><span class="o">(</span><span class="n">dataGroup</span><span class="o">.</span><span class="na">getCategory</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; : &#34;</span> <span class="o">+</span> <span class="n">key</span><span class="o">));</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">Data</span> <span class="n">data</span> <span class="o">:</span> <span class="n">dataList</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">for</span> <span class="o">(</span><span class="n">Fact</span> <span class="n">fact</span> <span class="o">:</span> <span class="n">data</span><span class="o">.</span><span class="na">getFacts</span><span class="o">())</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="n">fact</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
                                        <span class="n">vPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">HTML</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getDate</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; - &#34;</span>
                                                        <span class="o">+</span> <span class="n">fact</span><span class="o">.</span><span class="na">getValue</span><span class="o">()));</span>
                                <span class="o">}</span>
                        <span class="o">}</span>
                <span class="o">}</span>
        <span class="o">}</span></code></pre></div>
<h2 id="symbolevent-vs-datagroupevent">SymbolEvent vs DataGroupEvent</h2>

<p>FactPanel designed in the previous chapter could have used
DataGroupEvent. But it uses SymbolEvent by taking datasource access and
RPC calls into consideration. On name selection, widgets in Snapshot
display data from multiple DataGroup in one go, and if each of these
widgets use DataGroupEvent, then it involves multiple request to the
server. With SymbolEvent, we will be able to get data for multiple
DataGroups in single RPC.</p>

<p>As we progress, widgets are getting more and more sophisticated and next
in line is FactTable which uses widgets from Cell Widgets group.</p>

        </main>
        <aside id="sidebar-right" class="col-md-1">
        </aside>
      </div>
    </div>
  </div>
</div>

<footer class="container-fluid mt-5">

    <div class="row">
        <div class="col ml-auto">
            <div class="row mb-1 ml-2">
                <a class="text-muted" href="/privacy-policy">Privacy</a>
            </div>
            <div class="row text-muted mb-2 ml-2">
                <span>&copy; 2019 &middot;Powered by <a href="https://gohugo.io" target="_blank"
                        rel="noopener">Hugo</a></span>
            </div>
        </div>
        <div class="col mr-auto">
            <span class="float-right">
                <a href="#" id="back_to_top">
                    <i class="icon-up-open h1 text-secondary"></i>
                </a>
            </span>
        </div>
    </div>

</footer>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>








<script src="/js/vendor.min.d5750c855207aebcf4fdb7568961a27500008ef4a4f40b63a7b028f80a9221d3.js"></script>
</body>

</html>